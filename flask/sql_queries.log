2025-07-03 17:36:51,740 - INFO - Client disconnected from WebSocket
2025-07-03 17:36:53,052 - INFO - chat_id_enc None
2025-07-03 17:36:53,052 - INFO - Generated unique_id_with_template: uid_ea24af53abcc463898def0047d60f7d9_f0124005ecc4764a_1751564213052
2025-07-03 17:36:53,053 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-03 17:36:53,054 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-03 17:36:53,055 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-03 17:36:53,055 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-03 17:36:53,056 - INFO - Generated unique_id_with_template: uid_ea24af53abcc463898def0047d60f7d9_f0124005ecc4764a_1751564213052
2025-07-03 17:36:53,056 - INFO - User metrics loaded: 4 metrics
2025-07-03 17:36:53,257 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 17:36:53,274 - INFO - Intent classification: sql
2025-07-03 17:36:53,296 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-03 17:36:53,555 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 17:36:55,620 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT t.id AS task_id,
       t.title,
       t.status,
       t.priority,
       t.labels,
       t.estimate,
       t.due_date,
       t.source,
       t.created_at AS task_created_at,
       t.updated_at AS task_updated_at,
       pu.full_name AS user_full_name,
       pu.email AS user_email,
       tm.name AS team_name,
       p.name AS project_name
FROM tasks t
LEFT JOIN platform_users pu ON pu.user_id = t.user_id
AND pu.owner_id = 1
LEFT JOIN teams tm ON tm.id = t.team_id
AND tm.owner_id = 1
LEFT JOIN projects p ON p.id = t.project_id
AND p.owner_id = 1
WHERE t.owner_id = 1
  AND ((pu.email = 'prebad50@gmail.com')
       OR (pu.user_id = 'prebad50@gmail.com'));
2025-07-03 17:36:55,623 - INFO - Raw DB data retrieved: 26 rows
2025-07-03 17:36:55,623 - INFO - Sample data: {'task_id': 6, 'title': 'Create Dashboard for Ticket Insights', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'task_created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'task_updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'user_full_name': 'prebad50@gmail.com', 'user_email': 'prebad50@gmail.com', 'team_name': None, 'project_name': None}
2025-07-03 17:36:55,624 - ERROR - SQL Query Error for user_id 1: 
2025-07-03 17:37:31,008 - INFO - chat_id_enc None
2025-07-03 17:37:31,008 - INFO - Generated unique_id_with_template: uid_6115562b36e84e46b3c56b38ea946cf1_ac117a4a042f0024_1751564251008
2025-07-03 17:37:31,008 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-03 17:37:31,009 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-03 17:37:31,010 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-03 17:37:31,010 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-03 17:37:31,011 - INFO - Generated unique_id_with_template: uid_6115562b36e84e46b3c56b38ea946cf1_ac117a4a042f0024_1751564251008
2025-07-03 17:37:31,011 - INFO - User metrics loaded: 4 metrics
2025-07-03 17:37:31,421 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 17:37:31,486 - INFO - Intent classification: sql
2025-07-03 17:37:31,508 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-03 17:37:31,790 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 17:37:35,669 - INFO - chat_id_enc None
2025-07-03 17:37:35,669 - INFO - Generated unique_id_with_template: uid_5eb008fa31034ea1ba12dd9b6dec9c3b_9387fdbe555b86cc_1751564255669
2025-07-03 17:37:35,669 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-03 17:37:35,670 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-03 17:37:35,671 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-03 17:37:35,671 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-03 17:37:35,671 - INFO - Generated unique_id_with_template: uid_5eb008fa31034ea1ba12dd9b6dec9c3b_9387fdbe555b86cc_1751564255669
2025-07-03 17:37:35,671 - INFO - User metrics loaded: 4 metrics
2025-07-03 17:37:35,802 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT u.id AS user_id,
       u.name AS user_name,
       u.email AS user_email,
       u.created_at AS user_created_at,
       u.updated_at AS user_updated_at,
       t.id AS task_id,
       t.title AS task_title,
       t.status AS task_status,
       t.source AS task_source,
       t.created_at AS task_created_at,
       t.updated_at AS task_updated_at,
       p.id AS project_id,
       p.name AS project_name,
       p.source AS project_source,
       p.created_at AS project_created_at,
       p.updated_at AS project_updated_at,
       team.id AS team_id,
       team.name AS team_name
FROM tasks t
LEFT JOIN platform_users u ON (u.email LIKE '%prebad50@gmail.com%'
                               AND u.owner_id = 1
                               AND u.source = 'tasks')
OR (u.user_id = 'prebad50@gmail.com'
    AND u.owner_id = 1
    AND u.source = 'tasks')
LEFT JOIN projects p ON p.id = t.project_id
AND p.owner_id = 1
LEFT JOIN teams team ON team.id = t.team_id
AND team.owner_id = 1
WHERE t.owner_id = 1
  AND ((u.email LIKE '%prebad50@gmail.com%'
        AND u.source = 'tasks')
       OR (u.user_id = 'prebad50@gmail.com'
           AND u.source = 'tasks'));
2025-07-03 17:37:35,804 - INFO - Raw DB data retrieved: 0 rows
2025-07-03 17:37:35,805 - WARNING - No data returned from SQL query
2025-07-03 17:37:35,805 - ERROR - SQL Query Error for user_id 1: 
2025-07-03 17:37:36,090 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 17:37:36,132 - INFO - Intent classification: sql
2025-07-03 17:37:36,147 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-03 17:37:36,551 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-03 17:37:38,231 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON CASE
                           WHEN 'prebad50@gmail.com' LIKE '%@%' THEN platform_users.email = 'prebad50@gmail.com'
                           ELSE platform_users.user_id = 'prebad50@gmail.com'
                       END
WHERE tasks.owner_id = 1
  AND platform_users.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com'
        AND tasks.user_id = platform_users.user_id)
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND tasks.user_id = platform_users.user_id));
2025-07-03 17:37:38,246 - INFO - Raw DB data retrieved: 26 rows
2025-07-03 17:37:38,247 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1}
2025-07-03 17:37:38,248 - ERROR - SQL Query Error for user_id 1: 
2025-07-03 17:39:45,694 - INFO - Client disconnected from WebSocket
2025-07-03 19:25:10,558 - INFO - Client disconnected from WebSocket
2025-07-03 19:43:56,135 - INFO - Client disconnected from WebSocket
2025-07-05 10:03:08,344 - INFO - Client disconnected from WebSocket
2025-07-05 10:04:47,537 - INFO - chat_id_enc 
2025-07-05 10:04:48,351 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:04:48,882 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:04:49,010 - INFO - Created new chat with ID 121 and UUID da6048b2-d51b-4737-8451-ec907e49ebb4 for user 1
2025-07-05 10:04:49,010 - INFO - da6048b2-d51b-4737-8451-ec907e49ebb4
2025-07-05 10:04:49,011 - INFO - Executing chat history query for chat_id da6048b2-d51b-4737-8451-ec907e49ebb4:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:04:49,012 - INFO - Saving message to DB for chat_id da6048b2-d51b-4737-8451-ec907e49ebb4, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:04:49,015 - INFO - Generated unique_id_with_template: uid_617f532a8a994472a20096e6b1bdf2a2_449f4aba2faa1759_1751709889015
2025-07-05 10:04:49,016 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:04:49,016 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:04:49,017 - INFO - Processing query for user_id 1: Which source has the most completed projects?
2025-07-05 10:04:49,017 - INFO - Staff ID filter: 
2025-07-05 10:04:49,017 - INFO - Generated unique_id_with_template: uid_617f532a8a994472a20096e6b1bdf2a2_449f4aba2faa1759_1751709889015
2025-07-05 10:04:49,017 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:04:50,779 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:04:50,813 - INFO - Intent classification: sql
2025-07-05 10:04:50,814 - INFO - SQLAlchemy connection failed, recreating: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-05 10:04:50,815 - ERROR - SQL Query Error for user_id 1: Connection.__init__() got an unexpected keyword argument 'pool_pre_ping'
2025-07-05 10:04:50,815 - INFO - NO TEMPLATE
2025-07-05 10:04:50,815 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:04:51,305 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:05:05,972 - INFO - chat_id_enc 
2025-07-05 10:05:06,439 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:05:07,072 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:05:07,171 - INFO - Created new chat with ID 122 and UUID 4bdc9142-b125-4819-a5dd-de00c9319ba9 for user 1
2025-07-05 10:05:07,172 - INFO - 4bdc9142-b125-4819-a5dd-de00c9319ba9
2025-07-05 10:05:07,172 - INFO - Executing chat history query for chat_id 4bdc9142-b125-4819-a5dd-de00c9319ba9:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:05:07,173 - INFO - Saving message to DB for chat_id 4bdc9142-b125-4819-a5dd-de00c9319ba9, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:05:07,178 - INFO - Generated unique_id_with_template: uid_05a881b2630748be93e019b933814b09_a9b89bc3ce7230d2_1751709907178
2025-07-05 10:05:07,178 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:05:07,179 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:05:07,180 - INFO - Processing query for user_id 1: Which source has the most completed projects?
2025-07-05 10:05:07,180 - INFO - Staff ID filter: 
2025-07-05 10:05:07,180 - INFO - Generated unique_id_with_template: uid_05a881b2630748be93e019b933814b09_a9b89bc3ce7230d2_1751709907178
2025-07-05 10:05:07,180 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:05:08,119 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:05:08,153 - INFO - Intent classification: sql
2025-07-05 10:05:08,179 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:05:08,450 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:05:08,823 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.source,
       COUNT(*) AS completed_projects_count
FROM projects p
WHERE p.owner_id = 1
  AND p.state = 'completed'
GROUP BY p.source
ORDER BY completed_projects_count DESC
LIMIT 1;
2025-07-05 10:05:08,825 - INFO - Raw DB data retrieved: 1 rows
2025-07-05 10:05:08,825 - INFO - Sample data: {'source': 'linear', 'completed_projects_count': 5}
2025-07-05 10:05:08,826 - INFO - NO TEMPLATE
2025-07-05 10:05:08,826 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:05:09,138 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:05:19,083 - INFO - chat_id_enc 4bdc9142-b125-4819-a5dd-de00c9319ba9
2025-07-05 10:05:19,083 - INFO - Executing chat history query for chat_id 4bdc9142-b125-4819-a5dd-de00c9319ba9:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:05:19,084 - INFO - Saving message to DB for chat_id 4bdc9142-b125-4819-a5dd-de00c9319ba9, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:05:19,090 - INFO - Generated unique_id_with_template: uid_eb48d745685d4017b7c1387200261c30_ef38f16b32805e3c_1751709919090
2025-07-05 10:05:19,091 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:05:19,092 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:05:19,094 - INFO - Processing query for user_id 1: give more insight
2025-07-05 10:05:19,095 - INFO - Staff ID filter: 
2025-07-05 10:05:19,095 - INFO - Generated unique_id_with_template: uid_eb48d745685d4017b7c1387200261c30_ef38f16b32805e3c_1751709919090
2025-07-05 10:05:19,095 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:05:19,521 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:05:19,535 - INFO - Intent classification: chat
2025-07-05 10:05:19,535 - INFO - NO TEMPLATE
2025-07-05 10:05:19,536 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:05:19,793 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:05:26,237 - INFO - chat_id_enc 4bdc9142-b125-4819-a5dd-de00c9319ba9
2025-07-05 10:05:26,238 - INFO - Executing chat history query for chat_id 4bdc9142-b125-4819-a5dd-de00c9319ba9:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:05:26,240 - INFO - Saving message to DB for chat_id 4bdc9142-b125-4819-a5dd-de00c9319ba9, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:05:26,244 - INFO - Generated unique_id_with_template: uid_fc0457a83532423abf9442dc0b228c89_17a8b45bac562384_1751709926244
2025-07-05 10:05:26,244 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:05:26,245 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:05:26,246 - INFO - Processing query for user_id 1: Which labels are used most across high-priority tasks?
2025-07-05 10:05:26,246 - INFO - Staff ID filter: 
2025-07-05 10:05:26,246 - INFO - Generated unique_id_with_template: uid_fc0457a83532423abf9442dc0b228c89_17a8b45bac562384_1751709926244
2025-07-05 10:05:26,246 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:05:26,413 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:05:26,431 - INFO - Intent classification: sql
2025-07-05 10:05:26,451 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:05:26,662 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:05:27,115 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT labels,
       COUNT(*) AS usage_count
FROM tasks
WHERE owner_id = 1
  AND priority = 'High'
  AND is_deleted = 0
GROUP BY labels
ORDER BY usage_count DESC;
2025-07-05 10:05:27,117 - INFO - Raw DB data retrieved: 0 rows
2025-07-05 10:05:27,118 - WARNING - No data returned from SQL query
2025-07-05 10:05:27,118 - INFO - NO TEMPLATE
2025-07-05 10:05:27,118 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:05:27,410 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:05:32,329 - INFO - chat_id_enc 4bdc9142-b125-4819-a5dd-de00c9319ba9
2025-07-05 10:05:32,330 - INFO - Executing chat history query for chat_id 4bdc9142-b125-4819-a5dd-de00c9319ba9:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:05:32,331 - INFO - Saving message to DB for chat_id 4bdc9142-b125-4819-a5dd-de00c9319ba9, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:05:32,335 - INFO - Generated unique_id_with_template: uid_131740e893734abd9f97974f15a31492_97c3ac452416754c_1751709932335
2025-07-05 10:05:32,335 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:05:32,337 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:05:32,338 - INFO - Processing query for user_id 1: Which projects are past their end date but not marked complete?
2025-07-05 10:05:32,338 - INFO - Staff ID filter: 
2025-07-05 10:05:32,338 - INFO - Generated unique_id_with_template: uid_131740e893734abd9f97974f15a31492_97c3ac452416754c_1751709932335
2025-07-05 10:05:32,338 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:05:32,542 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:05:32,557 - INFO - Intent classification: sql
2025-07-05 10:05:32,578 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:05:32,786 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:05:33,443 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.id AS project_id,
       p.name AS project_name,
       p.end_date,
       p.state
FROM projects p
LEFT JOIN tasks t ON p.id = t.project_id
AND t.owner_id = p.owner_id
WHERE p.owner_id = 1
  AND p.end_date < CURRENT_DATE
  AND p.state != 'completed'
2025-07-05 10:05:33,445 - INFO - Raw DB data retrieved: 0 rows
2025-07-05 10:05:33,445 - WARNING - No data returned from SQL query
2025-07-05 10:05:33,445 - INFO - NO TEMPLATE
2025-07-05 10:05:33,445 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:05:33,767 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:05:42,448 - INFO - chat_id_enc 
2025-07-05 10:05:42,646 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:05:42,962 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:05:43,119 - INFO - Created new chat with ID 123 and UUID e96e220c-8034-4d56-abc0-d37d3dbf0ab0 for user 1
2025-07-05 10:05:43,119 - INFO - e96e220c-8034-4d56-abc0-d37d3dbf0ab0
2025-07-05 10:05:43,120 - INFO - Executing chat history query for chat_id e96e220c-8034-4d56-abc0-d37d3dbf0ab0:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:05:43,121 - INFO - Saving message to DB for chat_id e96e220c-8034-4d56-abc0-d37d3dbf0ab0, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:05:43,125 - INFO - Generated unique_id_with_template: uid_e1a20ce9f13347f48505fbaa83d97b3f_3b94110e384c5c61_1751709943125
2025-07-05 10:05:43,126 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:05:43,126 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:05:43,127 - INFO - Processing query for user_id 1: What’s the ratio of completed to total tasks per project?
2025-07-05 10:05:43,127 - INFO - Staff ID filter: 
2025-07-05 10:05:43,127 - INFO - Generated unique_id_with_template: uid_e1a20ce9f13347f48505fbaa83d97b3f_3b94110e384c5c61_1751709943125
2025-07-05 10:05:43,127 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:05:43,322 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:05:43,338 - INFO - Intent classification: sql
2025-07-05 10:05:43,357 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:05:43,622 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:05:44,416 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.id AS project_id,
       p.name AS project_name,
       COUNT(CASE
                 WHEN t.status = 'Done' THEN 1
             END) AS completed_tasks,
       COUNT(t.id) AS total_tasks,
       (COUNT(CASE
                  WHEN t.status = 'Done' THEN 1
              END) / COUNT(t.id)) AS completion_ratio
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
AND p.owner_id = 1
WHERE t.owner_id = 1
GROUP BY p.id,
         p.name;
2025-07-05 10:05:44,418 - INFO - Raw DB data retrieved: 8 rows
2025-07-05 10:05:44,418 - INFO - Sample data: {'project_id': None, 'project_name': None, 'completed_tasks': 21, 'total_tasks': 155, 'completion_ratio': Decimal('0.1355')}
2025-07-05 10:05:44,419 - INFO - NO TEMPLATE
2025-07-05 10:05:44,419 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:05:44,784 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:06:02,949 - INFO - chat_id_enc e96e220c-8034-4d56-abc0-d37d3dbf0ab0
2025-07-05 10:06:02,951 - INFO - Executing chat history query for chat_id e96e220c-8034-4d56-abc0-d37d3dbf0ab0:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:06:02,953 - INFO - Saving message to DB for chat_id e96e220c-8034-4d56-abc0-d37d3dbf0ab0, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:06:02,962 - INFO - Generated unique_id_with_template: uid_16f7281630b444658cd4989c1719b789_4df214ea8999a063_1751709962962
2025-07-05 10:06:02,963 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:06:02,971 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:06:02,972 - INFO - Processing query for user_id 1: give insight
2025-07-05 10:06:02,973 - INFO - Staff ID filter: 
2025-07-05 10:06:02,973 - INFO - Generated unique_id_with_template: uid_16f7281630b444658cd4989c1719b789_4df214ea8999a063_1751709962962
2025-07-05 10:06:02,973 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:06:03,181 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:06:03,215 - INFO - Intent classification: chat
2025-07-05 10:06:03,215 - INFO - NO TEMPLATE
2025-07-05 10:06:03,215 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:06:03,414 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:06:09,269 - INFO - chat_id_enc e96e220c-8034-4d56-abc0-d37d3dbf0ab0
2025-07-05 10:06:09,270 - INFO - Executing chat history query for chat_id e96e220c-8034-4d56-abc0-d37d3dbf0ab0:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:06:09,271 - INFO - Saving message to DB for chat_id e96e220c-8034-4d56-abc0-d37d3dbf0ab0, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:06:09,274 - INFO - Generated unique_id_with_template: uid_b66e76abf0fd4440bf70b7ee8c217b32_d23d0a5b7e7d716d_1751709969274
2025-07-05 10:06:09,275 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:06:09,276 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:06:09,277 - INFO - Processing query for user_id 1: give template
2025-07-05 10:06:09,277 - INFO - Staff ID filter: 
2025-07-05 10:06:09,277 - INFO - Generated unique_id_with_template: uid_b66e76abf0fd4440bf70b7ee8c217b32_d23d0a5b7e7d716d_1751709969274
2025-07-05 10:06:09,277 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:06:11,626 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:06:11,650 - INFO - Intent classification: chat
2025-07-05 10:06:11,650 - INFO - NO TEMPLATE
2025-07-05 10:06:11,650 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:06:11,843 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:06:18,556 - INFO - chat_id_enc 
2025-07-05 10:06:18,747 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:06:19,025 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:06:19,195 - INFO - Created new chat with ID 124 and UUID 6c1820a7-2d4f-49aa-987b-34e47ce0dab9 for user 1
2025-07-05 10:06:19,195 - INFO - 6c1820a7-2d4f-49aa-987b-34e47ce0dab9
2025-07-05 10:06:19,195 - INFO - Executing chat history query for chat_id 6c1820a7-2d4f-49aa-987b-34e47ce0dab9:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:06:19,196 - INFO - Saving message to DB for chat_id 6c1820a7-2d4f-49aa-987b-34e47ce0dab9, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:06:19,201 - INFO - Generated unique_id_with_template: uid_2e6d4e35cf0b40648f665e86999c346d_418d27911c0eaf7b_1751709979201
2025-07-05 10:06:19,201 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:06:19,202 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:06:19,203 - INFO - Processing query for user_id 1: How does task volume differ between Linear, Trello, and Jira?
2025-07-05 10:06:19,203 - INFO - Staff ID filter: 
2025-07-05 10:06:19,203 - INFO - Generated unique_id_with_template: uid_2e6d4e35cf0b40648f665e86999c346d_418d27911c0eaf7b_1751709979201
2025-07-05 10:06:19,203 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:06:19,385 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:06:19,413 - INFO - Intent classification: sql
2025-07-05 10:06:19,438 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:06:19,893 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:06:20,261 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT t.source,
       COUNT(*) AS task_count
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
AND p.owner_id = 1
WHERE t.owner_id = 1
GROUP BY t.source;
2025-07-05 10:06:20,263 - INFO - Raw DB data retrieved: 3 rows
2025-07-05 10:06:20,264 - INFO - Sample data: {'source': 'linear', 'task_count': 152}
2025-07-05 10:06:20,264 - INFO - NO TEMPLATE
2025-07-05 10:06:20,264 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:06:20,562 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:06:33,080 - INFO - chat_id_enc 6c1820a7-2d4f-49aa-987b-34e47ce0dab9
2025-07-05 10:06:33,081 - INFO - Executing chat history query for chat_id 6c1820a7-2d4f-49aa-987b-34e47ce0dab9:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:06:33,082 - INFO - Saving message to DB for chat_id 6c1820a7-2d4f-49aa-987b-34e47ce0dab9, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:06:33,086 - INFO - Generated unique_id_with_template: uid_dd2279dd162f4c59ae2fc6b9d4d97fcf_de11d7a532f6fa79_1751709993086
2025-07-05 10:06:33,087 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:06:33,088 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:06:33,089 - INFO - Processing query for user_id 1: wait why are u not giving template?
2025-07-05 10:06:33,089 - INFO - Staff ID filter: 
2025-07-05 10:06:33,089 - INFO - Generated unique_id_with_template: uid_dd2279dd162f4c59ae2fc6b9d4d97fcf_de11d7a532f6fa79_1751709993086
2025-07-05 10:06:33,089 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:06:35,323 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:06:35,353 - INFO - Intent classification: chat
2025-07-05 10:06:35,353 - INFO - NO TEMPLATE
2025-07-05 10:06:35,353 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:06:35,557 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:06:40,009 - INFO - chat_id_enc 6c1820a7-2d4f-49aa-987b-34e47ce0dab9
2025-07-05 10:06:40,009 - INFO - Executing chat history query for chat_id 6c1820a7-2d4f-49aa-987b-34e47ce0dab9:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:06:40,011 - INFO - Saving message to DB for chat_id 6c1820a7-2d4f-49aa-987b-34e47ce0dab9, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:06:40,014 - INFO - Generated unique_id_with_template: uid_8051cb1bb4484e64a7b74687b47b5b6a_c0ffcae023c71728_1751710000014
2025-07-05 10:06:40,014 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:06:40,015 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:06:40,016 - INFO - Processing query for user_id 1: give template
2025-07-05 10:06:40,016 - INFO - Staff ID filter: 
2025-07-05 10:06:40,016 - INFO - Generated unique_id_with_template: uid_8051cb1bb4484e64a7b74687b47b5b6a_c0ffcae023c71728_1751710000014
2025-07-05 10:06:40,016 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:06:40,192 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:06:40,220 - INFO - Intent classification: chat
2025-07-05 10:06:40,220 - INFO - NO TEMPLATE
2025-07-05 10:06:40,220 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:06:40,406 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:06:49,277 - INFO - chat_id_enc 
2025-07-05 10:06:49,484 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:06:49,748 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:06:49,875 - INFO - Created new chat with ID 125 and UUID a94a8e8f-5297-4b4f-8e57-de094a6e2aaa for user 1
2025-07-05 10:06:49,875 - INFO - a94a8e8f-5297-4b4f-8e57-de094a6e2aaa
2025-07-05 10:06:49,876 - INFO - Executing chat history query for chat_id a94a8e8f-5297-4b4f-8e57-de094a6e2aaa:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:06:49,877 - INFO - Saving message to DB for chat_id a94a8e8f-5297-4b4f-8e57-de094a6e2aaa, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:06:49,881 - INFO - Generated unique_id_with_template: uid_e6781f4c214d4e9c9ca388c46d8861a4_bc7555b144ca6700_1751710009881
2025-07-05 10:06:49,881 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:06:49,882 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:06:49,883 - INFO - Processing query for user_id 1: Which project has the highest estimated workload?
2025-07-05 10:06:49,883 - INFO - Staff ID filter: 
2025-07-05 10:06:49,883 - INFO - Generated unique_id_with_template: uid_e6781f4c214d4e9c9ca388c46d8861a4_bc7555b144ca6700_1751710009881
2025-07-05 10:06:49,883 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:06:50,165 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:06:50,323 - INFO - Intent classification: sql
2025-07-05 10:06:50,338 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:06:50,610 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:06:51,219 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.id AS project_id,
       p.name AS project_name,
       SUM(t.estimate) AS total_estimated_workload
FROM projects p
LEFT JOIN tasks t ON p.id = t.project_id
AND t.owner_id = 1
WHERE p.owner_id = 1
GROUP BY p.id,
         p.name
ORDER BY total_estimated_workload DESC
LIMIT 1;
2025-07-05 10:06:51,221 - INFO - Raw DB data retrieved: 1 rows
2025-07-05 10:06:51,221 - INFO - Sample data: {'project_id': 66, 'project_name': "Barber's update", 'total_estimated_workload': 75.0}
2025-07-05 10:06:51,221 - INFO - NO TEMPLATE
2025-07-05 10:06:51,222 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:06:51,423 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:07:05,457 - INFO - chat_id_enc a94a8e8f-5297-4b4f-8e57-de094a6e2aaa
2025-07-05 10:07:05,457 - INFO - Executing chat history query for chat_id a94a8e8f-5297-4b4f-8e57-de094a6e2aaa:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:07:05,458 - INFO - Saving message to DB for chat_id a94a8e8f-5297-4b4f-8e57-de094a6e2aaa, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:07:05,466 - INFO - Generated unique_id_with_template: uid_a9ae0809672149388ce432f0a515e32a_d22c4f16a8c9e246_1751710025466
2025-07-05 10:07:05,467 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:07:05,468 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:07:05,469 - INFO - Processing query for user_id 1: give me breakdown on what ayo have done so far
2025-07-05 10:07:05,469 - INFO - Staff ID filter: 
2025-07-05 10:07:05,469 - INFO - Generated unique_id_with_template: uid_a9ae0809672149388ce432f0a515e32a_d22c4f16a8c9e246_1751710025466
2025-07-05 10:07:05,469 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:07:05,643 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:07:05,660 - INFO - Intent classification: sql
2025-07-05 10:07:05,681 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:07:05,870 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:07:06,911 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT t.id AS task_id,
       t.title AS task_title,
       t.status AS task_status,
       t.source AS task_source,
       t.created_at AS task_created_at,
       t.updated_at AS task_updated_at,
       u.full_name AS assigned_user,
       p.name AS project_name,
       t.estimate AS task_estimate
FROM tasks t
LEFT JOIN platform_users u ON t.user_id = u.id
AND u.owner_id = 1
LEFT JOIN projects p ON t.project_id = p.id
AND p.owner_id = 1
WHERE t.owner_id = 1
  AND u.full_name LIKE '%ayo%'
ORDER BY t.created_at DESC;
2025-07-05 10:07:06,913 - INFO - Raw DB data retrieved: 0 rows
2025-07-05 10:07:06,914 - WARNING - No data returned from SQL query
2025-07-05 10:07:06,914 - INFO - NO TEMPLATE
2025-07-05 10:07:06,914 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:07:07,129 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:07:16,189 - INFO - chat_id_enc a94a8e8f-5297-4b4f-8e57-de094a6e2aaa
2025-07-05 10:07:16,189 - INFO - Executing chat history query for chat_id a94a8e8f-5297-4b4f-8e57-de094a6e2aaa:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:07:16,190 - INFO - Saving message to DB for chat_id a94a8e8f-5297-4b4f-8e57-de094a6e2aaa, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:07:16,194 - INFO - Generated unique_id_with_template: uid_fc71f210dcac46abae67ee5e9c606744_57fcf6b3f7678f78_1751710036194
2025-07-05 10:07:16,194 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:07:16,195 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:07:16,197 - INFO - Processing query for user_id 1: what about allphonesblog
2025-07-05 10:07:16,197 - INFO - Staff ID filter: 
2025-07-05 10:07:16,197 - INFO - Generated unique_id_with_template: uid_fc71f210dcac46abae67ee5e9c606744_57fcf6b3f7678f78_1751710036194
2025-07-05 10:07:16,197 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:07:16,419 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:07:16,450 - INFO - Intent classification: sql
2025-07-05 10:07:16,468 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:07:16,689 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:07:18,094 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT u.id AS user_id,
       u.name AS user_name,
       u.email,
       p.id AS project_id,
       p.name AS project_name,
       t.id AS team_id,
       t.name AS team_name,
       task.id AS task_id,
       task.title AS task_title,
       task.status AS task_status,
       task.priority AS task_priority,
       task.labels AS task_labels,
       task.estimate AS task_estimate,
       task.due_date AS task_due_date,
       task.source AS task_source,
       task.created_at AS task_created_at,
       task.updated_at AS task_updated_at
FROM tasks AS task
LEFT JOIN projects AS p ON task.project_id = p.id
AND p.owner_id = 1
LEFT JOIN teams AS t ON task.team_id = t.id
AND t.owner_id = 1
LEFT JOIN platform_users AS u ON task.user_id = u.id
AND u.owner_id = 1
WHERE p.id IS NOT NULL
  AND p.source = 'linear'
  AND p.owner_id = 1;
2025-07-05 10:07:18,102 - INFO - Raw DB data retrieved: 191 rows
2025-07-05 10:07:18,102 - INFO - Sample data: {'user_id': None, 'user_name': None, 'email': None, 'project_id': 6, 'project_name': 'Backend Dev', 'team_id': None, 'team_name': None, 'task_id': 119, 'task_title': 'Build Automated Testing Suite', 'task_status': 'Todo', 'task_priority': '2', 'task_labels': '[]', 'task_estimate': 8.0, 'task_due_date': None, 'task_source': 'linear', 'task_created_at': datetime.datetime(2025, 6, 18, 18, 12, 37), 'task_updated_at': datetime.datetime(2025, 6, 19, 10, 19, 21)}
2025-07-05 10:07:18,106 - INFO - NO TEMPLATE
2025-07-05 10:07:18,107 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:07:18,701 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:10:46,377 - INFO - Client disconnected from WebSocket
2025-07-05 10:15:06,757 - INFO - chat_id_enc 
2025-07-05 10:15:07,006 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:15:07,248 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:15:07,334 - INFO - Created new chat with ID 126 and UUID 41cdadaf-104c-4cef-8b49-1a55a39b9b08 for user 1
2025-07-05 10:15:07,334 - INFO - 41cdadaf-104c-4cef-8b49-1a55a39b9b08
2025-07-05 10:15:07,335 - INFO - Executing chat history query for chat_id 41cdadaf-104c-4cef-8b49-1a55a39b9b08:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:15:07,336 - INFO - Saving message to DB for chat_id 41cdadaf-104c-4cef-8b49-1a55a39b9b08, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:15:07,340 - INFO - Generated unique_id_with_template: uid_11e849c9fba74cf896e122ba01ac8e4e_675cf0aff852c91c_1751710507340
2025-07-05 10:15:07,341 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:15:07,341 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:15:07,342 - INFO - Processing query for user_id 1: give me text with template cool?
2025-07-05 10:15:07,342 - INFO - Staff ID filter: 
2025-07-05 10:15:07,342 - INFO - Generated unique_id_with_template: uid_11e849c9fba74cf896e122ba01ac8e4e_675cf0aff852c91c_1751710507340
2025-07-05 10:15:07,343 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:15:07,557 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:15:07,595 - INFO - Intent classification: chat
2025-07-05 10:15:07,595 - INFO - NO TEMPLATE
2025-07-05 10:15:07,595 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:15:07,852 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:15:15,868 - INFO - chat_id_enc 41cdadaf-104c-4cef-8b49-1a55a39b9b08
2025-07-05 10:15:15,869 - INFO - Executing chat history query for chat_id 41cdadaf-104c-4cef-8b49-1a55a39b9b08:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:15:15,870 - INFO - Saving message to DB for chat_id 41cdadaf-104c-4cef-8b49-1a55a39b9b08, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:15:15,874 - INFO - Generated unique_id_with_template: uid_b3c6bd387a284c4bb94d4f538d52efbd_f5dae7032ab03020_1751710515874
2025-07-05 10:15:15,874 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:15:15,875 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:15:15,876 - INFO - Processing query for user_id 1: How many tasks have no status assigned?
2025-07-05 10:15:15,877 - INFO - Staff ID filter: 
2025-07-05 10:15:15,877 - INFO - Generated unique_id_with_template: uid_b3c6bd387a284c4bb94d4f538d52efbd_f5dae7032ab03020_1751710515874
2025-07-05 10:15:15,877 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:15:16,104 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:15:16,128 - INFO - Intent classification: sql
2025-07-05 10:15:16,145 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:15:16,437 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:15:16,650 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT COUNT(*) AS task_count
FROM tasks
WHERE owner_id = 1
  AND (status IS NULL
       OR status = '')
2025-07-05 10:15:16,652 - INFO - Raw DB data retrieved: 1 rows
2025-07-05 10:15:16,652 - INFO - Sample data: {'task_count': 0}
2025-07-05 10:15:16,652 - INFO - NO TEMPLATE
2025-07-05 10:15:16,652 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:15:16,835 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:15:22,076 - INFO - chat_id_enc 41cdadaf-104c-4cef-8b49-1a55a39b9b08
2025-07-05 10:15:22,077 - INFO - Executing chat history query for chat_id 41cdadaf-104c-4cef-8b49-1a55a39b9b08:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:15:22,078 - INFO - Saving message to DB for chat_id 41cdadaf-104c-4cef-8b49-1a55a39b9b08, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:15:22,085 - INFO - Generated unique_id_with_template: uid_76fe8adfd4454f5d9951b1dba0fe41e8_120333fb59753456_1751710522085
2025-07-05 10:15:22,086 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:15:22,086 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:15:22,087 - INFO - Processing query for user_id 1: What is the distribution of task priorities across all projects?
2025-07-05 10:15:22,087 - INFO - Staff ID filter: 
2025-07-05 10:15:22,087 - INFO - Generated unique_id_with_template: uid_76fe8adfd4454f5d9951b1dba0fe41e8_120333fb59753456_1751710522085
2025-07-05 10:15:22,087 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:15:22,281 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:15:22,302 - INFO - Intent classification: sql
2025-07-05 10:15:22,322 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:15:22,593 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:15:22,789 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT priority,
       COUNT(*) AS task_count
FROM tasks
WHERE owner_id = 1
GROUP BY priority;
2025-07-05 10:15:22,791 - INFO - Raw DB data retrieved: 6 rows
2025-07-05 10:15:22,791 - INFO - Sample data: {'priority': '2', 'task_count': 53}
2025-07-05 10:15:22,791 - INFO - NO TEMPLATE
2025-07-05 10:15:22,791 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:15:23,022 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:15:28,776 - INFO - chat_id_enc 41cdadaf-104c-4cef-8b49-1a55a39b9b08
2025-07-05 10:15:28,776 - INFO - Executing chat history query for chat_id 41cdadaf-104c-4cef-8b49-1a55a39b9b08:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:15:28,777 - INFO - Saving message to DB for chat_id 41cdadaf-104c-4cef-8b49-1a55a39b9b08, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:15:28,781 - INFO - Generated unique_id_with_template: uid_48c9de8b40194a7aa6dd3ca65b52d7de_27b43b929681acd5_1751710528781
2025-07-05 10:15:28,781 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:15:28,782 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:15:28,783 - INFO - Processing query for user_id 1: yes
2025-07-05 10:15:28,783 - INFO - Staff ID filter: 
2025-07-05 10:15:28,783 - INFO - Generated unique_id_with_template: uid_48c9de8b40194a7aa6dd3ca65b52d7de_27b43b929681acd5_1751710528781
2025-07-05 10:15:28,783 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:15:28,963 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:15:28,980 - INFO - Intent classification: chat
2025-07-05 10:15:28,980 - INFO - NO TEMPLATE
2025-07-05 10:15:28,980 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:15:29,371 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:15:34,508 - INFO - chat_id_enc 41cdadaf-104c-4cef-8b49-1a55a39b9b08
2025-07-05 10:15:34,509 - INFO - Executing chat history query for chat_id 41cdadaf-104c-4cef-8b49-1a55a39b9b08:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:15:34,510 - INFO - Saving message to DB for chat_id 41cdadaf-104c-4cef-8b49-1a55a39b9b08, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:15:34,515 - INFO - Generated unique_id_with_template: uid_7e725011f9f14479ae9eedbc841d27f1_7300b6335180ab2c_1751710534515
2025-07-05 10:15:34,516 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:15:34,516 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:15:34,517 - INFO - Processing query for user_id 1: where is the template
2025-07-05 10:15:34,517 - INFO - Staff ID filter: 
2025-07-05 10:15:34,517 - INFO - Generated unique_id_with_template: uid_7e725011f9f14479ae9eedbc841d27f1_7300b6335180ab2c_1751710534515
2025-07-05 10:15:34,517 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:15:34,727 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:15:34,751 - INFO - Intent classification: chat
2025-07-05 10:15:34,751 - INFO - NO TEMPLATE
2025-07-05 10:15:34,751 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:15:34,959 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:15:46,268 - INFO - chat_id_enc 41cdadaf-104c-4cef-8b49-1a55a39b9b08
2025-07-05 10:15:46,269 - INFO - Executing chat history query for chat_id 41cdadaf-104c-4cef-8b49-1a55a39b9b08:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:15:46,271 - INFO - Saving message to DB for chat_id 41cdadaf-104c-4cef-8b49-1a55a39b9b08, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:15:46,276 - INFO - Generated unique_id_with_template: uid_59d3eda0bd544aec970c6149cf48da0d_5bdd99e39a3c9d62_1751710546276
2025-07-05 10:15:46,276 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:15:46,277 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:15:46,278 - INFO - Processing query for user_id 1: i need template
2025-07-05 10:15:46,278 - INFO - Staff ID filter: 
2025-07-05 10:15:46,279 - INFO - Generated unique_id_with_template: uid_59d3eda0bd544aec970c6149cf48da0d_5bdd99e39a3c9d62_1751710546276
2025-07-05 10:15:46,279 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:15:46,481 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:15:46,527 - INFO - Intent classification: chat
2025-07-05 10:15:46,527 - INFO - NO TEMPLATE
2025-07-05 10:15:46,527 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:15:46,739 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:15:53,576 - INFO - chat_id_enc 41cdadaf-104c-4cef-8b49-1a55a39b9b08
2025-07-05 10:15:53,577 - INFO - Executing chat history query for chat_id 41cdadaf-104c-4cef-8b49-1a55a39b9b08:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:15:53,578 - INFO - Saving message to DB for chat_id 41cdadaf-104c-4cef-8b49-1a55a39b9b08, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:15:53,582 - INFO - Generated unique_id_with_template: uid_edf9d51b6a3b4f77996eecf3be80471e_586742db9c2ff508_1751710553582
2025-07-05 10:15:53,582 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:15:53,583 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:15:53,584 - INFO - Processing query for user_id 1: no not this on a data
2025-07-05 10:15:53,584 - INFO - Staff ID filter: 
2025-07-05 10:15:53,585 - INFO - Generated unique_id_with_template: uid_edf9d51b6a3b4f77996eecf3be80471e_586742db9c2ff508_1751710553582
2025-07-05 10:15:53,585 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:15:54,159 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:15:54,183 - INFO - Intent classification: chat
2025-07-05 10:15:54,183 - INFO - NO TEMPLATE
2025-07-05 10:15:54,183 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:15:54,384 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:15:57,776 - INFO - chat_id_enc 41cdadaf-104c-4cef-8b49-1a55a39b9b08
2025-07-05 10:15:57,777 - INFO - Executing chat history query for chat_id 41cdadaf-104c-4cef-8b49-1a55a39b9b08:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:15:57,778 - INFO - Saving message to DB for chat_id 41cdadaf-104c-4cef-8b49-1a55a39b9b08, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:15:57,782 - INFO - Generated unique_id_with_template: uid_57bc23c09f544a18a14c942893aff278_f6f2e6b8be2a1425_1751710557782
2025-07-05 10:15:57,782 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:15:57,783 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:15:57,783 - INFO - Processing query for user_id 1: Which label is associated with the longest task durations?
2025-07-05 10:15:57,784 - INFO - Staff ID filter: 
2025-07-05 10:15:57,784 - INFO - Generated unique_id_with_template: uid_57bc23c09f544a18a14c942893aff278_f6f2e6b8be2a1425_1751710557782
2025-07-05 10:15:57,784 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:15:57,948 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:15:57,964 - INFO - Intent classification: sql
2025-07-05 10:15:57,977 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:15:58,227 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:15:58,653 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT JSON_UNQUOTE(JSON_EXTRACT(labels, '$[0]')) AS label,
       AVG(TIMESTAMPDIFF(SECOND, created_at, updated_at)) AS avg_duration_seconds
FROM tasks
WHERE owner_id = 1
  AND labels IS NOT NULL
  AND JSON_LENGTH(labels) > 0
GROUP BY label
ORDER BY avg_duration_seconds DESC
LIMIT 1;
2025-07-05 10:15:58,654 - INFO - Raw DB data retrieved: 1 rows
2025-07-05 10:15:58,655 - INFO - Sample data: {'label': '{"id": "68548c13270aaf4577846703", "name": "", "uses": 1, "color": "green", "nodeId": "ari:cloud:trello::label/workspace/60c21f02fee70f1529ca157a/68548c13270aaf4577846703", "idBoard": "68548c13270aaf4577846633", "idOrganization": "60c21f02fee70f1529ca157a"}', 'avg_duration_seconds': Decimal('-1081.0000')}
2025-07-05 10:15:58,655 - INFO - NO TEMPLATE
2025-07-05 10:15:58,655 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:15:58,842 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:16:02,928 - INFO - chat_id_enc 41cdadaf-104c-4cef-8b49-1a55a39b9b08
2025-07-05 10:16:02,929 - INFO - Executing chat history query for chat_id 41cdadaf-104c-4cef-8b49-1a55a39b9b08:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:16:02,931 - INFO - Saving message to DB for chat_id 41cdadaf-104c-4cef-8b49-1a55a39b9b08, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:16:02,935 - INFO - Generated unique_id_with_template: uid_071f0558ff2c442aa5a4c84359b77c9d_0c5f3cece1373ad2_1751710562935
2025-07-05 10:16:02,935 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:16:02,936 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:16:02,937 - INFO - Processing query for user_id 1: template?
2025-07-05 10:16:02,937 - INFO - Staff ID filter: 
2025-07-05 10:16:02,937 - INFO - Generated unique_id_with_template: uid_071f0558ff2c442aa5a4c84359b77c9d_0c5f3cece1373ad2_1751710562935
2025-07-05 10:16:02,937 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:16:03,132 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:16:03,162 - INFO - Intent classification: chat
2025-07-05 10:16:03,162 - INFO - NO TEMPLATE
2025-07-05 10:16:03,162 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:16:03,390 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:16:07,697 - INFO - chat_id_enc 41cdadaf-104c-4cef-8b49-1a55a39b9b08
2025-07-05 10:16:07,698 - INFO - Executing chat history query for chat_id 41cdadaf-104c-4cef-8b49-1a55a39b9b08:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:16:07,699 - INFO - Saving message to DB for chat_id 41cdadaf-104c-4cef-8b49-1a55a39b9b08, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:16:07,703 - INFO - Generated unique_id_with_template: uid_38d2d1b346c744f3870c464dd75b5235_a756bbaddcabf032_1751710567703
2025-07-05 10:16:07,703 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:16:07,704 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:16:07,705 - INFO - Processing query for user_id 1: r u crazy?
2025-07-05 10:16:07,705 - INFO - Staff ID filter: 
2025-07-05 10:16:07,705 - INFO - Generated unique_id_with_template: uid_38d2d1b346c744f3870c464dd75b5235_a756bbaddcabf032_1751710567703
2025-07-05 10:16:07,705 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:16:07,861 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:16:07,882 - INFO - Intent classification: chat
2025-07-05 10:16:07,882 - INFO - NO TEMPLATE
2025-07-05 10:16:07,883 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:16:08,121 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:16:11,508 - INFO - chat_id_enc 41cdadaf-104c-4cef-8b49-1a55a39b9b08
2025-07-05 10:16:11,508 - INFO - Executing chat history query for chat_id 41cdadaf-104c-4cef-8b49-1a55a39b9b08:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:16:11,509 - INFO - Saving message to DB for chat_id 41cdadaf-104c-4cef-8b49-1a55a39b9b08, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:16:11,513 - INFO - Generated unique_id_with_template: uid_ca456d2389c74681a2fa361e5c1762ff_303a03d76ad3c8b0_1751710571513
2025-07-05 10:16:11,514 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:16:11,515 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:16:11,516 - INFO - Processing query for user_id 1: What is the average time between task creation and due date?
2025-07-05 10:16:11,516 - INFO - Staff ID filter: 
2025-07-05 10:16:11,516 - INFO - Generated unique_id_with_template: uid_ca456d2389c74681a2fa361e5c1762ff_303a03d76ad3c8b0_1751710571513
2025-07-05 10:16:11,516 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:16:11,777 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:16:11,799 - INFO - Intent classification: sql
2025-07-05 10:16:11,814 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:16:12,073 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:16:12,380 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT AVG(TIMESTAMPDIFF(SECOND, created_at, STR_TO_DATE(due_date, '%Y-%m-%d'))) AS avg_duration_seconds
FROM tasks
WHERE owner_id = 1
  AND due_date IS NOT NULL;
2025-07-05 10:16:12,381 - INFO - Raw DB data retrieved: 1 rows
2025-07-05 10:16:12,381 - INFO - Sample data: {'avg_duration_seconds': Decimal('-37064421.7500')}
2025-07-05 10:16:12,382 - INFO - NO TEMPLATE
2025-07-05 10:16:12,382 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:16:12,581 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:16:18,756 - INFO - chat_id_enc 
2025-07-05 10:16:18,989 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:16:19,347 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:16:19,626 - INFO - Created new chat with ID 127 and UUID e65fa849-3a56-4165-be14-10d00faf4ac8 for user 1
2025-07-05 10:16:19,626 - INFO - e65fa849-3a56-4165-be14-10d00faf4ac8
2025-07-05 10:16:19,627 - INFO - Executing chat history query for chat_id e65fa849-3a56-4165-be14-10d00faf4ac8:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:16:19,628 - INFO - Saving message to DB for chat_id e65fa849-3a56-4165-be14-10d00faf4ac8, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:16:19,631 - INFO - Generated unique_id_with_template: uid_070cb54780c24f96850f5d3c51a3e216_6e574846400018cc_1751710579631
2025-07-05 10:16:19,631 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:16:19,632 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:16:19,633 - INFO - Processing query for user_id 1: How does task volume differ between Linear, Trello, and Jira?
2025-07-05 10:16:19,633 - INFO - Staff ID filter: 
2025-07-05 10:16:19,634 - INFO - Generated unique_id_with_template: uid_070cb54780c24f96850f5d3c51a3e216_6e574846400018cc_1751710579631
2025-07-05 10:16:19,634 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:16:19,830 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:16:19,842 - INFO - Intent classification: sql
2025-07-05 10:16:19,858 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:16:20,042 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:16:20,365 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT t.source,
       COUNT(*) AS task_count
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
AND p.owner_id = 1
WHERE t.owner_id = 1
GROUP BY t.source;
2025-07-05 10:16:20,367 - INFO - Raw DB data retrieved: 3 rows
2025-07-05 10:16:20,367 - INFO - Sample data: {'source': 'linear', 'task_count': 152}
2025-07-05 10:16:20,367 - INFO - NO TEMPLATE
2025-07-05 10:16:20,367 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:16:20,622 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:16:27,896 - INFO - chat_id_enc e65fa849-3a56-4165-be14-10d00faf4ac8
2025-07-05 10:16:27,896 - INFO - Executing chat history query for chat_id e65fa849-3a56-4165-be14-10d00faf4ac8:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:16:27,897 - INFO - Saving message to DB for chat_id e65fa849-3a56-4165-be14-10d00faf4ac8, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:16:27,901 - INFO - Generated unique_id_with_template: uid_0aac9ad278fd4c0399845cac80c0f79f_7fd6fea2114391dc_1751710587901
2025-07-05 10:16:27,901 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:16:27,902 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:16:27,902 - INFO - Processing query for user_id 1: in bar chart pls
2025-07-05 10:16:27,902 - INFO - Staff ID filter: 
2025-07-05 10:16:27,903 - INFO - Generated unique_id_with_template: uid_0aac9ad278fd4c0399845cac80c0f79f_7fd6fea2114391dc_1751710587901
2025-07-05 10:16:27,903 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:16:28,109 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:16:28,120 - INFO - Intent classification: sql
2025-07-05 10:16:28,134 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:16:28,334 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:16:28,709 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.source AS platform,
       COUNT(t.id) AS task_count
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
AND p.owner_id = 1
WHERE t.owner_id = 1
GROUP BY p.source;
2025-07-05 10:16:28,710 - INFO - Raw DB data retrieved: 3 rows
2025-07-05 10:16:28,710 - INFO - Sample data: {'platform': None, 'task_count': 155}
2025-07-05 10:16:28,711 - INFO - NO TEMPLATE
2025-07-05 10:16:28,711 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:16:28,910 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:16:33,976 - INFO - chat_id_enc e65fa849-3a56-4165-be14-10d00faf4ac8
2025-07-05 10:16:33,976 - INFO - Executing chat history query for chat_id e65fa849-3a56-4165-be14-10d00faf4ac8:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:16:33,978 - INFO - Saving message to DB for chat_id e65fa849-3a56-4165-be14-10d00faf4ac8, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:16:33,981 - INFO - Generated unique_id_with_template: uid_33dd3ecbca1e44cc81b6c53f6817d677_9abb853f48f05674_1751710593981
2025-07-05 10:16:33,981 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:16:33,982 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:16:33,983 - INFO - Processing query for user_id 1: yes
2025-07-05 10:16:33,983 - INFO - Staff ID filter: 
2025-07-05 10:16:33,983 - INFO - Generated unique_id_with_template: uid_33dd3ecbca1e44cc81b6c53f6817d677_9abb853f48f05674_1751710593981
2025-07-05 10:16:33,983 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:16:34,159 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:16:34,173 - INFO - Intent classification: chat
2025-07-05 10:16:34,173 - INFO - NO TEMPLATE
2025-07-05 10:16:34,173 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:16:34,455 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:19:55,392 - INFO - Client disconnected from WebSocket
2025-07-05 10:20:04,419 - INFO - chat_id_enc 
2025-07-05 10:20:04,725 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:20:05,034 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:20:05,144 - INFO - Created new chat with ID 128 and UUID ead53426-be32-4931-a33f-8d9c524addd0 for user 1
2025-07-05 10:20:05,144 - INFO - ead53426-be32-4931-a33f-8d9c524addd0
2025-07-05 10:20:05,146 - INFO - Executing chat history query for chat_id ead53426-be32-4931-a33f-8d9c524addd0:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:20:05,149 - INFO - Saving message to DB for chat_id ead53426-be32-4931-a33f-8d9c524addd0, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:20:05,157 - INFO - Generated unique_id_with_template: uid_cc3ad46b9dba4d1e88b91fba859ac8cc_f367c4ed18138a65_1751710805156
2025-07-05 10:20:05,160 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:20:05,163 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:20:05,165 - INFO - Processing query for user_id 1: Which team has the highest number of tasks stuck in 'in-progress'?
2025-07-05 10:20:05,165 - INFO - Staff ID filter: 
2025-07-05 10:20:05,166 - INFO - Generated unique_id_with_template: uid_cc3ad46b9dba4d1e88b91fba859ac8cc_f367c4ed18138a65_1751710805156
2025-07-05 10:20:05,166 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:20:05,410 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:20:05,435 - INFO - Intent classification: sql
2025-07-05 10:20:05,538 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:20:05,822 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:20:06,398 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT t.team_id,
       tm.name AS team_name,
       COUNT(*) AS in_progress_task_count
FROM tasks t
LEFT JOIN teams tm ON t.team_id = tm.id
AND tm.owner_id = 1
WHERE t.status = 'In Progress'
  AND t.owner_id = 1
GROUP BY t.team_id,
         tm.name
ORDER BY in_progress_task_count DESC
LIMIT 1;
2025-07-05 10:20:06,400 - INFO - Raw DB data retrieved: 1 rows
2025-07-05 10:20:06,400 - INFO - Sample data: {'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'team_name': None, 'in_progress_task_count': 8}
2025-07-05 10:20:06,401 - INFO - NO TEMPLATE
2025-07-05 10:20:06,401 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:20:06,588 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:20:21,722 - INFO - chat_id_enc ead53426-be32-4931-a33f-8d9c524addd0
2025-07-05 10:20:21,723 - INFO - Executing chat history query for chat_id ead53426-be32-4931-a33f-8d9c524addd0:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:20:21,724 - INFO - Saving message to DB for chat_id ead53426-be32-4931-a33f-8d9c524addd0, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:20:21,727 - INFO - Generated unique_id_with_template: uid_16287993422543feac46bd381afab709_1711ae13943765b1_1751710821727
2025-07-05 10:20:21,728 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:20:21,729 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:20:21,729 - INFO - Processing query for user_id 1: give template
2025-07-05 10:20:21,730 - INFO - Staff ID filter: 
2025-07-05 10:20:21,730 - INFO - Generated unique_id_with_template: uid_16287993422543feac46bd381afab709_1711ae13943765b1_1751710821727
2025-07-05 10:20:21,730 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:20:21,949 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:20:21,966 - INFO - Intent classification: chat
2025-07-05 10:20:21,966 - INFO - NO TEMPLATE
2025-07-05 10:20:21,966 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:20:22,155 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:20:28,282 - INFO - chat_id_enc ead53426-be32-4931-a33f-8d9c524addd0
2025-07-05 10:20:28,283 - INFO - Executing chat history query for chat_id ead53426-be32-4931-a33f-8d9c524addd0:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:20:28,284 - INFO - Saving message to DB for chat_id ead53426-be32-4931-a33f-8d9c524addd0, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:20:28,288 - INFO - Generated unique_id_with_template: uid_51c7556923ea46a4a88dbc86d70479ae_63300bd5e04db49a_1751710828287
2025-07-05 10:20:28,288 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:20:28,289 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:20:28,290 - INFO - Processing query for user_id 1: no bar chart
2025-07-05 10:20:28,290 - INFO - Staff ID filter: 
2025-07-05 10:20:28,290 - INFO - Generated unique_id_with_template: uid_51c7556923ea46a4a88dbc86d70479ae_63300bd5e04db49a_1751710828287
2025-07-05 10:20:28,290 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:20:28,547 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:20:28,572 - INFO - Intent classification: chat
2025-07-05 10:20:28,573 - INFO - NO TEMPLATE
2025-07-05 10:20:28,573 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-05 10:20:28,882 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:22:31,398 - INFO - Client disconnected from WebSocket
2025-07-05 10:22:42,115 - INFO - chat_id_enc ead53426-be32-4931-a33f-8d9c524addd0
2025-07-05 10:22:42,116 - INFO - Executing chat history query for chat_id ead53426-be32-4931-a33f-8d9c524addd0:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:22:42,117 - INFO - Saving message to DB for chat_id ead53426-be32-4931-a33f-8d9c524addd0, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:22:42,122 - INFO - Generated unique_id_with_template: uid_b4341a1fb9df4549871e83bd1321cea9_a833762531c908c9_1751710962122
2025-07-05 10:22:42,122 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:22:42,123 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:22:42,125 - INFO - Processing query for user_id 1: template pls
2025-07-05 10:22:42,125 - INFO - Staff ID filter: 
2025-07-05 10:22:42,126 - INFO - Generated unique_id_with_template: uid_b4341a1fb9df4549871e83bd1321cea9_a833762531c908c9_1751710962122
2025-07-05 10:22:42,126 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:22:42,751 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:22:42,790 - INFO - Intent classification: chat
2025-07-05 10:22:42,790 - INFO - Final prompt created with unique_id_with_template: uid_b4341a1fb9df4549871e83bd1321cea9_a833762531c908c9_1751710962122
2025-07-05 10:22:43,188 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:22:47,799 - INFO - chat_id_enc 
2025-07-05 10:22:48,020 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:22:48,271 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:22:48,358 - INFO - Created new chat with ID 129 and UUID 9b475a68-c63c-4641-b701-58bfcb2dff3b for user 1
2025-07-05 10:22:48,359 - INFO - 9b475a68-c63c-4641-b701-58bfcb2dff3b
2025-07-05 10:22:48,360 - INFO - Executing chat history query for chat_id 9b475a68-c63c-4641-b701-58bfcb2dff3b:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:22:48,361 - INFO - Saving message to DB for chat_id 9b475a68-c63c-4641-b701-58bfcb2dff3b, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:22:48,365 - INFO - Generated unique_id_with_template: uid_4a9c178e76dc4f6897305a21cf228796_767baf83aac9b728_1751710968365
2025-07-05 10:22:48,366 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:22:48,367 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:22:48,368 - INFO - Processing query for user_id 1: Which project has the highest estimated workload?
2025-07-05 10:22:48,368 - INFO - Staff ID filter: 
2025-07-05 10:22:48,368 - INFO - Generated unique_id_with_template: uid_4a9c178e76dc4f6897305a21cf228796_767baf83aac9b728_1751710968365
2025-07-05 10:22:48,368 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:22:48,570 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:22:48,597 - INFO - Intent classification: sql
2025-07-05 10:22:48,645 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:22:48,895 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:22:49,433 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.id AS project_id,
       p.name AS project_name,
       SUM(t.estimate) AS total_estimated_workload
FROM projects p
LEFT JOIN tasks t ON p.id = t.project_id
AND t.owner_id = 1
WHERE p.owner_id = 1
GROUP BY p.id,
         p.name
ORDER BY total_estimated_workload DESC
LIMIT 1;
2025-07-05 10:22:49,435 - INFO - Raw DB data retrieved: 1 rows
2025-07-05 10:22:49,435 - INFO - Sample data: {'project_id': 66, 'project_name': "Barber's update", 'total_estimated_workload': 75.0}
2025-07-05 10:22:49,436 - INFO - Final prompt created with unique_id_with_template: uid_4a9c178e76dc4f6897305a21cf228796_767baf83aac9b728_1751710968365
2025-07-05 10:22:50,130 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:30:57,439 - INFO - chat_id_enc 
2025-07-05 10:30:57,677 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:30:58,107 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:30:58,308 - INFO - Created new chat with ID 130 and UUID c6fbcd7a-dd33-4083-b818-d3fbbb65b0be for user 1
2025-07-05 10:30:58,309 - INFO - c6fbcd7a-dd33-4083-b818-d3fbbb65b0be
2025-07-05 10:30:58,311 - INFO - Executing chat history query for chat_id c6fbcd7a-dd33-4083-b818-d3fbbb65b0be:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:30:58,313 - INFO - Saving message to DB for chat_id c6fbcd7a-dd33-4083-b818-d3fbbb65b0be, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:30:58,323 - INFO - Generated unique_id_with_template: uid_8f9772e9601b4b57a11d2a379caf2c9d_e1568b817da76d90_1751711458323
2025-07-05 10:30:58,324 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:30:58,327 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:30:58,330 - INFO - Processing query for user_id 1: Which platform (Linear, Trello, Jira) has the highest task completion rate?
2025-07-05 10:30:58,330 - INFO - Staff ID filter: 
2025-07-05 10:30:58,330 - INFO - Generated unique_id_with_template: uid_8f9772e9601b4b57a11d2a379caf2c9d_e1568b817da76d90_1751711458323
2025-07-05 10:30:58,330 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:30:58,538 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:30:58,553 - INFO - Intent classification: sql
2025-07-05 10:30:58,575 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:30:59,541 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:31:00,588 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT s.source AS platform,
       COUNT(CASE
                 WHEN t.status = 'Done' THEN 1
             END) AS completed_tasks,
       COUNT(*) AS total_tasks,
       (COUNT(CASE
                  WHEN t.status = 'Done' THEN 1
              END) / COUNT(*)) * 100 AS completion_rate_percentage
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
AND p.owner_id = 1
LEFT JOIN
  (SELECT 'linear' AS SOURCE
   UNION ALL SELECT 'trello'
   UNION ALL SELECT 'jira') s ON t.source = s.source
WHERE t.owner_id = 1
GROUP BY s.source
ORDER BY completion_rate_percentage DESC
LIMIT 1;
2025-07-05 10:31:00,591 - INFO - Raw DB data retrieved: 1 rows
2025-07-05 10:31:00,592 - INFO - Sample data: {'platform': 'trello', 'completed_tasks': 42, 'total_tasks': 133, 'completion_rate_percentage': Decimal('31.5789')}
2025-07-05 10:31:00,592 - INFO - Final prompt created with unique_id_with_template: uid_8f9772e9601b4b57a11d2a379caf2c9d_e1568b817da76d90_1751711458323
2025-07-05 10:31:00,810 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:31:45,819 - INFO - chat_id_enc c6fbcd7a-dd33-4083-b818-d3fbbb65b0be
2025-07-05 10:31:45,820 - INFO - Executing chat history query for chat_id c6fbcd7a-dd33-4083-b818-d3fbbb65b0be:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:31:45,821 - INFO - Saving message to DB for chat_id c6fbcd7a-dd33-4083-b818-d3fbbb65b0be, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:31:45,825 - INFO - Generated unique_id_with_template: uid_5188cb148aa64e6a8b768f743f04d499_5904dc3c189ee0b0_1751711505825
2025-07-05 10:31:45,826 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:31:45,827 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:31:45,827 - INFO - Processing query for user_id 1: What’s the average priority level of tasks in each project?
2025-07-05 10:31:45,828 - INFO - Staff ID filter: 
2025-07-05 10:31:45,828 - INFO - Generated unique_id_with_template: uid_5188cb148aa64e6a8b768f743f04d499_5904dc3c189ee0b0_1751711505825
2025-07-05 10:31:45,828 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:31:46,217 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:31:46,238 - INFO - Intent classification: sql
2025-07-05 10:31:46,259 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:31:47,316 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:31:48,085 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.name AS project_name,
       AVG(CASE
               WHEN t.priority IS NOT NULL THEN CASE
                                                    WHEN t.priority LIKE '%High%' THEN 3
                                                    WHEN t.priority LIKE '%Medium%' THEN 2
                                                    WHEN t.priority LIKE '%Low%' THEN 1
                                                    ELSE 0
                                                END
           END) AS average_priority_level
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
AND p.owner_id = 1
WHERE t.owner_id = 1
GROUP BY p.name;
2025-07-05 10:31:48,088 - INFO - Raw DB data retrieved: 8 rows
2025-07-05 10:31:48,088 - INFO - Sample data: {'project_name': None, 'average_priority_level': Decimal('0.0877')}
2025-07-05 10:31:48,089 - INFO - Final prompt created with unique_id_with_template: uid_5188cb148aa64e6a8b768f743f04d499_5904dc3c189ee0b0_1751711505825
2025-07-05 10:31:48,499 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:31:53,588 - INFO - chat_id_enc 
2025-07-05 10:31:53,835 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:31:54,081 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:31:54,170 - INFO - Created new chat with ID 131 and UUID 4089982c-e59c-4f8c-ae62-8517525d7c79 for user 1
2025-07-05 10:31:54,170 - INFO - 4089982c-e59c-4f8c-ae62-8517525d7c79
2025-07-05 10:31:54,175 - INFO - Executing chat history query for chat_id 4089982c-e59c-4f8c-ae62-8517525d7c79:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:31:54,179 - INFO - Saving message to DB for chat_id 4089982c-e59c-4f8c-ae62-8517525d7c79, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:31:54,202 - INFO - Generated unique_id_with_template: uid_92d8b0db8b92475480be9917b905529c_c41502e82bbe68a8_1751711514202
2025-07-05 10:31:54,203 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:31:54,204 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:31:54,206 - INFO - Processing query for user_id 1: Which platform has the most overdue tasks?
2025-07-05 10:31:54,206 - INFO - Staff ID filter: 
2025-07-05 10:31:54,206 - INFO - Generated unique_id_with_template: uid_92d8b0db8b92475480be9917b905529c_c41502e82bbe68a8_1751711514202
2025-07-05 10:31:54,206 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:31:54,559 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:31:54,575 - INFO - Intent classification: sql
2025-07-05 10:31:54,595 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:31:54,794 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:31:55,409 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.name AS platform_name,
       COUNT(t.id) AS overdue_tasks_count
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
AND p.owner_id = 1
WHERE t.owner_id = 1
  AND t.due_date IS NOT NULL
  AND STR_TO_DATE(t.due_date, '%Y-%m-%d') < CURDATE()
GROUP BY platform_name
ORDER BY overdue_tasks_count DESC
LIMIT 1;
2025-07-05 10:31:55,412 - INFO - Raw DB data retrieved: 1 rows
2025-07-05 10:31:55,413 - INFO - Sample data: {'platform_name': 'Review', 'overdue_tasks_count': 4}
2025-07-05 10:31:55,413 - INFO - Final prompt created with unique_id_with_template: uid_92d8b0db8b92475480be9917b905529c_c41502e82bbe68a8_1751711514202
2025-07-05 10:31:55,629 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:32:05,468 - INFO - chat_id_enc 4089982c-e59c-4f8c-ae62-8517525d7c79
2025-07-05 10:32:05,469 - INFO - Executing chat history query for chat_id 4089982c-e59c-4f8c-ae62-8517525d7c79:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:32:05,470 - INFO - Saving message to DB for chat_id 4089982c-e59c-4f8c-ae62-8517525d7c79, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:32:05,478 - INFO - Generated unique_id_with_template: uid_c871cb0c9e9e471e9e81ae1a83dc03bb_1657f699752e3d68_1751711525478
2025-07-05 10:32:05,479 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:32:05,480 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:32:05,481 - INFO - Processing query for user_id 1: Which project has the most deleted tasks?
2025-07-05 10:32:05,482 - INFO - Staff ID filter: 
2025-07-05 10:32:05,482 - INFO - Generated unique_id_with_template: uid_c871cb0c9e9e471e9e81ae1a83dc03bb_1657f699752e3d68_1751711525478
2025-07-05 10:32:05,482 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:32:05,676 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:32:05,690 - INFO - Intent classification: sql
2025-07-05 10:32:05,714 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:32:05,916 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:32:06,301 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.name AS project_name,
       COUNT(*) AS deleted_tasks_count
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
AND p.owner_id = 1
WHERE t.is_deleted = 1
  AND t.owner_id = 1
GROUP BY p.name
ORDER BY deleted_tasks_count DESC
LIMIT 1;
2025-07-05 10:32:06,303 - INFO - Raw DB data retrieved: 0 rows
2025-07-05 10:32:06,304 - WARNING - No data returned from SQL query
2025-07-05 10:32:06,304 - INFO - Final prompt created with unique_id_with_template: uid_c871cb0c9e9e471e9e81ae1a83dc03bb_1657f699752e3d68_1751711525478
2025-07-05 10:32:06,548 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:32:22,416 - INFO - chat_id_enc 
2025-07-05 10:32:22,629 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:32:22,883 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:32:22,994 - INFO - Created new chat with ID 132 and UUID f0266bde-07a9-4a9d-bc82-c46a0e0a163a for user 1
2025-07-05 10:32:22,995 - INFO - f0266bde-07a9-4a9d-bc82-c46a0e0a163a
2025-07-05 10:32:22,997 - INFO - Executing chat history query for chat_id f0266bde-07a9-4a9d-bc82-c46a0e0a163a:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:32:22,998 - INFO - Saving message to DB for chat_id f0266bde-07a9-4a9d-bc82-c46a0e0a163a, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:32:23,007 - INFO - Generated unique_id_with_template: uid_8a66e743911441e695854c94da73e158_445ee6093e9a93da_1751711543007
2025-07-05 10:32:23,008 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:32:23,009 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:32:23,010 - INFO - Processing query for user_id 1: What is the average time between task creation and due date?
2025-07-05 10:32:23,011 - INFO - Staff ID filter: 
2025-07-05 10:32:23,011 - INFO - Generated unique_id_with_template: uid_8a66e743911441e695854c94da73e158_445ee6093e9a93da_1751711543007
2025-07-05 10:32:23,011 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:32:23,427 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:32:23,451 - INFO - Intent classification: sql
2025-07-05 10:32:23,481 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:32:23,665 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:32:24,079 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT AVG(TIMESTAMPDIFF(SECOND, created_at, STR_TO_DATE(due_date, '%Y-%m-%d'))) AS avg_time_seconds
FROM tasks
WHERE owner_id = 1
  AND due_date IS NOT NULL;
2025-07-05 10:32:24,081 - INFO - Raw DB data retrieved: 1 rows
2025-07-05 10:32:24,081 - INFO - Sample data: {'avg_time_seconds': Decimal('-37064421.7500')}
2025-07-05 10:32:24,081 - INFO - Final prompt created with unique_id_with_template: uid_8a66e743911441e695854c94da73e158_445ee6093e9a93da_1751711543007
2025-07-05 10:32:24,346 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:32:59,783 - INFO - chat_id_enc 
2025-07-05 10:33:00,016 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:33:00,222 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:33:00,308 - INFO - Created new chat with ID 133 and UUID a75f48d8-52ce-43ed-90d2-81a6684594f9 for user 1
2025-07-05 10:33:00,308 - INFO - a75f48d8-52ce-43ed-90d2-81a6684594f9
2025-07-05 10:33:00,310 - INFO - Executing chat history query for chat_id a75f48d8-52ce-43ed-90d2-81a6684594f9:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:33:00,312 - INFO - Saving message to DB for chat_id a75f48d8-52ce-43ed-90d2-81a6684594f9, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:33:00,316 - INFO - Generated unique_id_with_template: uid_473760a218474f5f96ac0320316db21b_e0b8167e55f71f07_1751711580316
2025-07-05 10:33:00,317 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:33:00,318 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:33:00,319 - INFO - Processing query for user_id 1: What is the average time between all linked apps?
2025-07-05 10:33:00,319 - INFO - Staff ID filter: 
2025-07-05 10:33:00,319 - INFO - Generated unique_id_with_template: uid_473760a218474f5f96ac0320316db21b_e0b8167e55f71f07_1751711580316
2025-07-05 10:33:00,319 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:33:00,589 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:33:00,610 - INFO - Intent classification: sql
2025-07-05 10:33:00,637 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:33:00,879 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:33:01,614 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT AVG(TIMESTAMPDIFF(SECOND, linked.created_at, tasks.created_at)) AS average_time_seconds
FROM linked
LEFT JOIN tasks ON linked.userid = tasks.owner_id
WHERE linked.owner_id = 1
  AND tasks.owner_id = 1
  AND linked.type IN ('linear',
                      'trello',
                      'jira')
  AND tasks.source = linked.type
  AND tasks.created_at IS NOT NULL
  AND linked.created_at IS NOT NULL;
2025-07-05 10:33:01,617 - INFO - Raw DB data retrieved: 1 rows
2025-07-05 10:33:01,617 - INFO - Sample data: {'average_time_seconds': None}
2025-07-05 10:33:01,618 - INFO - Final prompt created with unique_id_with_template: uid_473760a218474f5f96ac0320316db21b_e0b8167e55f71f07_1751711580316
2025-07-05 10:33:01,956 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:33:17,527 - INFO - chat_id_enc 
2025-07-05 10:33:20,173 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:33:20,653 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:33:20,732 - INFO - Created new chat with ID 134 and UUID 52363cb2-48e7-48a6-9d5b-c9a06936279d for user 1
2025-07-05 10:33:20,733 - INFO - 52363cb2-48e7-48a6-9d5b-c9a06936279d
2025-07-05 10:33:20,733 - INFO - Executing chat history query for chat_id 52363cb2-48e7-48a6-9d5b-c9a06936279d:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:33:20,735 - INFO - Saving message to DB for chat_id 52363cb2-48e7-48a6-9d5b-c9a06936279d, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:33:20,739 - INFO - Generated unique_id_with_template: uid_9732fa0ce5eb478680de11925207249d_b49439e232228466_1751711600739
2025-07-05 10:33:20,739 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:33:20,740 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:33:20,741 - INFO - Processing query for user_id 1: What is the average time between all tasks?
2025-07-05 10:33:20,741 - INFO - Staff ID filter: 
2025-07-05 10:33:20,741 - INFO - Generated unique_id_with_template: uid_9732fa0ce5eb478680de11925207249d_b49439e232228466_1751711600739
2025-07-05 10:33:20,741 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:33:20,921 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:33:20,937 - INFO - Intent classification: sql
2025-07-05 10:33:20,953 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:33:21,193 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:33:21,405 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT AVG(TIMESTAMPDIFF(SECOND, created_at, updated_at)) AS average_time_seconds
FROM tasks
WHERE owner_id = 1;
2025-07-05 10:33:21,406 - INFO - Raw DB data retrieved: 1 rows
2025-07-05 10:33:21,407 - INFO - Sample data: {'average_time_seconds': Decimal('13420834.8000')}
2025-07-05 10:33:21,407 - INFO - Final prompt created with unique_id_with_template: uid_9732fa0ce5eb478680de11925207249d_b49439e232228466_1751711600739
2025-07-05 10:33:21,615 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:34:56,510 - INFO - chat_id_enc 
2025-07-05 10:34:56,752 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:34:57,031 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:34:57,143 - INFO - Created new chat with ID 135 and UUID 2d42e711-48f8-4389-bbd2-3a57fe9f0b44 for user 1
2025-07-05 10:34:57,144 - INFO - 2d42e711-48f8-4389-bbd2-3a57fe9f0b44
2025-07-05 10:34:57,145 - INFO - Executing chat history query for chat_id 2d42e711-48f8-4389-bbd2-3a57fe9f0b44:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:34:57,146 - INFO - Saving message to DB for chat_id 2d42e711-48f8-4389-bbd2-3a57fe9f0b44, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:34:57,150 - INFO - Generated unique_id_with_template: uid_c74e935502c34b5584d4354c551423e6_efa6281f8acc7da9_1751711697150
2025-07-05 10:34:57,150 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:34:57,151 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:34:57,152 - INFO - Processing query for user_id 1: Which user has the most tasks completed this month?
2025-07-05 10:34:57,152 - INFO - Staff ID filter: 
2025-07-05 10:34:57,152 - INFO - Generated unique_id_with_template: uid_c74e935502c34b5584d4354c551423e6_efa6281f8acc7da9_1751711697150
2025-07-05 10:34:57,153 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:34:57,338 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:34:57,353 - INFO - Intent classification: sql
2025-07-05 10:34:57,371 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:34:57,601 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:34:58,483 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT pu.full_name AS user_name,
       COUNT(t.id) AS tasks_completed
FROM tasks t
JOIN platform_users pu ON t.user_id = pu.id
WHERE t.status = 'Done'
  AND t.owner_id = 1
  AND t.updated_at >= DATE_FORMAT(CURRENT_DATE - INTERVAL DAY(CURRENT_DATE)-1 DAY, '%Y-%m-%d')
  AND t.updated_at < DATE_FORMAT(CURRENT_DATE + INTERVAL 1 MONTH - INTERVAL DAY(CURRENT_DATE)-1 DAY, '%Y-%m-%d')
GROUP BY pu.full_name
ORDER BY tasks_completed DESC
LIMIT 1;
2025-07-05 10:34:58,485 - INFO - Raw DB data retrieved: 0 rows
2025-07-05 10:34:58,485 - WARNING - No data returned from SQL query
2025-07-05 10:34:58,485 - INFO - Final prompt created with unique_id_with_template: uid_c74e935502c34b5584d4354c551423e6_efa6281f8acc7da9_1751711697150
2025-07-05 10:34:58,742 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:35:01,522 - INFO - chat_id_enc 2d42e711-48f8-4389-bbd2-3a57fe9f0b44
2025-07-05 10:35:01,524 - INFO - Executing chat history query for chat_id 2d42e711-48f8-4389-bbd2-3a57fe9f0b44:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:35:01,526 - INFO - Saving message to DB for chat_id 2d42e711-48f8-4389-bbd2-3a57fe9f0b44, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:35:01,534 - INFO - Generated unique_id_with_template: uid_e8d29b4901b34169a1e6643659962e2b_4f65d823a188505a_1751711701534
2025-07-05 10:35:01,537 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:35:01,539 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:35:01,547 - INFO - Processing query for user_id 1: How many tasks are missing due dates?
2025-07-05 10:35:01,547 - INFO - Staff ID filter: 
2025-07-05 10:35:01,547 - INFO - Generated unique_id_with_template: uid_e8d29b4901b34169a1e6643659962e2b_4f65d823a188505a_1751711701534
2025-07-05 10:35:01,547 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:35:01,877 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:35:01,910 - INFO - Intent classification: sql
2025-07-05 10:35:01,975 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:35:02,214 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:35:02,430 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT COUNT(*) AS missing_due_dates_count
FROM tasks
WHERE owner_id = 1
  AND (due_date IS NULL
       OR TRIM(due_date) = '')
2025-07-05 10:35:02,444 - INFO - Raw DB data retrieved: 1 rows
2025-07-05 10:35:02,445 - INFO - Sample data: {'missing_due_dates_count': 282}
2025-07-05 10:35:02,445 - INFO - Final prompt created with unique_id_with_template: uid_e8d29b4901b34169a1e6643659962e2b_4f65d823a188505a_1751711701534
2025-07-05 10:35:02,820 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:39:05,065 - INFO - Client disconnected from WebSocket
2025-07-05 10:39:30,159 - INFO - Client disconnected from WebSocket
2025-07-05 10:39:35,807 - INFO - chat_id_enc 2d42e711-48f8-4389-bbd2-3a57fe9f0b44
2025-07-05 10:39:35,809 - INFO - Executing chat history query for chat_id 2d42e711-48f8-4389-bbd2-3a57fe9f0b44:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:39:35,810 - INFO - Saving message to DB for chat_id 2d42e711-48f8-4389-bbd2-3a57fe9f0b44, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:39:35,814 - INFO - Generated unique_id_with_template: uid_6cc4705acbdb4afa812505abd296c34f_86394a0e8cbdd5f6_1751711975814
2025-07-05 10:39:35,814 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:39:35,815 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:39:35,816 - INFO - Processing query for user_id 1: pie chart of iot
2025-07-05 10:39:35,816 - INFO - Staff ID filter: 
2025-07-05 10:39:35,816 - INFO - Generated unique_id_with_template: uid_6cc4705acbdb4afa812505abd296c34f_86394a0e8cbdd5f6_1751711975814
2025-07-05 10:39:35,816 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:39:36,121 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:39:36,140 - INFO - Intent classification: sql
2025-07-05 10:39:36,158 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:39:36,417 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:39:36,714 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT status,
       COUNT(*) AS task_count
FROM tasks
WHERE owner_id = 1
  AND SOURCE = 'linear'
GROUP BY status;
2025-07-05 10:39:36,716 - INFO - Raw DB data retrieved: 6 rows
2025-07-05 10:39:36,716 - INFO - Sample data: {'status': 'Backlog', 'task_count': 32}
2025-07-05 10:39:36,717 - INFO - Final prompt created with unique_id_with_template: uid_6cc4705acbdb4afa812505abd296c34f_86394a0e8cbdd5f6_1751711975814
2025-07-05 10:39:36,986 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:39:43,041 - INFO - chat_id_enc 
2025-07-05 10:39:43,226 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:39:43,453 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:39:43,565 - INFO - Created new chat with ID 136 and UUID 1cbb77e0-38cf-4864-931c-ff7eb3373c4a for user 1
2025-07-05 10:39:43,566 - INFO - 1cbb77e0-38cf-4864-931c-ff7eb3373c4a
2025-07-05 10:39:43,566 - INFO - Executing chat history query for chat_id 1cbb77e0-38cf-4864-931c-ff7eb3373c4a:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:39:43,567 - INFO - Saving message to DB for chat_id 1cbb77e0-38cf-4864-931c-ff7eb3373c4a, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:39:43,572 - INFO - Generated unique_id_with_template: uid_b6f380624404492594a2b190c0df24e1_38c3d252ac57f848_1751711983572
2025-07-05 10:39:43,572 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:39:43,573 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:39:43,574 - INFO - Processing query for user_id 1: What’s the average task estimate per platform?
2025-07-05 10:39:43,574 - INFO - Staff ID filter: 
2025-07-05 10:39:43,574 - INFO - Generated unique_id_with_template: uid_b6f380624404492594a2b190c0df24e1_38c3d252ac57f848_1751711983572
2025-07-05 10:39:43,574 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:39:43,739 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:39:43,756 - INFO - Intent classification: sql
2025-07-05 10:39:43,775 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:39:44,012 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:39:44,264 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT platform_id,
       AVG(estimate) AS average_task_estimate
FROM tasks
WHERE owner_id = 1
GROUP BY platform_id;
2025-07-05 10:39:44,266 - INFO - Raw DB data retrieved: 4 rows
2025-07-05 10:39:44,266 - INFO - Sample data: {'platform_id': '1', 'average_task_estimate': 4.967105263157895}
2025-07-05 10:39:44,266 - INFO - Final prompt created with unique_id_with_template: uid_b6f380624404492594a2b190c0df24e1_38c3d252ac57f848_1751711983572
2025-07-05 10:39:44,465 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:39:54,842 - INFO - chat_id_enc 1cbb77e0-38cf-4864-931c-ff7eb3373c4a
2025-07-05 10:39:54,843 - INFO - Executing chat history query for chat_id 1cbb77e0-38cf-4864-931c-ff7eb3373c4a:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:39:54,844 - INFO - Saving message to DB for chat_id 1cbb77e0-38cf-4864-931c-ff7eb3373c4a, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:39:54,848 - INFO - Generated unique_id_with_template: uid_c72536d15e574077a59c6b5c74df2010_0da1bbf1ea71cb61_1751711994848
2025-07-05 10:39:54,849 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:39:54,850 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:39:54,851 - INFO - Processing query for user_id 1: Are there tasks linked to non-existent or deleted projects?
2025-07-05 10:39:54,851 - INFO - Staff ID filter: 
2025-07-05 10:39:54,851 - INFO - Generated unique_id_with_template: uid_c72536d15e574077a59c6b5c74df2010_0da1bbf1ea71cb61_1751711994848
2025-07-05 10:39:54,851 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:39:55,229 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:39:55,252 - INFO - Intent classification: sql
2025-07-05 10:39:55,286 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:39:55,541 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:39:56,193 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT t.id,
       t.title,
       t.status,
       t.project_id,
       p.name AS project_name
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
AND p.owner_id = 1
WHERE t.owner_id = 1
  AND (p.id IS NULL
       OR p.id = ''
       OR p.is_deleted = 1)
2025-07-05 10:39:56,194 - ERROR - SQL Query Error for user_id 1: (1054, "Unknown column 'p.is_deleted' in 'where clause'")
2025-07-05 10:39:56,195 - INFO - Final prompt created with unique_id_with_template: uid_c72536d15e574077a59c6b5c74df2010_0da1bbf1ea71cb61_1751711994848
2025-07-05 10:39:56,400 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:40:00,348 - INFO - chat_id_enc 
2025-07-05 10:40:00,599 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:40:00,848 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:40:00,919 - INFO - Created new chat with ID 137 and UUID f8ef278a-5bf2-4039-8543-37f70452ed99 for user 1
2025-07-05 10:40:00,920 - INFO - f8ef278a-5bf2-4039-8543-37f70452ed99
2025-07-05 10:40:00,921 - INFO - Executing chat history query for chat_id f8ef278a-5bf2-4039-8543-37f70452ed99:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:40:00,922 - INFO - Saving message to DB for chat_id f8ef278a-5bf2-4039-8543-37f70452ed99, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:40:00,925 - INFO - Generated unique_id_with_template: uid_26ba7b1d73be4a75964964c55e344afc_3b11499961291039_1751712000925
2025-07-05 10:40:00,926 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:40:00,926 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:40:00,927 - INFO - Processing query for user_id 1: Which label appears most frequently in overdue tasks?
2025-07-05 10:40:00,927 - INFO - Staff ID filter: 
2025-07-05 10:40:00,928 - INFO - Generated unique_id_with_template: uid_26ba7b1d73be4a75964964c55e344afc_3b11499961291039_1751712000925
2025-07-05 10:40:00,928 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:40:01,121 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:40:01,143 - INFO - Intent classification: sql
2025-07-05 10:40:01,171 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:40:01,418 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:40:02,419 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT labels AS label,
       COUNT(*) AS frequency
FROM tasks
WHERE owner_id = 1
  AND status != 'Done'
  AND due_date IS NOT NULL
  AND STR_TO_DATE(due_date, '%Y-%m-%d') < CURDATE()
  AND labels IS NOT NULL
  AND labels != '[]'
GROUP BY labels
ORDER BY frequency DESC
LIMIT 1;
2025-07-05 10:40:02,438 - INFO - Raw DB data retrieved: 1 rows
2025-07-05 10:40:02,438 - INFO - Sample data: {'label': '[]', 'frequency': 4}
2025-07-05 10:40:02,438 - INFO - Final prompt created with unique_id_with_template: uid_26ba7b1d73be4a75964964c55e344afc_3b11499961291039_1751712000925
2025-07-05 10:40:02,788 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:40:38,925 - INFO - Client disconnected from WebSocket
2025-07-05 10:40:45,237 - INFO - chat_id_enc 
2025-07-05 10:40:45,578 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:40:45,976 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:40:46,111 - INFO - Created new chat with ID 138 and UUID 82b218bb-2593-451a-aa7c-0bec23160f5b for user 1
2025-07-05 10:40:46,112 - INFO - 82b218bb-2593-451a-aa7c-0bec23160f5b
2025-07-05 10:40:46,113 - INFO - Executing chat history query for chat_id 82b218bb-2593-451a-aa7c-0bec23160f5b:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:40:46,115 - INFO - Saving message to DB for chat_id 82b218bb-2593-451a-aa7c-0bec23160f5b, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:40:46,119 - INFO - Generated unique_id_with_template: uid_4c644cef023b4f8a82f65e31058f3a95_aa7fc20255a7bd13_1751712046119
2025-07-05 10:40:46,120 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:40:46,122 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:40:46,123 - INFO - Processing query for user_id 1: What’s the ratio of completed to total tasks per project?
2025-07-05 10:40:46,123 - INFO - Staff ID filter: 
2025-07-05 10:40:46,123 - INFO - Generated unique_id_with_template: uid_4c644cef023b4f8a82f65e31058f3a95_aa7fc20255a7bd13_1751712046119
2025-07-05 10:40:46,123 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:40:46,571 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:40:46,604 - INFO - Intent classification: sql
2025-07-05 10:40:46,647 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:40:47,071 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:40:47,729 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.name AS project_name,
       COUNT(t.id) AS total_tasks,
       SUM(CASE
               WHEN t.status = 'Done' THEN 1
               ELSE 0
           END) AS completed_tasks,
       (SUM(CASE
                WHEN t.status = 'Done' THEN 1
                ELSE 0
            END) / COUNT(t.id)) AS completion_ratio
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
WHERE t.owner_id = 1
GROUP BY p.name
2025-07-05 10:40:47,734 - INFO - Raw DB data retrieved: 11 rows
2025-07-05 10:40:47,734 - INFO - Sample data: {'project_name': None, 'total_tasks': 142, 'completed_tasks': Decimal('18'), 'completion_ratio': Decimal('0.1268')}
2025-07-05 10:40:47,734 - INFO - Final prompt created with unique_id_with_template: uid_4c644cef023b4f8a82f65e31058f3a95_aa7fc20255a7bd13_1751712046119
2025-07-05 10:40:48,118 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:42:08,694 - INFO - Client disconnected from WebSocket
2025-07-05 10:42:41,467 - INFO - chat_id_enc 82b218bb-2593-451a-aa7c-0bec23160f5b
2025-07-05 10:42:41,468 - INFO - Executing chat history query for chat_id 82b218bb-2593-451a-aa7c-0bec23160f5b:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:42:41,470 - INFO - Saving message to DB for chat_id 82b218bb-2593-451a-aa7c-0bec23160f5b, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:42:41,473 - INFO - Generated unique_id_with_template: uid_fbf9f020f79e4155b9eca7505bca7650_adf2cd608c14082b_1751712161473
2025-07-05 10:42:41,474 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:42:41,474 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:42:41,475 - INFO - Processing query for user_id 1: Which tasks have not been updated in over 30 days?
2025-07-05 10:42:41,475 - INFO - Staff ID filter: 
2025-07-05 10:42:41,475 - INFO - Generated unique_id_with_template: uid_fbf9f020f79e4155b9eca7505bca7650_adf2cd608c14082b_1751712161473
2025-07-05 10:42:41,475 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:42:41,764 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:42:41,783 - INFO - Intent classification: sql
2025-07-05 10:42:41,811 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:42:42,557 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:42:42,728 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT *
FROM tasks
WHERE DATEDIFF(CURDATE(), updated_at) > 30
  AND owner_id = 1;
2025-07-05 10:42:42,738 - INFO - Raw DB data retrieved: 116 rows
2025-07-05 10:42:42,738 - INFO - Sample data: {'id': 315, 'project_id': '5f3ba24b5b55dd5de59c2841', 'team_id': '-', 'platform_id': '15', 'parent_id': '5f3ba41cfea3ac17c5392ecf', 'user_id': '58fa0f7d251eaa6fb7b22b34', 'title': 'Admin should set time to barb one person', 'description': 'The admin should be able to set and adjust the appropriate time it will take to complete a service on one person (male, female and children)', 'status': 'To Do', 'priority': None, 'labels': '[]', 'estimate': -803.92, 'due_date': '2023-04-11 23:26:00', 'source': 'trello', 'last_synced_at': datetime.datetime(2025, 6, 23, 21, 31, 11), 'is_deleted': None, 'created_at': datetime.datetime(2020, 8, 18, 10, 49, 16), 'checklists': '[]', 'updated_at': datetime.datetime(2025, 5, 9, 12, 7, 3), 'owner_id': 1}
2025-07-05 10:42:42,746 - INFO - Final prompt created with unique_id_with_template: uid_fbf9f020f79e4155b9eca7505bca7650_adf2cd608c14082b_1751712161473
2025-07-05 10:42:42,879 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-07-05 10:42:42,880 - ERROR - Streaming error: Error code: 400 - {'error': {'message': "This model's maximum context length is 16385 tokens. However, your messages resulted in 36196 tokens. Please reduce the length of the messages.", 'type': 'invalid_request_error', 'param': 'messages', 'code': 'context_length_exceeded'}}
2025-07-05 10:43:27,142 - INFO - Client disconnected from WebSocket
2025-07-05 10:43:37,466 - INFO - chat_id_enc 
2025-07-05 10:43:37,689 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:43:38,050 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:43:38,254 - INFO - Created new chat with ID 139 and UUID 97762b3b-6e06-4e0e-85d5-c4b2bd8f2018 for user 1
2025-07-05 10:43:38,254 - INFO - 97762b3b-6e06-4e0e-85d5-c4b2bd8f2018
2025-07-05 10:43:38,255 - INFO - Executing chat history query for chat_id 97762b3b-6e06-4e0e-85d5-c4b2bd8f2018:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:43:38,256 - INFO - Saving message to DB for chat_id 97762b3b-6e06-4e0e-85d5-c4b2bd8f2018, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:43:38,259 - INFO - Generated unique_id_with_template: uid_55881a8de75b45d3ad58a228582077f1_868368fe34225566_1751712218259
2025-07-05 10:43:38,259 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:43:38,260 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:43:38,261 - INFO - Processing query for user_id 1: How many tasks have no status assigned?
2025-07-05 10:43:38,261 - INFO - Staff ID filter: 
2025-07-05 10:43:38,261 - INFO - Generated unique_id_with_template: uid_55881a8de75b45d3ad58a228582077f1_868368fe34225566_1751712218259
2025-07-05 10:43:38,261 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:43:38,629 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:43:38,655 - INFO - Intent classification: sql
2025-07-05 10:43:38,690 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:43:39,185 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:43:39,628 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT COUNT(*) AS no_status_tasks
FROM tasks
WHERE status IS NULL
  AND owner_id = 1;
2025-07-05 10:43:39,629 - INFO - Raw DB data retrieved: 1 rows
2025-07-05 10:43:39,629 - INFO - Sample data: {'no_status_tasks': 0}
2025-07-05 10:43:39,629 - INFO - Final prompt created with unique_id_with_template: uid_55881a8de75b45d3ad58a228582077f1_868368fe34225566_1751712218259
2025-07-05 10:43:39,985 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:43:47,927 - INFO - chat_id_enc 97762b3b-6e06-4e0e-85d5-c4b2bd8f2018
2025-07-05 10:43:47,928 - INFO - Executing chat history query for chat_id 97762b3b-6e06-4e0e-85d5-c4b2bd8f2018:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:43:47,929 - INFO - Saving message to DB for chat_id 97762b3b-6e06-4e0e-85d5-c4b2bd8f2018, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:43:47,934 - INFO - Generated unique_id_with_template: uid_556071543c654d5dad5c9f1b5f3f8042_145c1f2066cf774f_1751712227934
2025-07-05 10:43:47,934 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:43:47,935 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:43:47,937 - INFO - Processing query for user_id 1: How many tasks per project are marked high priority?
2025-07-05 10:43:47,937 - INFO - Staff ID filter: 
2025-07-05 10:43:47,937 - INFO - Generated unique_id_with_template: uid_556071543c654d5dad5c9f1b5f3f8042_145c1f2066cf774f_1751712227934
2025-07-05 10:43:47,937 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:43:48,253 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:43:48,273 - INFO - Intent classification: sql
2025-07-05 10:43:48,291 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:43:48,857 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:43:49,507 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.name AS project_name,
       COUNT(t.id) AS high_priority_tasks
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
WHERE t.priority = 'High'
  AND t.owner_id = 1
GROUP BY p.name;
2025-07-05 10:43:49,509 - INFO - Raw DB data retrieved: 0 rows
2025-07-05 10:43:49,509 - WARNING - No data returned from SQL query
2025-07-05 10:43:49,510 - INFO - Final prompt created with unique_id_with_template: uid_556071543c654d5dad5c9f1b5f3f8042_145c1f2066cf774f_1751712227934
2025-07-05 10:43:49,821 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:43:56,167 - INFO - chat_id_enc 97762b3b-6e06-4e0e-85d5-c4b2bd8f2018
2025-07-05 10:43:56,168 - INFO - Executing chat history query for chat_id 97762b3b-6e06-4e0e-85d5-c4b2bd8f2018:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:43:56,170 - INFO - Saving message to DB for chat_id 97762b3b-6e06-4e0e-85d5-c4b2bd8f2018, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:43:56,176 - INFO - Generated unique_id_with_template: uid_0ae1edcd3b944b6da213e2ce45b57f7f_c64473e5c9fb5eb5_1751712236176
2025-07-05 10:43:56,177 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:43:56,178 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:43:56,179 - INFO - Processing query for user_id 1: Which labels are used most across high-priority tasks?
2025-07-05 10:43:56,180 - INFO - Staff ID filter: 
2025-07-05 10:43:56,180 - INFO - Generated unique_id_with_template: uid_0ae1edcd3b944b6da213e2ce45b57f7f_c64473e5c9fb5eb5_1751712236176
2025-07-05 10:43:56,180 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:43:56,514 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:43:56,589 - INFO - Intent classification: sql
2025-07-05 10:43:56,605 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:43:57,137 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:43:57,510 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT labels,
       COUNT(*) AS label_count
FROM tasks
WHERE priority = 'High'
  AND owner_id = 1
GROUP BY labels
ORDER BY label_count DESC;
2025-07-05 10:43:57,512 - INFO - Raw DB data retrieved: 0 rows
2025-07-05 10:43:57,512 - WARNING - No data returned from SQL query
2025-07-05 10:43:57,512 - INFO - Final prompt created with unique_id_with_template: uid_0ae1edcd3b944b6da213e2ce45b57f7f_c64473e5c9fb5eb5_1751712236176
2025-07-05 10:43:57,834 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:44:13,786 - INFO - Client disconnected from WebSocket
2025-07-05 10:44:20,547 - INFO - chat_id_enc 
2025-07-05 10:44:20,960 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:44:21,392 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:44:21,616 - INFO - Created new chat with ID 140 and UUID b7d0f367-a852-43c3-98bd-1e465da0a84f for user 1
2025-07-05 10:44:21,616 - INFO - b7d0f367-a852-43c3-98bd-1e465da0a84f
2025-07-05 10:44:21,617 - INFO - Executing chat history query for chat_id b7d0f367-a852-43c3-98bd-1e465da0a84f:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:44:21,618 - INFO - Saving message to DB for chat_id b7d0f367-a852-43c3-98bd-1e465da0a84f, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:44:21,621 - INFO - Generated unique_id_with_template: uid_503f3caba4954156a2482520b04e4e3a_04740053ee02eb34_1751712261621
2025-07-05 10:44:21,622 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:44:21,623 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:44:21,624 - INFO - Processing query for user_id 1: Which project has the highest task reassignment rate?
2025-07-05 10:44:21,624 - INFO - Staff ID filter: 
2025-07-05 10:44:21,624 - INFO - Generated unique_id_with_template: uid_503f3caba4954156a2482520b04e4e3a_04740053ee02eb34_1751712261621
2025-07-05 10:44:21,624 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:44:22,019 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:44:22,053 - INFO - Intent classification: sql
2025-07-05 10:44:22,096 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:44:22,450 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:44:23,100 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.name AS project_name,
       COUNT(t.id) AS reassignment_count
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
WHERE t.owner_id = 1
  AND t.status = 'Duplicate'
GROUP BY p.name
ORDER BY reassignment_count DESC
LIMIT 1;
2025-07-05 10:44:23,104 - INFO - Raw DB data retrieved: 1 rows
2025-07-05 10:44:23,104 - INFO - Sample data: {'project_name': None, 'reassignment_count': 24}
2025-07-05 10:44:23,105 - INFO - Final prompt created with unique_id_with_template: uid_503f3caba4954156a2482520b04e4e3a_04740053ee02eb34_1751712261621
2025-07-05 10:44:23,448 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:44:34,820 - INFO - chat_id_enc b7d0f367-a852-43c3-98bd-1e465da0a84f
2025-07-05 10:44:34,821 - INFO - Executing chat history query for chat_id b7d0f367-a852-43c3-98bd-1e465da0a84f:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:44:34,822 - INFO - Saving message to DB for chat_id b7d0f367-a852-43c3-98bd-1e465da0a84f, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:44:34,826 - INFO - Generated unique_id_with_template: uid_a81a3ea6fa714b088b80df957594b1fd_455e7d203403427e_1751712274826
2025-07-05 10:44:34,826 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:44:34,827 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:44:34,828 - INFO - Processing query for user_id 1: Who has the highest number of high-priority tasks assigned?
2025-07-05 10:44:34,828 - INFO - Staff ID filter: 
2025-07-05 10:44:34,828 - INFO - Generated unique_id_with_template: uid_a81a3ea6fa714b088b80df957594b1fd_455e7d203403427e_1751712274826
2025-07-05 10:44:34,828 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:44:35,270 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:44:35,306 - INFO - Intent classification: sql
2025-07-05 10:44:35,329 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:44:35,584 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:44:36,130 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT pu.full_name,
       COUNT(t.id) AS high_priority_task_count
FROM tasks t
LEFT JOIN platform_users pu ON t.user_id = pu.user_id
AND t.owner_id = pu.owner_id
WHERE t.priority = 'High'
  AND t.owner_id = 1
GROUP BY pu.full_name
ORDER BY high_priority_task_count DESC
LIMIT 1
2025-07-05 10:44:36,131 - INFO - Raw DB data retrieved: 0 rows
2025-07-05 10:44:36,131 - WARNING - No data returned from SQL query
2025-07-05 10:44:36,132 - INFO - Final prompt created with unique_id_with_template: uid_a81a3ea6fa714b088b80df957594b1fd_455e7d203403427e_1751712274826
2025-07-05 10:44:36,508 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:45:06,836 - INFO - chat_id_enc 
2025-07-05 10:45:07,205 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:45:07,605 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:45:07,730 - INFO - Created new chat with ID 141 and UUID 3e2a96d6-1880-4691-a1ee-df33b9fee8f9 for user 1
2025-07-05 10:45:07,730 - INFO - 3e2a96d6-1880-4691-a1ee-df33b9fee8f9
2025-07-05 10:45:07,731 - INFO - Executing chat history query for chat_id 3e2a96d6-1880-4691-a1ee-df33b9fee8f9:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:45:07,733 - INFO - Saving message to DB for chat_id 3e2a96d6-1880-4691-a1ee-df33b9fee8f9, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:45:07,741 - INFO - Generated unique_id_with_template: uid_851fb825d40041589e86a3dac7833c25_ecb81bd4871aa0e2_1751712307740
2025-07-05 10:45:07,741 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:45:07,742 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:45:07,744 - INFO - Processing query for user_id 1: What’s the average priority level of tasks in each project?
2025-07-05 10:45:07,744 - INFO - Staff ID filter: 
2025-07-05 10:45:07,744 - INFO - Generated unique_id_with_template: uid_851fb825d40041589e86a3dac7833c25_ecb81bd4871aa0e2_1751712307740
2025-07-05 10:45:07,744 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:45:08,167 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:45:08,180 - INFO - Intent classification: sql
2025-07-05 10:45:08,210 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:45:08,512 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:45:08,995 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.name AS project_name,
       AVG(CAST(t.priority AS UNSIGNED)) AS average_priority
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
WHERE t.owner_id = 1
GROUP BY p.name
2025-07-05 10:45:08,998 - INFO - Raw DB data retrieved: 11 rows
2025-07-05 10:45:08,998 - INFO - Sample data: {'project_name': None, 'average_priority': Decimal('2.4653')}
2025-07-05 10:45:08,999 - INFO - Final prompt created with unique_id_with_template: uid_851fb825d40041589e86a3dac7833c25_ecb81bd4871aa0e2_1751712307740
2025-07-05 10:45:09,427 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:45:34,774 - INFO - chat_id_enc 3e2a96d6-1880-4691-a1ee-df33b9fee8f9
2025-07-05 10:45:34,775 - INFO - Executing chat history query for chat_id 3e2a96d6-1880-4691-a1ee-df33b9fee8f9:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-05 10:45:34,776 - INFO - Saving message to DB for chat_id 3e2a96d6-1880-4691-a1ee-df33b9fee8f9, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-05 10:45:34,780 - INFO - Generated unique_id_with_template: uid_a5944c19cd7c455aa994cf52d25a79e7_4a0e626fb2c5e81f_1751712334780
2025-07-05 10:45:34,781 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-05 10:45:34,781 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-05 10:45:34,782 - INFO - Processing query for user_id 1: more details
2025-07-05 10:45:34,783 - INFO - Staff ID filter: 
2025-07-05 10:45:34,783 - INFO - Generated unique_id_with_template: uid_a5944c19cd7c455aa994cf52d25a79e7_4a0e626fb2c5e81f_1751712334780
2025-07-05 10:45:34,783 - INFO - User metrics loaded: 4 metrics
2025-07-05 10:45:35,177 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:45:35,199 - INFO - Intent classification: sql
2025-07-05 10:45:35,226 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-05 10:45:35,655 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 10:45:36,007 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT projects.name AS project_name,
       AVG(tasks.priority) AS average_priority
FROM tasks
LEFT JOIN projects ON tasks.project_id = projects.platform_id
WHERE tasks.owner_id = 1
GROUP BY projects.name
2025-07-05 10:45:36,009 - INFO - Raw DB data retrieved: 1 rows
2025-07-05 10:45:36,009 - INFO - Sample data: {'project_name': None, 'average_priority': 2.5095541401273884}
2025-07-05 10:45:36,010 - INFO - Final prompt created with unique_id_with_template: uid_a5944c19cd7c455aa994cf52d25a79e7_4a0e626fb2c5e81f_1751712334780
2025-07-05 10:45:36,419 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-05 12:40:23,080 - INFO - Client disconnected from WebSocket
2025-07-06 11:54:02,102 - INFO - Client disconnected from WebSocket
2025-07-06 11:55:48,611 - INFO - Client disconnected from WebSocket
2025-07-06 12:04:45,147 - INFO - Client disconnected from WebSocket
2025-07-06 12:05:56,225 - INFO - Client disconnected from WebSocket
2025-07-06 12:28:04,538 - INFO - Client disconnected from WebSocket
2025-07-06 12:28:11,964 - INFO - Client disconnected from WebSocket
