2025-07-01 16:59:37,532 - INFO - Client disconnected from WebSocket
2025-07-01 16:59:58,609 - INFO - Client disconnected from WebSocket
2025-07-01 18:26:48,736 - INFO - Client disconnected from WebSocket
2025-07-01 18:38:38,430 - INFO - Client disconnected from WebSocket
2025-07-01 18:41:59,775 - INFO - Client disconnected from WebSocket
2025-07-01 18:42:17,415 - INFO - Client disconnected from WebSocket
2025-07-01 18:44:00,054 - INFO - Client disconnected from WebSocket
2025-07-01 18:44:05,575 - INFO - Client disconnected from WebSocket
2025-07-01 18:44:22,016 - INFO - Client disconnected from WebSocket
2025-07-01 18:44:39,412 - INFO - Client disconnected from WebSocket
2025-07-01 18:44:43,364 - INFO - Client disconnected from WebSocket
2025-07-01 18:56:37,513 - INFO - Client disconnected from WebSocket
2025-07-02 12:19:48,451 - INFO - Client disconnected from WebSocket
2025-07-02 13:49:19,519 - INFO - Client disconnected from WebSocket
2025-07-02 15:10:58,619 - INFO - chat_id_enc None
2025-07-02 15:10:58,619 - INFO - Generated unique_id_with_template: uid_266de4d7b75645369d07cf291d797976_2c53b0796ff772b9_1751469058619
2025-07-02 15:10:58,624 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 15:10:58,627 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 15:10:58,628 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 15:10:58,628 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 15:10:58,628 - INFO - Generated unique_id_with_template: uid_266de4d7b75645369d07cf291d797976_2c53b0796ff772b9_1751469058619
2025-07-02 15:10:58,629 - INFO - User metrics loaded: 4 metrics
2025-07-02 15:10:59,189 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:10:59,221 - INFO - Intent classification: sql
2025-07-02 15:10:59,223 - INFO - SQLAlchemy connection failed, recreating: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-02 15:10:59,224 - ERROR - SQL Query Error for user_id 1: Connection.__init__() got an unexpected keyword argument 'pool_pre_ping'
2025-07-02 15:10:59,224 - INFO - NO TEMPLATE
2025-07-02 15:10:59,225 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 15:10:59,688 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:11:01,328 - ERROR - Streaming error: 
2025-07-02 15:56:55,025 - INFO - Fetching staff info for email prebad50@gmail.com:

        SELECT id as staff_id, email, name, workspace
        FROM linked_users
        WHERE email = %s AND password IS NOT NULL
        LIMIT 1
    
2025-07-02 15:56:55,029 - INFO - Fetching owner_id for workspace reviewbod:

        SELECT id as owner_id
        FROM users
        WHERE workspace = %s
        LIMIT 1
    
2025-07-02 15:56:55,031 - INFO - chat_id_enc 
2025-07-02 15:56:55,701 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:56:56,546 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:56:56,678 - INFO - Created new chat with ID 105 and UUID 037191dc-d1bf-4bf7-be87-c05ef3717241 for staff_id 6
2025-07-02 15:56:56,679 - INFO - 037191dc-d1bf-4bf7-be87-c05ef3717241
2025-07-02 15:56:56,680 - INFO - Executing chat history query for chat_id 037191dc-d1bf-4bf7-be87-c05ef3717241:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-02 15:56:56,681 - INFO - Saving message to DB for chat_id 037191dc-d1bf-4bf7-be87-c05ef3717241, staff_id 6:

        INSERT INTO chat_messages (chat_id, staff_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-02 15:56:56,688 - INFO - Generated unique_id_with_template: uid_e30793507a4647efb2f4ed50c8899d37_b3a18939828eafdd_1751471816688
2025-07-02 15:56:56,689 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 15:56:56,690 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 15:56:56,692 - INFO - Processing query for user_email prebad50@gmail.com, staff_id 6, owner_id 1: hey
2025-07-02 15:56:56,693 - INFO - Generated unique_id_with_template: uid_e30793507a4647efb2f4ed50c8899d37_b3a18939828eafdd_1751471816688
2025-07-02 15:56:56,693 - INFO - User metrics loaded: 4 metrics
2025-07-02 15:56:56,693 - INFO - Staff info - Name: prebad50@gmail.com, Email: prebad50@gmail.com, Workspace: reviewbod
2025-07-02 15:56:57,150 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:56:57,192 - INFO - Intent classification: chat
2025-07-02 15:56:57,192 - INFO - Final prompt created with unique_id_with_template: uid_e30793507a4647efb2f4ed50c8899d37_b3a18939828eafdd_1751471816688
2025-07-02 15:56:58,085 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:57:03,502 - INFO - Fetching staff info for email prebad50@gmail.com:

        SELECT id as staff_id, email, name, workspace
        FROM linked_users
        WHERE email = %s AND password IS NOT NULL
        LIMIT 1
    
2025-07-02 15:57:03,503 - INFO - Fetching owner_id for workspace reviewbod:

        SELECT id as owner_id
        FROM users
        WHERE workspace = %s
        LIMIT 1
    
2025-07-02 15:57:03,504 - INFO - chat_id_enc 037191dc-d1bf-4bf7-be87-c05ef3717241
2025-07-02 15:57:03,504 - INFO - Executing chat history query for chat_id 037191dc-d1bf-4bf7-be87-c05ef3717241:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-02 15:57:03,505 - INFO - Saving message to DB for chat_id 037191dc-d1bf-4bf7-be87-c05ef3717241, staff_id 6:

        INSERT INTO chat_messages (chat_id, staff_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-02 15:57:03,508 - INFO - Generated unique_id_with_template: uid_f169530dad434719b15980f67a2cf757_7bd19081ac89f644_1751471823508
2025-07-02 15:57:03,509 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 15:57:03,510 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 15:57:03,510 - INFO - Processing query for user_email prebad50@gmail.com, staff_id 6, owner_id 1: what my name
2025-07-02 15:57:03,511 - INFO - Generated unique_id_with_template: uid_f169530dad434719b15980f67a2cf757_7bd19081ac89f644_1751471823508
2025-07-02 15:57:03,511 - INFO - User metrics loaded: 4 metrics
2025-07-02 15:57:03,511 - INFO - Staff info - Name: prebad50@gmail.com, Email: prebad50@gmail.com, Workspace: reviewbod
2025-07-02 15:57:03,970 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:57:04,194 - INFO - Intent classification: chat
2025-07-02 15:57:04,195 - INFO - Final prompt created with unique_id_with_template: uid_f169530dad434719b15980f67a2cf757_7bd19081ac89f644_1751471823508
2025-07-02 15:57:04,464 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:57:10,007 - INFO - Fetching staff info for email prebad50@gmail.com:

        SELECT id as staff_id, email, name, workspace
        FROM linked_users
        WHERE email = %s AND password IS NOT NULL
        LIMIT 1
    
2025-07-02 15:57:10,008 - INFO - Fetching owner_id for workspace reviewbod:

        SELECT id as owner_id
        FROM users
        WHERE workspace = %s
        LIMIT 1
    
2025-07-02 15:57:10,009 - INFO - chat_id_enc 037191dc-d1bf-4bf7-be87-c05ef3717241
2025-07-02 15:57:10,009 - INFO - Executing chat history query for chat_id 037191dc-d1bf-4bf7-be87-c05ef3717241:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-02 15:57:10,010 - INFO - Saving message to DB for chat_id 037191dc-d1bf-4bf7-be87-c05ef3717241, staff_id 6:

        INSERT INTO chat_messages (chat_id, staff_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-02 15:57:10,014 - INFO - Generated unique_id_with_template: uid_6c9169e8773e42db9106994bd91c01a2_bbca9769c0e12cdb_1751471830014
2025-07-02 15:57:10,014 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 15:57:10,015 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 15:57:10,015 - INFO - Processing query for user_email prebad50@gmail.com, staff_id 6, owner_id 1: good boy
2025-07-02 15:57:10,016 - INFO - Generated unique_id_with_template: uid_6c9169e8773e42db9106994bd91c01a2_bbca9769c0e12cdb_1751471830014
2025-07-02 15:57:10,016 - INFO - User metrics loaded: 4 metrics
2025-07-02 15:57:10,016 - INFO - Staff info - Name: prebad50@gmail.com, Email: prebad50@gmail.com, Workspace: reviewbod
2025-07-02 15:57:13,112 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:57:13,141 - INFO - Intent classification: chat
2025-07-02 15:57:13,142 - INFO - Final prompt created with unique_id_with_template: uid_6c9169e8773e42db9106994bd91c01a2_bbca9769c0e12cdb_1751471830014
2025-07-02 15:57:13,359 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:57:15,145 - INFO - Fetching staff info for email prebad50@gmail.com:

        SELECT id as staff_id, email, name, workspace
        FROM linked_users
        WHERE email = %s AND password IS NOT NULL
        LIMIT 1
    
2025-07-02 15:57:15,146 - INFO - Fetching owner_id for workspace reviewbod:

        SELECT id as owner_id
        FROM users
        WHERE workspace = %s
        LIMIT 1
    
2025-07-02 15:57:15,147 - INFO - chat_id_enc 037191dc-d1bf-4bf7-be87-c05ef3717241
2025-07-02 15:57:15,148 - INFO - Executing chat history query for chat_id 037191dc-d1bf-4bf7-be87-c05ef3717241:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-02 15:57:15,148 - INFO - Saving message to DB for chat_id 037191dc-d1bf-4bf7-be87-c05ef3717241, staff_id 6:

        INSERT INTO chat_messages (chat_id, staff_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-02 15:57:15,153 - INFO - Generated unique_id_with_template: uid_b657c36cce6d4a46a63b2586d947a681_5ea6bfb96398dc34_1751471835153
2025-07-02 15:57:15,154 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 15:57:15,155 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 15:57:15,156 - INFO - Processing query for user_email prebad50@gmail.com, staff_id 6, owner_id 1: Which of my tasks are currently overdue?
2025-07-02 15:57:15,157 - INFO - Generated unique_id_with_template: uid_b657c36cce6d4a46a63b2586d947a681_5ea6bfb96398dc34_1751471835153
2025-07-02 15:57:15,157 - INFO - User metrics loaded: 4 metrics
2025-07-02 15:57:15,157 - INFO - Staff info - Name: prebad50@gmail.com, Email: prebad50@gmail.com, Workspace: reviewbod
2025-07-02 15:57:15,581 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:57:15,639 - INFO - Intent classification: sql
2025-07-02 15:57:15,640 - INFO - SQLAlchemy connection failed, recreating: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-02 15:57:15,641 - ERROR - SQL Query Error for user_email prebad50@gmail.com, staff_id 6: Connection.__init__() got an unexpected keyword argument 'pool_pre_ping'
2025-07-02 15:57:15,642 - INFO - Final prompt created with unique_id_with_template: uid_b657c36cce6d4a46a63b2586d947a681_5ea6bfb96398dc34_1751471835153
2025-07-02 15:57:15,936 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:57:39,930 - INFO - Fetching staff info for email prebad50@gmail.com:

        SELECT id as staff_id, email, name, workspace
        FROM linked_users
        WHERE email = %s AND password IS NOT NULL
        LIMIT 1
    
2025-07-02 15:57:39,931 - INFO - Fetching owner_id for workspace reviewbod:

        SELECT id as owner_id
        FROM users
        WHERE workspace = %s
        LIMIT 1
    
2025-07-02 15:57:39,932 - INFO - chat_id_enc 037191dc-d1bf-4bf7-be87-c05ef3717241
2025-07-02 15:57:39,932 - INFO - Executing chat history query for chat_id 037191dc-d1bf-4bf7-be87-c05ef3717241:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-02 15:57:39,933 - INFO - Saving message to DB for chat_id 037191dc-d1bf-4bf7-be87-c05ef3717241, staff_id 6:

        INSERT INTO chat_messages (chat_id, staff_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-02 15:57:39,938 - INFO - Generated unique_id_with_template: uid_34e620f2a8264086a85e3d60f44b7e98_f076e4d3f043d2fb_1751471859938
2025-07-02 15:57:39,938 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 15:57:39,939 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 15:57:39,939 - INFO - Processing query for user_email prebad50@gmail.com, staff_id 6, owner_id 1: Which of my tasks have no estimates assigned?
2025-07-02 15:57:39,940 - INFO - Generated unique_id_with_template: uid_34e620f2a8264086a85e3d60f44b7e98_f076e4d3f043d2fb_1751471859938
2025-07-02 15:57:39,940 - INFO - User metrics loaded: 4 metrics
2025-07-02 15:57:39,940 - INFO - Staff info - Name: prebad50@gmail.com, Email: prebad50@gmail.com, Workspace: reviewbod
2025-07-02 15:57:40,260 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:57:40,291 - INFO - Intent classification: sql
2025-07-02 15:57:40,310 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 15:57:40,604 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 15:57:41,894 - INFO - Generated SQL Query for user_email prebad50@gmail.com, staff_id 6, owner_id 1:
SELECT DISTINCT tasks.id,
                tasks.title AS task_name,
                tasks.status,
                tasks.due_date,
                tasks.estimate,
                projects.name AS project_name,
                teams.name AS team_name,
                users.name AS owner_name,
                platform_users.name AS assigned_user_name
FROM tasks
LEFT JOIN projects ON projects.id = tasks.project_id
AND projects.owner_id = 1
LEFT JOIN teams ON teams.id = tasks.team_id
AND teams.owner_id = 1
LEFT JOIN users ON users.id = tasks.owner_id
AND users.workspace = 'reviewbod'
LEFT JOIN platform_users ON platform_users.user_id = tasks.user_id
WHERE platform_users.email = 'prebad50@gmail.com'
  AND tasks.is_deleted IS NULL
  AND tasks.estimate IS NULL;
2025-07-02 15:57:41,896 - INFO - Raw DB data retrieved: 0 rows
2025-07-02 15:57:41,896 - WARNING - No data returned from SQL query
2025-07-02 15:57:41,896 - INFO - Final prompt created with unique_id_with_template: uid_34e620f2a8264086a85e3d60f44b7e98_f076e4d3f043d2fb_1751471859938
2025-07-02 15:57:42,270 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:21:08,788 - INFO - chat_id_enc None
2025-07-02 17:21:08,788 - INFO - Generated unique_id_with_template: uid_fb2562b8718c4b17b9ace4398f839671_65a5f09552daa8ff_1751476868788
2025-07-02 17:21:08,788 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:21:08,790 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:21:08,791 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:21:08,791 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:21:08,791 - INFO - Generated unique_id_with_template: uid_fb2562b8718c4b17b9ace4398f839671_65a5f09552daa8ff_1751476868788
2025-07-02 17:21:08,791 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:21:09,358 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:21:09,382 - INFO - Intent classification: sql
2025-07-02 17:21:09,408 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:21:09,677 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:21:10,854 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON platform_users.id = tasks.owner_id
WHERE tasks.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com'
        AND 'prebad50@gmail.com' LIKE '%@%')
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND 'prebad50@gmail.com' NOT LIKE '%@%'))
  AND tasks.owner_id = 1;
2025-07-02 17:21:10,870 - INFO - Raw DB data retrieved: 290 rows
2025-07-02 17:21:10,871 - INFO - Sample data: {'id': 2, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': 'd181b6a9-2a96-480f-b82d-5a4c94f7a11b', 'user_id': '1d66d358-c981-4563-917f-8e8b35b497e6', 'title': 'Develop Ticket Categorization Model', 'description': 'Design and implement a machine learning model to categorize support tickets based on their content. Acceptance criteria: Model accurately categorizes tickets with at least 85% accuracy during testing.', 'status': 'Duplicate', 'priority': '2', 'labels': '[]', 'estimate': 13.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 38), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 46), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 37), 'owner_id': 1}
2025-07-02 17:21:10,886 - INFO - NO TEMPLATE
2025-07-02 17:21:10,891 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:21:12,805 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:22:01,560 - INFO - Client disconnected from WebSocket
2025-07-02 17:22:03,074 - INFO - chat_id_enc None
2025-07-02 17:22:03,075 - INFO - Generated unique_id_with_template: uid_840231d5db1a475da103ada4f37ce556_09df1398b1ef134d_1751476923074
2025-07-02 17:22:03,075 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:22:03,077 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:22:03,077 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:22:03,078 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:22:03,078 - INFO - Generated unique_id_with_template: uid_840231d5db1a475da103ada4f37ce556_09df1398b1ef134d_1751476923074
2025-07-02 17:22:03,078 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:22:03,543 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:22:03,559 - INFO - Intent classification: sql
2025-07-02 17:22:03,578 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:22:03,793 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:22:05,100 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT t.*
FROM tasks t
JOIN platform_users pu ON CASE
                              WHEN 'prebad50@gmail.com' LIKE '%@%' THEN pu.email = 'prebad50@gmail.com'
                              ELSE pu.user_id = 'prebad50@gmail.com'
                          END
WHERE t.owner_id = 1
  AND pu.owner_id = 1
  AND (('prebad50@gmail.com' LIKE '%@%'
        AND pu.email = 'prebad50@gmail.com')
       OR ('prebad50@gmail.com' NOT LIKE '%@%'
           AND pu.user_id = 'prebad50@gmail.com'));
2025-07-02 17:22:05,118 - INFO - Raw DB data retrieved: 290 rows
2025-07-02 17:22:05,118 - INFO - Sample data: {'id': 2, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': 'd181b6a9-2a96-480f-b82d-5a4c94f7a11b', 'user_id': '1d66d358-c981-4563-917f-8e8b35b497e6', 'title': 'Develop Ticket Categorization Model', 'description': 'Design and implement a machine learning model to categorize support tickets based on their content. Acceptance criteria: Model accurately categorizes tickets with at least 85% accuracy during testing.', 'status': 'Duplicate', 'priority': '2', 'labels': '[]', 'estimate': 13.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 38), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 46), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 37), 'owner_id': 1}
2025-07-02 17:22:05,132 - INFO - NO TEMPLATE
2025-07-02 17:22:05,137 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:22:05,619 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:22:35,387 - INFO - Client disconnected from WebSocket
2025-07-02 17:22:36,735 - INFO - chat_id_enc None
2025-07-02 17:22:36,736 - INFO - Generated unique_id_with_template: uid_098614f05e4048c0afe760d3b22618f1_49b068dc027bc700_1751476956736
2025-07-02 17:22:36,736 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:22:36,737 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:22:36,738 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:22:36,738 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:22:36,738 - INFO - Generated unique_id_with_template: uid_098614f05e4048c0afe760d3b22618f1_49b068dc027bc700_1751476956736
2025-07-02 17:22:36,739 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:22:37,265 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:22:37,328 - INFO - Intent classification: sql
2025-07-02 17:22:37,369 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:22:37,570 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:22:39,062 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON CASE
                           WHEN 'prebad50@gmail.com' LIKE '%@%' THEN platform_users.email = 'prebad50@gmail.com'
                           ELSE platform_users.user_id = 'prebad50@gmail.com'
                       END
WHERE tasks.owner_id = 1
  AND platform_users.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com'
        AND tasks.user_id = platform_users.user_id)
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND tasks.user_id = platform_users.user_id));
2025-07-02 17:22:39,065 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 17:22:39,065 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1}
2025-07-02 17:22:39,067 - INFO - NO TEMPLATE
2025-07-02 17:22:39,068 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:22:39,530 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:22:56,905 - INFO - Client disconnected from WebSocket
2025-07-02 17:22:58,248 - INFO - chat_id_enc None
2025-07-02 17:22:58,248 - INFO - Generated unique_id_with_template: uid_a1ce5a9ebe56404b99f50694221a205c_2de36e8f57e7885b_1751476978248
2025-07-02 17:22:58,249 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:22:58,250 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:22:58,250 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:22:58,251 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:22:58,251 - INFO - Generated unique_id_with_template: uid_a1ce5a9ebe56404b99f50694221a205c_2de36e8f57e7885b_1751476978248
2025-07-02 17:22:58,251 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:22:58,574 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:22:58,627 - INFO - Intent classification: sql
2025-07-02 17:22:58,643 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:22:58,855 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:23:00,175 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON platform_users.owner_id = 1
WHERE tasks.owner_id = 1
  AND platform_users.owner_id = 1
  AND ((platform_users.email LIKE '%prebad50@gmail.com%'
        AND platform_users.email IS NOT NULL)
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND platform_users.user_id IS NOT NULL))
  AND ((platform_users.email LIKE '%prebad50@gmail.com%'
        AND platform_users.email IS NOT NULL
        AND platform_users.email = 'prebad50@gmail.com')
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND platform_users.user_id IS NOT NULL
           AND platform_users.user_id = 'prebad50@gmail.'));
2025-07-02 17:23:00,187 - INFO - Raw DB data retrieved: 290 rows
2025-07-02 17:23:00,187 - INFO - Sample data: {'id': 2, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': 'd181b6a9-2a96-480f-b82d-5a4c94f7a11b', 'user_id': '1d66d358-c981-4563-917f-8e8b35b497e6', 'title': 'Develop Ticket Categorization Model', 'description': 'Design and implement a machine learning model to categorize support tickets based on their content. Acceptance criteria: Model accurately categorizes tickets with at least 85% accuracy during testing.', 'status': 'Duplicate', 'priority': '2', 'labels': '[]', 'estimate': 13.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 38), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 46), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 37), 'owner_id': 1}
2025-07-02 17:23:00,199 - INFO - NO TEMPLATE
2025-07-02 17:23:00,203 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:23:00,973 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:23:19,226 - INFO - Client disconnected from WebSocket
2025-07-02 17:23:20,518 - INFO - chat_id_enc None
2025-07-02 17:23:20,518 - INFO - Generated unique_id_with_template: uid_cd3c5b14c96146d39fc1f28b89d226de_b7499046bbccdf11_1751477000518
2025-07-02 17:23:20,519 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:23:20,520 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:23:20,521 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:23:20,521 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:23:20,522 - INFO - Generated unique_id_with_template: uid_cd3c5b14c96146d39fc1f28b89d226de_b7499046bbccdf11_1751477000518
2025-07-02 17:23:20,522 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:23:20,997 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:23:21,029 - INFO - Intent classification: sql
2025-07-02 17:23:21,056 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:23:21,249 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:23:22,871 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT t.id AS task_id,
       t.title AS task_title,
       t.status AS task_status,
       t.created_at AS task_created_at,
       u.full_name AS assigned_user_full_name,
       u.email AS assigned_user_email,
       p.name AS project_name,
       s.status AS jira_status,
       t.source AS task_source
FROM tasks t
LEFT JOIN platform_users u ON u.owner_id = 1
LEFT JOIN projects p ON p.id = t.project_id
AND p.owner_id = 1
LEFT JOIN status_jira s ON s.platform_id = p.platform_id
AND s.owner_id = '1'
WHERE t.owner_id = 1
  AND ((u.email = 'prebad50@gmail.com')
       OR (u.user_id = 'prebad50@gmail.com'))
  AND t.user_id = u.user_id;
2025-07-02 17:23:22,873 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 17:23:22,874 - INFO - Sample data: {'task_id': 6, 'task_title': 'Create Dashboard for Ticket Insights', 'task_status': 'Backlog', 'task_created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'assigned_user_full_name': 'prebad50@gmail.com', 'assigned_user_email': 'prebad50@gmail.com', 'project_name': None, 'jira_status': None, 'task_source': 'linear'}
2025-07-02 17:23:22,874 - INFO - NO TEMPLATE
2025-07-02 17:23:22,874 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:23:29,331 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:23:31,781 - ERROR - Streaming error: 
2025-07-02 17:23:33,075 - INFO - chat_id_enc None
2025-07-02 17:23:33,075 - INFO - Generated unique_id_with_template: uid_a2b6f264524a4f5a98db6329d377dd2d_a273ec31e06e0019_1751477013075
2025-07-02 17:23:33,076 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:23:33,077 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:23:33,078 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:23:33,078 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:23:33,078 - INFO - Generated unique_id_with_template: uid_a2b6f264524a4f5a98db6329d377dd2d_a273ec31e06e0019_1751477013075
2025-07-02 17:23:33,078 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:23:33,276 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:23:33,290 - INFO - Intent classification: sql
2025-07-02 17:23:33,307 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:23:33,841 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:23:35,502 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.id,
       tasks.title,
       tasks.status,
       tasks.priority,
       tasks.created_at,
       tasks.updated_at,
       platform_users.full_name AS assigned_user_name,
       projects.name AS project_name,
       teams.name AS team_name
FROM tasks
LEFT JOIN platform_users ON tasks.user_id = platform_users.user_id
AND platform_users.owner_id = 1
LEFT JOIN projects ON tasks.project_id = projects.platform_id
AND projects.owner_id = 1
LEFT JOIN teams ON tasks.team_id = teams.platform_id
AND teams.owner_id = 1
WHERE tasks.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com')
       OR (platform_users.user_id = 'prebad50@gmail.com'))
2025-07-02 17:23:35,505 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 17:23:35,505 - INFO - Sample data: {'id': 6, 'title': 'Create Dashboard for Ticket Insights', 'status': 'Backlog', 'priority': '3', 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'assigned_user_name': 'prebad50@gmail.com', 'project_name': None, 'team_name': None}
2025-07-02 17:23:35,506 - INFO - NO TEMPLATE
2025-07-02 17:23:35,506 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:23:35,738 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:23:39,887 - ERROR - Streaming error: 
2025-07-02 17:23:41,172 - INFO - chat_id_enc None
2025-07-02 17:23:41,173 - INFO - Generated unique_id_with_template: uid_7ff4e5a8f65c4436a490273d507dc262_4056a09ccc23b079_1751477021173
2025-07-02 17:23:41,173 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:23:41,174 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:23:41,175 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:23:41,176 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:23:41,176 - INFO - Generated unique_id_with_template: uid_7ff4e5a8f65c4436a490273d507dc262_4056a09ccc23b079_1751477021173
2025-07-02 17:23:41,176 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:23:41,353 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:23:41,369 - INFO - Intent classification: sql
2025-07-02 17:23:41,390 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:23:41,678 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:23:42,861 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT t.*
FROM tasks t
JOIN platform_users pu ON (CASE
                               WHEN 'prebad50@gmail.com' LIKE '%@%' THEN pu.email = 'prebad50@gmail.com'
                               ELSE pu.user_id = 'prebad50@gmail.com'
                           END)
WHERE t.owner_id = 1
  AND pu.owner_id = 1
  AND (('prebad50@gmail.com' LIKE '%@%'
        AND pu.email = 'prebad50@gmail.com')
       OR ('prebad50@gmail.com' NOT LIKE '%@%'
           AND pu.user_id = 'prebad50@gmail.com'));
2025-07-02 17:23:42,873 - INFO - Raw DB data retrieved: 290 rows
2025-07-02 17:23:42,873 - INFO - Sample data: {'id': 2, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': 'd181b6a9-2a96-480f-b82d-5a4c94f7a11b', 'user_id': '1d66d358-c981-4563-917f-8e8b35b497e6', 'title': 'Develop Ticket Categorization Model', 'description': 'Design and implement a machine learning model to categorize support tickets based on their content. Acceptance criteria: Model accurately categorizes tickets with at least 85% accuracy during testing.', 'status': 'Duplicate', 'priority': '2', 'labels': '[]', 'estimate': 13.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 38), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 46), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 37), 'owner_id': 1}
2025-07-02 17:23:42,884 - INFO - NO TEMPLATE
2025-07-02 17:23:42,887 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:23:43,356 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:23:52,938 - INFO - Client disconnected from WebSocket
2025-07-02 17:23:54,127 - INFO - chat_id_enc None
2025-07-02 17:23:54,127 - INFO - Generated unique_id_with_template: uid_626e21a981a0425c98b2f4dea8318bec_741e2aded85bc8f3_1751477034127
2025-07-02 17:23:54,128 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:23:54,129 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:23:54,130 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:23:54,130 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:23:54,130 - INFO - Generated unique_id_with_template: uid_626e21a981a0425c98b2f4dea8318bec_741e2aded85bc8f3_1751477034127
2025-07-02 17:23:54,130 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:23:54,365 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:23:54,389 - INFO - Intent classification: sql
2025-07-02 17:23:54,405 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:23:54,604 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:23:56,123 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON CASE
                           WHEN 'prebad50@gmail.com' LIKE '%@%' THEN platform_users.email = 'prebad50@gmail.com'
                           ELSE platform_users.user_id = 'prebad50@gmail.com'
                       END
WHERE tasks.owner_id = 1
  AND platform_users.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com'
        AND tasks.user_id = platform_users.user_id)
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND tasks.user_id = platform_users.user_id));
2025-07-02 17:23:56,127 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 17:23:56,127 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1}
2025-07-02 17:23:56,128 - INFO - NO TEMPLATE
2025-07-02 17:23:56,129 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:23:56,420 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:23:59,772 - ERROR - Streaming error: 
2025-07-02 17:24:01,065 - INFO - chat_id_enc None
2025-07-02 17:24:01,066 - INFO - Generated unique_id_with_template: uid_4a11df2523f647479839123f0448b4e0_0787648acfd8b81d_1751477041066
2025-07-02 17:24:01,066 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:24:01,068 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:24:01,069 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:24:01,069 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:24:01,069 - INFO - Generated unique_id_with_template: uid_4a11df2523f647479839123f0448b4e0_0787648acfd8b81d_1751477041066
2025-07-02 17:24:01,069 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:24:01,289 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:24:01,322 - INFO - Intent classification: sql
2025-07-02 17:24:01,348 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:24:01,602 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:24:02,939 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON CASE
                           WHEN 'prebad50@gmail.com' LIKE '%@%' THEN platform_users.email = 'prebad50@gmail.com'
                           ELSE platform_users.user_id = 'prebad50@gmail.com'
                       END
WHERE tasks.owner_id = 1
  AND platform_users.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com'
        AND tasks.user_id = platform_users.user_id)
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND tasks.user_id = platform_users.user_id));
2025-07-02 17:24:02,943 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 17:24:02,943 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1}
2025-07-02 17:24:02,945 - INFO - NO TEMPLATE
2025-07-02 17:24:02,946 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:24:03,242 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:24:09,778 - INFO - Client disconnected from WebSocket
2025-07-02 17:24:11,090 - INFO - chat_id_enc None
2025-07-02 17:24:11,091 - INFO - Generated unique_id_with_template: uid_89d34547e37941a59ba9cccb35b332eb_294acef600bef416_1751477051090
2025-07-02 17:24:11,091 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:24:11,092 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:24:11,093 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:24:11,093 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:24:11,093 - INFO - Generated unique_id_with_template: uid_89d34547e37941a59ba9cccb35b332eb_294acef600bef416_1751477051090
2025-07-02 17:24:11,093 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:24:11,250 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:24:11,272 - INFO - Intent classification: sql
2025-07-02 17:24:11,296 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:24:11,543 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:24:12,623 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON CASE
                           WHEN 'prebad50@gmail.com' LIKE '%@%' THEN platform_users.email = 'prebad50@gmail.com'
                           ELSE platform_users.user_id = 'prebad50@gmail.com'
                       END
WHERE tasks.owner_id = 1
  AND platform_users.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com'
        AND tasks.user_id = platform_users.user_id)
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND tasks.user_id = platform_users.user_id));
2025-07-02 17:24:12,627 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 17:24:12,628 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1}
2025-07-02 17:24:12,630 - INFO - NO TEMPLATE
2025-07-02 17:24:12,630 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:24:12,829 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:24:15,591 - ERROR - Streaming error: 
2025-07-02 17:24:16,933 - INFO - chat_id_enc None
2025-07-02 17:24:16,933 - INFO - Generated unique_id_with_template: uid_47c6f0180cba4452b009a1dc249b8ebf_50d9e9626a43406b_1751477056933
2025-07-02 17:24:16,934 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:24:16,935 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:24:16,935 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:24:16,936 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:24:16,936 - INFO - Generated unique_id_with_template: uid_47c6f0180cba4452b009a1dc249b8ebf_50d9e9626a43406b_1751477056933
2025-07-02 17:24:16,936 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:24:17,190 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:24:17,212 - INFO - Intent classification: sql
2025-07-02 17:24:17,235 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:24:17,470 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:24:18,711 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON CASE
                           WHEN 'prebad50@gmail.com' LIKE '%@%' THEN platform_users.email = 'prebad50@gmail.com'
                           ELSE platform_users.user_id = 'prebad50@gmail.com'
                       END
WHERE tasks.owner_id = 1
  AND platform_users.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com'
        AND tasks.user_id = platform_users.user_id)
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND tasks.user_id = platform_users.user_id));
2025-07-02 17:24:18,715 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 17:24:18,715 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1}
2025-07-02 17:24:18,717 - INFO - NO TEMPLATE
2025-07-02 17:24:18,717 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:24:19,112 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:27:47,256 - INFO - Client disconnected from WebSocket
2025-07-02 17:27:48,595 - INFO - chat_id_enc None
2025-07-02 17:27:48,596 - INFO - Generated unique_id_with_template: uid_5cff8c90b23f422795da2a4690d50f11_ea486318700b8d4d_1751477268596
2025-07-02 17:27:48,596 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:27:48,597 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:27:48,598 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:27:48,598 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:27:48,598 - INFO - Generated unique_id_with_template: uid_5cff8c90b23f422795da2a4690d50f11_ea486318700b8d4d_1751477268596
2025-07-02 17:27:48,598 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:27:48,837 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:27:48,888 - INFO - Intent classification: sql
2025-07-02 17:27:48,911 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:27:49,169 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:27:51,094 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT t.*
FROM tasks t
JOIN platform_users pu ON pu.owner_id = 1
WHERE t.owner_id = 1
  AND ((pu.email LIKE '%prebad50@gmail.com%'
        AND pu.email IS NOT NULL)
       OR (pu.user_id = 'prebad50@gmail.com'
           AND pu.email IS NULL))
  AND ((pu.email LIKE '%prebad50@gmail.com%'
        AND pu.email = 'prebad50@gmail.com')
       OR (pu.user_id = 'prebad50@gmail.com'
           AND pu.user_id = 'prebad50@gmail.com'));
2025-07-02 17:27:51,106 - INFO - Raw DB data retrieved: 290 rows
2025-07-02 17:27:51,106 - INFO - Sample data: {'id': 2, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': 'd181b6a9-2a96-480f-b82d-5a4c94f7a11b', 'user_id': '1d66d358-c981-4563-917f-8e8b35b497e6', 'title': 'Develop Ticket Categorization Model', 'description': 'Design and implement a machine learning model to categorize support tickets based on their content. Acceptance criteria: Model accurately categorizes tickets with at least 85% accuracy during testing.', 'status': 'Duplicate', 'priority': '2', 'labels': '[]', 'estimate': 13.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 38), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 46), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 37), 'owner_id': 1}
2025-07-02 17:27:51,117 - INFO - NO TEMPLATE
2025-07-02 17:27:51,120 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:27:52,788 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:28:09,370 - INFO - Client disconnected from WebSocket
2025-07-02 17:28:10,647 - INFO - chat_id_enc None
2025-07-02 17:28:10,658 - INFO - Generated unique_id_with_template: uid_6c7d863802f4460cb1b297270528fbf5_df8901f44ead0c79_1751477290657
2025-07-02 17:28:10,660 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:28:10,662 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:28:10,666 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:28:10,667 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:28:10,667 - INFO - Generated unique_id_with_template: uid_6c7d863802f4460cb1b297270528fbf5_df8901f44ead0c79_1751477290657
2025-07-02 17:28:10,667 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:28:11,035 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:28:11,087 - INFO - Intent classification: sql
2025-07-02 17:28:11,114 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:28:11,351 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:28:13,301 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.id,
       tasks.title,
       tasks.status,
       tasks.created_at,
       platform_users.full_name AS user_full_name,
       platform_users.email AS user_email,
       projects.name AS project_name,
       teams.name AS team_name
FROM tasks
LEFT JOIN platform_users ON tasks.user_id = platform_users.user_id
AND platform_users.owner_id = 1
LEFT JOIN projects ON tasks.project_id = projects.id
AND projects.owner_id = 1
LEFT JOIN teams ON tasks.team_id = teams.id
AND teams.owner_id = 1
WHERE tasks.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com'
        AND 'prebad50@gmail.com' LIKE '%@%')
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND 'prebad50@gmail.com' NOT LIKE '%@%'))
  AND platform_users.owner_id = 1;
2025-07-02 17:28:13,304 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 17:28:13,304 - INFO - Sample data: {'id': 6, 'title': 'Create Dashboard for Ticket Insights', 'status': 'Backlog', 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'user_full_name': 'prebad50@gmail.com', 'user_email': 'prebad50@gmail.com', 'project_name': None, 'team_name': None}
2025-07-02 17:28:13,305 - INFO - NO TEMPLATE
2025-07-02 17:28:13,305 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:28:13,586 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:28:15,743 - ERROR - Streaming error: 
2025-07-02 17:28:17,103 - INFO - chat_id_enc None
2025-07-02 17:28:17,103 - INFO - Generated unique_id_with_template: uid_e320967671504a2695cab70a01270e98_21aec233ef4eaeea_1751477297103
2025-07-02 17:28:17,103 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:28:17,104 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:28:17,105 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:28:17,105 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:28:17,105 - INFO - Generated unique_id_with_template: uid_e320967671504a2695cab70a01270e98_21aec233ef4eaeea_1751477297103
2025-07-02 17:28:17,105 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:28:17,351 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:28:17,400 - INFO - Intent classification: sql
2025-07-02 17:28:17,422 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:28:17,779 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:28:19,150 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON CASE
                           WHEN 'prebad50@gmail.com' LIKE '%@%' THEN platform_users.email = 'prebad50@gmail.com'
                           ELSE platform_users.user_id = 'prebad50@gmail.com'
                       END
WHERE tasks.owner_id = 1
  AND platform_users.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com'
        AND tasks.user_id = platform_users.user_id)
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND tasks.user_id = platform_users.user_id));
2025-07-02 17:28:19,156 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 17:28:19,156 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1}
2025-07-02 17:28:19,158 - INFO - NO TEMPLATE
2025-07-02 17:28:19,158 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:28:19,551 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:28:34,823 - INFO - Client disconnected from WebSocket
2025-07-02 17:28:36,108 - INFO - chat_id_enc None
2025-07-02 17:28:36,108 - INFO - Generated unique_id_with_template: uid_47830057755940408fc28d2aa6ec2f43_cace0293fd4e9ff1_1751477316108
2025-07-02 17:28:36,109 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:28:36,110 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:28:36,111 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:28:36,111 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:28:36,111 - INFO - Generated unique_id_with_template: uid_47830057755940408fc28d2aa6ec2f43_cace0293fd4e9ff1_1751477316108
2025-07-02 17:28:36,111 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:28:36,312 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:28:36,332 - INFO - Intent classification: sql
2025-07-02 17:28:36,351 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:28:36,527 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:28:40,786 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT t.id AS task_id,
       t.title AS task_title,
       t.status AS task_status,
       t.created_at AS task_created_at,
       u.full_name AS assigned_user_name,
       u.email AS assigned_user_email,
       p.name AS project_name,
       s.status AS jira_status,
       tt.status_key AS trello_status,
       tm.category AS metric_category,
       um.title AS metric_title,
       tm.weight AS metric_weight
FROM tasks t
LEFT JOIN platform_users u ON u.owner_id = 1
AND ((u.email LIKE '%prebad50@gmail.com%'
      AND u.email LIKE '%@%')
     AND u.id = 'prebad50@gmail.com'
     OR (u.user_id = 'prebad50@gmail.com'
         AND u.email NOT LIKE '%@%'))
LEFT JOIN projects p ON p.id = t.project_id
AND p.owner_id = 1
LEFT JOIN status_jira s ON s.platform_id = t.platform_id
AND s.owner_id = 1
LEFT JOIN status_trello tt ON tt.platform_id = t.platform_id
AND tt.owner_id = 1
LEFT JOIN user_metrics um ON um.userid = u.id
AND um.owner_id = 1
LEFT JOIN tasks t2 ON t2.id = t.id
AND t2.owner_id = 1
LEFT JOIN user_metrics tm ON tm.userid = u.id
AND tm.owner_id = 1
WHERE t.owner_id = 1
  AND ((u.email LIKE '%prebad50@gmail.com%'
        AND u.email LIKE '%@%')
       OR (u.user_id = 'prebad50@gmail.com'
           AND u.email NOT LIKE '%@%'))
  AND t.user_id = u.user_id;
2025-07-02 17:28:40,788 - ERROR - SQL Query Error for user_id 1: (1054, "Unknown column 'tm.owner_id' in 'on clause'")
2025-07-02 17:28:40,788 - INFO - NO TEMPLATE
2025-07-02 17:28:40,788 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:28:41,121 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:28:49,760 - INFO - Client disconnected from WebSocket
2025-07-02 17:28:51,158 - INFO - chat_id_enc None
2025-07-02 17:28:51,158 - INFO - Generated unique_id_with_template: uid_68d805da086148089cf9038b18b516e5_88d7b579c046a66e_1751477331158
2025-07-02 17:28:51,159 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:28:51,160 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:28:51,161 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:28:51,161 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:28:51,161 - INFO - Generated unique_id_with_template: uid_68d805da086148089cf9038b18b516e5_88d7b579c046a66e_1751477331158
2025-07-02 17:28:51,161 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:28:51,336 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:28:51,347 - INFO - Intent classification: sql
2025-07-02 17:28:51,368 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:28:51,602 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:28:52,066 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT t.*
FROM tasks t
JOIN platform_users pu ON pu.owner_id = 1
WHERE t.owner_id = 1
  AND pu.email = 'prebad50@gmail.com';
2025-07-02 17:28:52,080 - INFO - Raw DB data retrieved: 290 rows
2025-07-02 17:28:52,081 - INFO - Sample data: {'id': 2, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': 'd181b6a9-2a96-480f-b82d-5a4c94f7a11b', 'user_id': '1d66d358-c981-4563-917f-8e8b35b497e6', 'title': 'Develop Ticket Categorization Model', 'description': 'Design and implement a machine learning model to categorize support tickets based on their content. Acceptance criteria: Model accurately categorizes tickets with at least 85% accuracy during testing.', 'status': 'Duplicate', 'priority': '2', 'labels': '[]', 'estimate': 13.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 38), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 46), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 37), 'owner_id': 1}
2025-07-02 17:28:52,097 - INFO - NO TEMPLATE
2025-07-02 17:28:52,101 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:28:52,813 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:28:57,537 - INFO - Client disconnected from WebSocket
2025-07-02 17:28:58,872 - INFO - chat_id_enc None
2025-07-02 17:28:58,872 - INFO - Generated unique_id_with_template: uid_3c3057e081ad41ebb3da11d875bb90ce_b4095e91347d3116_1751477338872
2025-07-02 17:28:58,872 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:28:58,873 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:28:58,874 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:28:58,874 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:28:58,874 - INFO - Generated unique_id_with_template: uid_3c3057e081ad41ebb3da11d875bb90ce_b4095e91347d3116_1751477338872
2025-07-02 17:28:58,874 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:28:59,118 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:28:59,234 - INFO - Intent classification: sql
2025-07-02 17:28:59,258 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:28:59,782 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:29:04,212 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT t.id AS task_id,
       t.title AS task_title,
       t.status AS task_status,
       t.priority,
       t.labels,
       t.estimate,
       t.due_date,
       t.source,
       t.created_at AS task_created_at,
       t.updated_at AS task_updated_at,
       u.id AS user_id,
       u.name AS user_name,
       u.email AS user_email,
       u.full_name AS user_full_name,
       u.source AS user_source,
       u.created_at AS user_created_at,
       u.updated_at AS user_updated_at,
       u.owner_id AS user_owner_id,
       p.id AS project_id,
       p.name AS project_name,
       p.description AS project_description,
       p.start_date,
       p.end_date,
       p.source AS project_source,
       p.type AS project_type,
       p.owner_id AS project_owner_id,
       s.id AS team_id,
       s.name AS team_name,
       s.description AS team_description,
       s.source AS team_source,
       s.owner_id AS team_owner_id
FROM tasks t
LEFT JOIN platform_users u ON (u.email = 'prebad50@gmail.com'
                               AND u.owner_id = 1)
OR (u.user_id = 'prebad50@gmail.com'
    AND u.owner_id = 1)
LEFT JOIN projects p ON p.id = t.project_id
AND p.owner_id = 1
LEFT JOIN teams s ON s.id = t.team_id
AND s.owner_id = 1
WHERE t.owner_id = 1
  AND ((u.email = 'prebad50@gmail.com'
        AND u.owner_id = 1)
       OR (u.user_id = 'prebad50@gmail.com'
           AND u.owner_id = 1))
  AND t.status IN ('Done',
                   'In Progress',
                   'Backlog',
                   'Todo')
2025-07-02 17:29:04,225 - INFO - Raw DB data retrieved: 162 rows
2025-07-02 17:29:04,225 - INFO - Sample data: {'task_id': 6, 'task_title': 'Create Dashboard for Ticket Insights', 'task_status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'task_created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'task_updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'user_id': 1, 'user_name': 'prebad50@gmail.com', 'user_email': 'prebad50@gmail.com', 'user_full_name': 'prebad50@gmail.com', 'user_source': 'linear', 'user_created_at': datetime.datetime(2025, 6, 1, 9, 2, 23), 'user_updated_at': datetime.datetime(2025, 6, 1, 9, 2, 23), 'user_owner_id': 1, 'project_id': None, 'project_name': None, 'project_description': None, 'start_date': None, 'end_date': None, 'project_source': None, 'project_type': None, 'project_owner_id': None, 'team_id': None, 'team_name': None, 'team_description': None, 'team_source': None, 'team_owner_id': None}
2025-07-02 17:29:04,232 - INFO - NO TEMPLATE
2025-07-02 17:29:04,235 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:29:05,002 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:29:05,025 - ERROR - Streaming error: 
2025-07-02 17:29:06,209 - INFO - chat_id_enc None
2025-07-02 17:29:06,210 - INFO - Generated unique_id_with_template: uid_e15eb4a61c83404b9bbf6370d146ff7d_e1528a6170dd713a_1751477346210
2025-07-02 17:29:06,210 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:29:06,211 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:29:06,212 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:29:06,213 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:29:06,213 - INFO - Generated unique_id_with_template: uid_e15eb4a61c83404b9bbf6370d146ff7d_e1528a6170dd713a_1751477346210
2025-07-02 17:29:06,213 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:29:06,418 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:29:06,452 - INFO - Intent classification: sql
2025-07-02 17:29:06,478 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:29:06,750 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:29:08,131 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT t.id AS task_id,
       t.title,
       t.status,
       t.priority,
       t.labels,
       t.estimate,
       t.due_date,
       t.source,
       t.last_synced_at,
       t.created_at,
       t.updated_at,
       pu.full_name AS assigned_user_name,
       p.name AS project_name,
       t.owner_id
FROM tasks t
LEFT JOIN platform_users pu ON pu.owner_id = t.owner_id
LEFT JOIN projects p ON p.id = t.project_id
AND p.owner_id = t.owner_id
WHERE t.owner_id = 1
  AND pu.email = 'prebad50@gmail.com'
2025-07-02 17:29:08,151 - INFO - Raw DB data retrieved: 290 rows
2025-07-02 17:29:08,154 - INFO - Sample data: {'task_id': 2, 'title': 'Develop Ticket Categorization Model', 'status': 'Duplicate', 'priority': '2', 'labels': '[]', 'estimate': 13.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 38), 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 46), 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 37), 'assigned_user_name': 'prebad50@gmail.com', 'project_name': None, 'owner_id': 1}
2025-07-02 17:29:08,168 - INFO - NO TEMPLATE
2025-07-02 17:29:08,172 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:29:08,915 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:29:43,989 - INFO - Client disconnected from WebSocket
2025-07-02 17:29:45,330 - INFO - chat_id_enc None
2025-07-02 17:29:45,330 - INFO - Generated unique_id_with_template: uid_431ecd628e9c4b7a8a971f518f66b925_6ec810aaeb649047_1751477385330
2025-07-02 17:29:45,330 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:29:45,332 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:29:45,333 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:29:45,333 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:29:45,333 - INFO - Generated unique_id_with_template: uid_431ecd628e9c4b7a8a971f518f66b925_6ec810aaeb649047_1751477385330
2025-07-02 17:29:45,333 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:29:45,711 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:29:45,749 - INFO - Intent classification: sql
2025-07-02 17:29:45,770 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:29:45,972 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:29:48,001 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT t.id AS task_id,
       t.title,
       t.status,
       t.priority,
       t.labels,
       t.estimate,
       t.due_date,
       t.source,
       t.created_at AS task_created_at,
       t.updated_at AS task_updated_at,
       u.full_name AS assigned_user_name,
       u.email AS assigned_user_email,
       p.name AS project_name,
       team.name AS team_name
FROM tasks t
LEFT JOIN platform_users u ON t.user_id = u.user_id
AND u.owner_id = 1
LEFT JOIN projects p ON t.project_id = p.id
AND p.owner_id = 1
LEFT JOIN teams team ON t.team_id = team.id
AND team.owner_id = 1
WHERE t.owner_id = 1
  AND ((u.email = 'prebad50@gmail.com'
        AND 'prebad50@gmail.com' LIKE '%@%')
       OR (u.user_id = 'prebad50@gmail.com'
           AND 'prebad50@gmail.com' NOT LIKE '%@%'))
  AND u.owner_id = 1;
2025-07-02 17:29:48,004 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 17:29:48,005 - INFO - Sample data: {'task_id': 6, 'title': 'Create Dashboard for Ticket Insights', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'task_created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'task_updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'assigned_user_name': 'prebad50@gmail.com', 'assigned_user_email': 'prebad50@gmail.com', 'project_name': None, 'team_name': None}
2025-07-02 17:29:48,006 - INFO - NO TEMPLATE
2025-07-02 17:29:48,006 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:29:48,232 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:34:48,152 - INFO - Client disconnected from WebSocket
2025-07-02 17:36:48,354 - INFO - Client disconnected from WebSocket
2025-07-02 17:36:50,032 - INFO - chat_id_enc None
2025-07-02 17:36:50,033 - INFO - Generated unique_id_with_template: uid_35a75ecd6fa649129ebd359060965ce1_867130e009b1aca5_1751477810033
2025-07-02 17:36:50,033 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:36:50,034 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:36:50,035 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:36:50,035 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:36:50,036 - INFO - Generated unique_id_with_template: uid_35a75ecd6fa649129ebd359060965ce1_867130e009b1aca5_1751477810033
2025-07-02 17:36:50,036 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:36:50,240 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:36:50,269 - INFO - Intent classification: sql
2025-07-02 17:36:50,284 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:36:50,647 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:36:51,834 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT t.*,
       pu.full_name AS user_full_name,
       p.name AS project_name,
       t2.name AS team_name
FROM tasks t
LEFT JOIN platform_users pu ON t.user_id = pu.user_id
AND pu.owner_id = 1
LEFT JOIN projects p ON t.project_id = p.id
AND p.owner_id = 1
LEFT JOIN teams t2 ON t.team_id = t2.id
AND t2.owner_id = 1
WHERE t.owner_id = 1
  AND pu.email = 'prebad50@gmail.com';
2025-07-02 17:36:51,837 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 17:36:51,837 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1, 'user_full_name': 'prebad50@gmail.com', 'project_name': None, 'team_name': None}
2025-07-02 17:36:51,839 - INFO - NO TEMPLATE
2025-07-02 17:36:51,840 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:36:52,184 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:36:55,270 - ERROR - Streaming error: 
2025-07-02 17:36:56,484 - INFO - chat_id_enc None
2025-07-02 17:36:56,484 - INFO - Generated unique_id_with_template: uid_57a560f5171c42769c61258b76b5d0ad_e988ea97516af599_1751477816484
2025-07-02 17:36:56,485 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:36:56,486 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:36:56,487 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:36:56,487 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:36:56,487 - INFO - Generated unique_id_with_template: uid_57a560f5171c42769c61258b76b5d0ad_e988ea97516af599_1751477816484
2025-07-02 17:36:56,487 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:36:56,774 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:36:56,801 - INFO - Intent classification: sql
2025-07-02 17:36:56,815 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:36:57,662 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:36:59,258 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON CASE
                           WHEN 'prebad50@gmail.com' LIKE '%@%' THEN platform_users.email = 'prebad50@gmail.com'
                           ELSE platform_users.user_id = 'prebad50@gmail.com'
                       END
WHERE tasks.owner_id = 1
  AND platform_users.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com'
        AND tasks.user_id = platform_users.user_id)
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND tasks.user_id = platform_users.user_id));
2025-07-02 17:36:59,263 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 17:36:59,264 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1}
2025-07-02 17:36:59,265 - INFO - NO TEMPLATE
2025-07-02 17:36:59,266 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:36:59,538 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:37:53,465 - INFO - Client disconnected from WebSocket
2025-07-02 17:37:54,754 - INFO - chat_id_enc None
2025-07-02 17:37:54,754 - INFO - Generated unique_id_with_template: uid_24d5808ef94545e6bb7bd95b2bcf7dea_9545840795038f10_1751477874754
2025-07-02 17:37:54,755 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:37:54,755 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:37:54,756 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:37:54,756 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:37:54,756 - INFO - Generated unique_id_with_template: uid_24d5808ef94545e6bb7bd95b2bcf7dea_9545840795038f10_1751477874754
2025-07-02 17:37:54,756 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:37:55,044 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:37:55,111 - INFO - Intent classification: sql
2025-07-02 17:37:55,129 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:37:55,313 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:37:57,028 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON (CASE
                            WHEN 'prebad50@gmail.com' LIKE '%@%' THEN platform_users.email = 'prebad50@gmail.com'
                            ELSE platform_users.user_id = 'prebad50@gmail.com'
                        END)
WHERE tasks.owner_id = 1
  AND platform_users.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com'
        AND tasks.user_id = platform_users.user_id)
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND tasks.user_id = platform_users.user_id));
2025-07-02 17:37:57,033 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 17:37:57,033 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1}
2025-07-02 17:37:57,034 - INFO - NO TEMPLATE
2025-07-02 17:37:57,035 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:37:57,458 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:38:25,674 - INFO - Client disconnected from WebSocket
2025-07-02 17:38:26,936 - INFO - chat_id_enc None
2025-07-02 17:38:26,936 - INFO - Generated unique_id_with_template: uid_e9adfb0b771d48708072bc1f0780c54b_115091e11dcb9151_1751477906936
2025-07-02 17:38:26,937 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:38:26,938 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:38:26,939 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:38:26,940 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:38:26,940 - INFO - Generated unique_id_with_template: uid_e9adfb0b771d48708072bc1f0780c54b_115091e11dcb9151_1751477906936
2025-07-02 17:38:26,940 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:38:27,358 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:38:27,483 - INFO - Intent classification: sql
2025-07-02 17:38:27,502 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:38:27,746 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:38:29,260 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON CASE
                           WHEN 'prebad50@gmail.com' LIKE '%@%' THEN platform_users.email = 'prebad50@gmail.com'
                           ELSE platform_users.user_id = 'prebad50@gmail.com'
                       END
WHERE tasks.owner_id = 1
  AND platform_users.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com'
        AND tasks.user_id = platform_users.user_id)
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND tasks.user_id = platform_users.user_id));
2025-07-02 17:38:29,265 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 17:38:29,265 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1}
2025-07-02 17:38:29,266 - INFO - NO TEMPLATE
2025-07-02 17:38:29,267 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:38:29,480 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:38:55,510 - INFO - Client disconnected from WebSocket
2025-07-02 17:38:56,891 - INFO - chat_id_enc None
2025-07-02 17:38:56,891 - INFO - Generated unique_id_with_template: uid_8a1e9ec457b34eb891eda75012022a78_c6da84ac7cce8216_1751477936891
2025-07-02 17:38:56,892 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:38:56,893 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:38:56,893 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:38:56,893 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:38:56,894 - INFO - Generated unique_id_with_template: uid_8a1e9ec457b34eb891eda75012022a78_c6da84ac7cce8216_1751477936891
2025-07-02 17:38:56,894 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:38:57,185 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:38:57,199 - INFO - Intent classification: sql
2025-07-02 17:38:57,214 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:38:57,542 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:38:58,149 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT t.*
FROM tasks t
JOIN platform_users pu ON pu.owner_id = 1
WHERE t.owner_id = 1
  AND pu.owner_id = 1
  AND pu.email = 'prebad50@gmail.com';
2025-07-02 17:38:58,159 - INFO - Raw DB data retrieved: 290 rows
2025-07-02 17:38:58,160 - INFO - Sample data: {'id': 2, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': 'd181b6a9-2a96-480f-b82d-5a4c94f7a11b', 'user_id': '1d66d358-c981-4563-917f-8e8b35b497e6', 'title': 'Develop Ticket Categorization Model', 'description': 'Design and implement a machine learning model to categorize support tickets based on their content. Acceptance criteria: Model accurately categorizes tickets with at least 85% accuracy during testing.', 'status': 'Duplicate', 'priority': '2', 'labels': '[]', 'estimate': 13.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 38), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 46), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 37), 'owner_id': 1}
2025-07-02 17:38:58,170 - INFO - NO TEMPLATE
2025-07-02 17:38:58,174 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:38:59,996 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:39:16,873 - INFO - Client disconnected from WebSocket
2025-07-02 17:39:18,240 - INFO - chat_id_enc None
2025-07-02 17:39:18,241 - INFO - Generated unique_id_with_template: uid_f7260a2e82a3479d9c6b92f11bd1ef0f_dcb0605be927e1c9_1751477958241
2025-07-02 17:39:18,241 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:39:18,242 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:39:18,243 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:39:18,243 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:39:18,243 - INFO - Generated unique_id_with_template: uid_f7260a2e82a3479d9c6b92f11bd1ef0f_dcb0605be927e1c9_1751477958241
2025-07-02 17:39:18,244 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:39:18,696 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:39:18,699 - INFO - Intent classification: sql
2025-07-02 17:39:18,716 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:39:18,936 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:39:19,523 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.id
WHERE tasks.owner_id = 1
  AND platform_users.email = 'prebad50@gmail.com';
2025-07-02 17:39:19,528 - INFO - Raw DB data retrieved: 91 rows
2025-07-02 17:39:19,529 - INFO - Sample data: {'id': 2, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': 'd181b6a9-2a96-480f-b82d-5a4c94f7a11b', 'user_id': '1d66d358-c981-4563-917f-8e8b35b497e6', 'title': 'Develop Ticket Categorization Model', 'description': 'Design and implement a machine learning model to categorize support tickets based on their content. Acceptance criteria: Model accurately categorizes tickets with at least 85% accuracy during testing.', 'status': 'Duplicate', 'priority': '2', 'labels': '[]', 'estimate': 13.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 38), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 46), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 37), 'owner_id': 1}
2025-07-02 17:39:19,532 - INFO - NO TEMPLATE
2025-07-02 17:39:19,533 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:39:20,106 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:43:27,880 - INFO - Client disconnected from WebSocket
2025-07-02 17:43:29,111 - INFO - chat_id_enc None
2025-07-02 17:43:29,111 - INFO - Generated unique_id_with_template: uid_901d88c2aa124f25abc45bdea8b36249_4c4e7c11607296ab_1751478209111
2025-07-02 17:43:29,111 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:43:29,112 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:43:29,113 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:43:29,113 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:43:29,113 - INFO - Generated unique_id_with_template: uid_901d88c2aa124f25abc45bdea8b36249_4c4e7c11607296ab_1751478209111
2025-07-02 17:43:29,113 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:43:29,348 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:43:29,379 - INFO - Intent classification: sql
2025-07-02 17:43:29,396 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:43:30,295 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:43:31,793 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON CASE
                           WHEN 'prebad50@gmail.com' LIKE '%@%' THEN platform_users.email = 'prebad50@gmail.com'
                           ELSE platform_users.user_id = 'prebad50@gmail.com'
                       END
WHERE tasks.owner_id = 1
  AND platform_users.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com'
        AND tasks.user_id = platform_users.user_id)
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND tasks.user_id = platform_users.user_id));
2025-07-02 17:43:31,797 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 17:43:31,798 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1}
2025-07-02 17:43:31,799 - INFO - NO TEMPLATE
2025-07-02 17:43:31,800 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:43:32,190 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:45:18,805 - INFO - Client disconnected from WebSocket
2025-07-02 17:45:20,145 - INFO - chat_id_enc None
2025-07-02 17:45:20,145 - INFO - Generated unique_id_with_template: uid_1d75eea668fa4975baffebc2542710f6_0bafaa6746a98bce_1751478320145
2025-07-02 17:45:20,146 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:45:20,148 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:45:20,149 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:45:20,149 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:45:20,149 - INFO - Generated unique_id_with_template: uid_1d75eea668fa4975baffebc2542710f6_0bafaa6746a98bce_1751478320145
2025-07-02 17:45:20,149 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:45:20,423 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:45:20,446 - INFO - Intent classification: sql
2025-07-02 17:45:20,466 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:45:21,116 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:45:21,657 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.id
WHERE tasks.owner_id = 1
  AND platform_users.email = 'prebad50@gmail.com';
2025-07-02 17:45:21,664 - INFO - Raw DB data retrieved: 91 rows
2025-07-02 17:45:21,664 - INFO - Sample data: {'id': 2, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': 'd181b6a9-2a96-480f-b82d-5a4c94f7a11b', 'user_id': '1d66d358-c981-4563-917f-8e8b35b497e6', 'title': 'Develop Ticket Categorization Model', 'description': 'Design and implement a machine learning model to categorize support tickets based on their content. Acceptance criteria: Model accurately categorizes tickets with at least 85% accuracy during testing.', 'status': 'Duplicate', 'priority': '2', 'labels': '[]', 'estimate': 13.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 38), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 46), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 37), 'owner_id': 1}
2025-07-02 17:45:21,669 - INFO - NO TEMPLATE
2025-07-02 17:45:21,671 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:45:22,446 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:53:18,154 - INFO - Client disconnected from WebSocket
2025-07-02 17:53:20,348 - INFO - chat_id_enc None
2025-07-02 17:53:20,349 - INFO - Generated unique_id_with_template: uid_5250cce25f624a9390f20bb5b9c1eabf_3fdbe58daaabec18_1751478800349
2025-07-02 17:53:20,349 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:53:20,351 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:53:20,352 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:53:20,352 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:53:20,353 - INFO - Generated unique_id_with_template: uid_5250cce25f624a9390f20bb5b9c1eabf_3fdbe58daaabec18_1751478800349
2025-07-02 17:53:20,353 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:53:20,851 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:53:20,870 - INFO - Intent classification: sql
2025-07-02 17:53:20,907 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:53:21,307 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:53:22,522 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON (platform_users.email = 'prebad50@gmail.com'
                        AND platform_users.owner_id = 1)
OR (platform_users.user_id = 'prebad50@gmail.com'
    AND platform_users.owner_id = 1)
WHERE tasks.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com'
        AND tasks.user_id = platform_users.user_id)
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND tasks.user_id = platform_users.user_id));
2025-07-02 17:53:22,525 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 17:53:22,526 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1}
2025-07-02 17:53:22,527 - INFO - NO TEMPLATE
2025-07-02 17:53:22,527 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:53:23,694 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:57:33,893 - INFO - Client disconnected from WebSocket
2025-07-02 17:57:35,206 - INFO - chat_id_enc None
2025-07-02 17:57:35,206 - INFO - Generated unique_id_with_template: uid_5d1980e66ef74efab6607be75b89192e_922b991b18dd4815_1751479055206
2025-07-02 17:57:35,207 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 17:57:35,208 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 17:57:35,208 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 17:57:35,208 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 17:57:35,209 - INFO - Generated unique_id_with_template: uid_5d1980e66ef74efab6607be75b89192e_922b991b18dd4815_1751479055206
2025-07-02 17:57:35,209 - INFO - User metrics loaded: 4 metrics
2025-07-02 17:57:35,516 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:57:35,549 - INFO - Intent classification: sql
2025-07-02 17:57:35,565 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 17:57:35,950 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 17:57:37,265 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON CASE
                           WHEN 'prebad50@gmail.com' LIKE '%@%' THEN platform_users.email = 'prebad50@gmail.com'
                           ELSE platform_users.user_id = 'prebad50@gmail.com'
                       END
WHERE tasks.owner_id = 1
  AND platform_users.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com'
        AND tasks.user_id = platform_users.user_id)
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND tasks.user_id = platform_users.user_id))
2025-07-02 17:57:37,273 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 17:57:37,273 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1}
2025-07-02 17:57:37,275 - INFO - NO TEMPLATE
2025-07-02 17:57:37,275 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 17:57:38,064 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:09:00,117 - INFO - Client disconnected from WebSocket
2025-07-02 18:16:33,534 - INFO - chat_id_enc None
2025-07-02 18:16:33,534 - INFO - Generated unique_id_with_template: uid_2d11ea03ad9d416a81219d6ce57b12fb_fe89dea04bbf2ad6_1751480193534
2025-07-02 18:16:33,535 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 18:16:33,540 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 18:16:33,542 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 18:16:33,542 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 18:16:33,542 - INFO - Generated unique_id_with_template: uid_2d11ea03ad9d416a81219d6ce57b12fb_fe89dea04bbf2ad6_1751480193534
2025-07-02 18:16:33,542 - INFO - User metrics loaded: 4 metrics
2025-07-02 18:16:34,974 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:16:35,039 - INFO - Intent classification: sql
2025-07-02 18:16:35,068 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 18:16:35,861 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:16:36,745 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON CASE
                           WHEN 'prebad50@gmail.com' LIKE '%@%' THEN platform_users.email = 'prebad50@gmail.com'
                           ELSE platform_users.user_id = 'prebad50@gmail.com'
                       END
WHERE tasks.owner_id = 1
  AND platform_users.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com'
        AND tasks.user_id = platform_users.user_id)
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND tasks.user_id = platform_users.user_id));
2025-07-02 18:16:36,750 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 18:16:36,751 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1}
2025-07-02 18:16:36,753 - INFO - NO TEMPLATE
2025-07-02 18:16:36,753 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 18:16:37,357 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:17:52,128 - INFO - Client disconnected from WebSocket
2025-07-02 18:17:53,618 - INFO - chat_id_enc None
2025-07-02 18:17:53,618 - INFO - Generated unique_id_with_template: uid_e258172b604740f289894675fde5b501_9fdb6840d07444c0_1751480273618
2025-07-02 18:17:53,624 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 18:17:53,625 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 18:17:53,626 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 18:17:53,626 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 18:17:53,626 - INFO - Generated unique_id_with_template: uid_e258172b604740f289894675fde5b501_9fdb6840d07444c0_1751480273618
2025-07-02 18:17:53,626 - INFO - User metrics loaded: 4 metrics
2025-07-02 18:17:54,110 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:17:54,130 - INFO - Intent classification: sql
2025-07-02 18:17:54,155 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 18:17:55,630 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:17:57,034 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.id,
       tasks.title,
       tasks.status,
       tasks.priority,
       tasks.created_at,
       tasks.updated_at,
       platform_users.full_name AS user_full_name,
       platform_users.email AS user_email,
       projects.name AS project_name,
       teams.name AS team_name
FROM tasks
LEFT JOIN platform_users ON tasks.user_id = platform_users.user_id
AND platform_users.owner_id = 1
LEFT JOIN projects ON tasks.project_id = projects.id
AND projects.owner_id = 1
LEFT JOIN teams ON tasks.team_id = teams.id
AND teams.owner_id = 1
WHERE tasks.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com')
       OR (platform_users.user_id = 'prebad50@gmail.com'))
2025-07-02 18:17:57,042 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 18:17:57,042 - INFO - Sample data: {'id': 6, 'title': 'Create Dashboard for Ticket Insights', 'status': 'Backlog', 'priority': '3', 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'user_full_name': 'prebad50@gmail.com', 'user_email': 'prebad50@gmail.com', 'project_name': None, 'team_name': None}
2025-07-02 18:17:57,043 - INFO - NO TEMPLATE
2025-07-02 18:17:57,044 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 18:17:57,296 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:20:38,710 - INFO - Client disconnected from WebSocket
2025-07-02 18:21:08,089 - INFO - chat_id_enc None
2025-07-02 18:21:08,090 - INFO - Generated unique_id_with_template: uid_0feba035e7d9436b87b4d125949cb626_b7321bd56df94fdc_1751480468090
2025-07-02 18:21:08,091 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 18:21:08,094 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 18:21:08,095 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 18:21:08,095 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 18:21:08,095 - INFO - Generated unique_id_with_template: uid_0feba035e7d9436b87b4d125949cb626_b7321bd56df94fdc_1751480468090
2025-07-02 18:21:08,095 - INFO - User metrics loaded: 4 metrics
2025-07-02 18:21:09,089 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:21:09,154 - INFO - Intent classification: sql
2025-07-02 18:21:09,182 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-07-02 18:17:55\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 18:21:09,461 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:21:10,249 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON CASE
                           WHEN 'prebad50@gmail.com' LIKE '%@%' THEN platform_users.email = 'prebad50@gmail.com'
                           ELSE platform_users.user_id = 'prebad50@gmail.com'
                       END
WHERE tasks.owner_id = 1
  AND platform_users.owner_id = 1
  AND tasks.user_id = platform_users.user_id;
2025-07-02 18:21:10,259 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 18:21:10,263 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1}
2025-07-02 18:21:10,267 - INFO - NO TEMPLATE
2025-07-02 18:21:10,267 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 18:21:11,232 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:22:44,192 - INFO - Client disconnected from WebSocket
2025-07-02 18:22:45,642 - INFO - chat_id_enc None
2025-07-02 18:22:45,642 - INFO - Generated unique_id_with_template: uid_39807b79d9bb496e9687ef29e7f6d4c9_1f51495c297a6e86_1751480565642
2025-07-02 18:22:45,643 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 18:22:45,644 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 18:22:45,645 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 18:22:45,645 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 18:22:45,646 - INFO - Generated unique_id_with_template: uid_39807b79d9bb496e9687ef29e7f6d4c9_1f51495c297a6e86_1751480565642
2025-07-02 18:22:45,646 - INFO - User metrics loaded: 4 metrics
2025-07-02 18:22:45,895 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:22:45,921 - INFO - Intent classification: sql
2025-07-02 18:22:45,940 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-07-02 18:17:55\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 18:22:46,240 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:22:48,468 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT t.id AS task_id,
       t.title,
       t.status,
       t.created_at,
       t.updated_at,
       u.full_name AS assigned_user_name,
       u.email AS assigned_user_email,
       p.name AS project_name,
       s.status AS jira_status,
       t.source,
       t.priority,
       t.estimate,
       t.due_date
FROM tasks t
LEFT JOIN platform_users u ON u.owner_id = 1
AND u.id = t.user_id
LEFT JOIN projects p ON p.owner_id = 1
AND p.id = t.project_id
LEFT JOIN status_jira s ON s.owner_id = 1
AND s.platform_id = CAST(t.platform_id AS UNSIGNED)
AND s.user_id = u.user_id
WHERE t.owner_id = 1
  AND ((u.email = 'prebad50@gmail.com')
       OR (u.user_id = 'prebad50@gmail.com'))
2025-07-02 18:22:48,469 - ERROR - SQL Query Error for user_id 1: (1267, "Illegal mix of collations (utf8mb4_unicode_ci,IMPLICIT) and (utf8mb4_0900_ai_ci,IMPLICIT) for operation '='")
2025-07-02 18:22:48,470 - INFO - NO TEMPLATE
2025-07-02 18:22:48,470 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 18:22:49,187 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:22:56,849 - INFO - Client disconnected from WebSocket
2025-07-02 18:22:58,329 - INFO - chat_id_enc None
2025-07-02 18:22:58,330 - INFO - Generated unique_id_with_template: uid_aed092ec8f5e4ee4ad094b888c481c93_1eb3a8b2f5f12777_1751480578330
2025-07-02 18:22:58,330 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 18:22:58,332 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 18:22:58,333 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 18:22:58,333 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 18:22:58,333 - INFO - Generated unique_id_with_template: uid_aed092ec8f5e4ee4ad094b888c481c93_1eb3a8b2f5f12777_1751480578330
2025-07-02 18:22:58,333 - INFO - User metrics loaded: 4 metrics
2025-07-02 18:22:59,569 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:22:59,671 - INFO - Intent classification: sql
2025-07-02 18:22:59,697 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-07-02 18:17:55\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 18:23:00,331 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:23:02,729 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT t.*
FROM tasks t
JOIN platform_users pu ON pu.owner_id = 1
WHERE t.owner_id = 1
  AND pu.owner_id = 1
  AND ((pu.email LIKE '%prebad50@gmail.com%'
        AND pu.email LIKE '%@%')
       AND t.user_id = pu.user_id
       OR (pu.email LIKE '%prebad50@gmail.com%'
           AND pu.email NOT LIKE '%@%')
       AND t.user_id = pu.user_id)
  AND ((pu.email LIKE '%prebad50@gmail.com%'
        AND pu.email LIKE '%@%')
       AND pu.email = 'prebad50@gmail.com'
       OR (pu.email LIKE '%prebad50@gmail.com%'
           AND pu.email NOT LIKE '%@%')
       AND pu.user_id = 'prebad50@gmail.com');
2025-07-02 18:23:02,732 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 18:23:02,732 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1}
2025-07-02 18:23:02,734 - INFO - NO TEMPLATE
2025-07-02 18:23:02,735 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 18:23:03,259 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:23:56,345 - INFO - Client disconnected from WebSocket
2025-07-02 18:23:58,154 - INFO - chat_id_enc None
2025-07-02 18:23:58,154 - INFO - Generated unique_id_with_template: uid_fbe7e31f1b16478fb30bd72702fe3901_ea11fcbbca0b221f_1751480638154
2025-07-02 18:23:58,154 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 18:23:58,155 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 18:23:58,156 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 18:23:58,156 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 18:23:58,156 - INFO - Generated unique_id_with_template: uid_fbe7e31f1b16478fb30bd72702fe3901_ea11fcbbca0b221f_1751480638154
2025-07-02 18:23:58,156 - INFO - User metrics loaded: 4 metrics
2025-07-02 18:23:58,423 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:23:58,458 - INFO - Intent classification: sql
2025-07-02 18:23:58,477 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-07-02 18:17:55\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 18:23:58,987 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:23:59,929 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON CASE
                           WHEN 'prebad50@gmail.com' LIKE '%@%' THEN platform_users.email = 'prebad50@gmail.com'
                           ELSE platform_users.user_id = 'prebad50@gmail.com'
                       END
WHERE tasks.owner_id = 1
  AND platform_users.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com')
       OR (platform_users.user_id = 'prebad50@gmail.com'));
2025-07-02 18:23:59,947 - INFO - Raw DB data retrieved: 290 rows
2025-07-02 18:23:59,947 - INFO - Sample data: {'id': 2, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': 'd181b6a9-2a96-480f-b82d-5a4c94f7a11b', 'user_id': '1d66d358-c981-4563-917f-8e8b35b497e6', 'title': 'Develop Ticket Categorization Model', 'description': 'Design and implement a machine learning model to categorize support tickets based on their content. Acceptance criteria: Model accurately categorizes tickets with at least 85% accuracy during testing.', 'status': 'Duplicate', 'priority': '2', 'labels': '[]', 'estimate': 13.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 38), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 46), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 37), 'owner_id': 1}
2025-07-02 18:23:59,964 - INFO - NO TEMPLATE
2025-07-02 18:23:59,969 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 18:24:01,399 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:28:34,045 - INFO - Client disconnected from WebSocket
2025-07-02 18:30:36,169 - INFO - chat_id_enc None
2025-07-02 18:30:36,170 - INFO - Generated unique_id_with_template: uid_a6652b88e676448385175c308b3a488c_5432ae6509772fcc_1751481036170
2025-07-02 18:30:36,170 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 18:30:36,171 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 18:30:36,172 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 18:30:36,172 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 18:30:36,172 - INFO - Generated unique_id_with_template: uid_a6652b88e676448385175c308b3a488c_5432ae6509772fcc_1751481036170
2025-07-02 18:30:36,172 - INFO - User metrics loaded: 4 metrics
2025-07-02 18:30:36,457 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:30:36,469 - INFO - Intent classification: sql
2025-07-02 18:30:36,509 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-07-02 18:17:55\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 18:30:36,807 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:30:39,000 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT t.id AS task_id,
       t.title,
       t.status,
       t.priority,
       t.labels,
       t.estimate,
       t.due_date,
       t.source,
       t.created_at AS task_created_at,
       u.full_name AS assigned_user_name,
       u.email AS assigned_user_email,
       p.name AS project_name,
       s.status AS jira_status,
       t.owner_id
FROM tasks t
LEFT JOIN platform_users u ON t.user_id = u.user_id
AND t.owner_id = u.owner_id
LEFT JOIN projects p ON t.project_id = p.id
AND t.owner_id = p.owner_id
LEFT JOIN status_jira s ON u.user_id = s.user_id
AND s.owner_id = u.owner_id
WHERE t.owner_id = 1
  AND ((u.email = 'prebad50@gmail.com')
       OR (u.user_id = 'prebad50@gmail.com'));
2025-07-02 18:30:39,002 - ERROR - SQL Query Error for user_id 1: (1267, "Illegal mix of collations (utf8mb4_0900_ai_ci,IMPLICIT) and (utf8mb4_unicode_ci,IMPLICIT) for operation '='")
2025-07-02 18:30:39,003 - INFO - NO TEMPLATE
2025-07-02 18:30:39,003 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 18:30:39,225 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:31:12,551 - INFO - Client disconnected from WebSocket
2025-07-02 18:31:13,832 - INFO - chat_id_enc None
2025-07-02 18:31:13,836 - INFO - Generated unique_id_with_template: uid_a67182b3df474ed0828799e2c12c6b8a_42cb64d21379165b_1751481073832
2025-07-02 18:31:13,837 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 18:31:13,840 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 18:31:13,842 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 18:31:13,842 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 18:31:13,842 - INFO - Generated unique_id_with_template: uid_a67182b3df474ed0828799e2c12c6b8a_42cb64d21379165b_1751481073832
2025-07-02 18:31:13,842 - INFO - User metrics loaded: 4 metrics
2025-07-02 18:31:14,093 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:31:14,120 - INFO - Intent classification: sql
2025-07-02 18:31:14,144 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-07-02 18:17:55\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 18:31:14,449 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:31:15,771 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON platform_users.owner_id = 1
WHERE tasks.owner_id = 1
  AND ((platform_users.email LIKE '%prebad50@gmail.com%'
        AND platform_users.email IS NOT NULL)
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND platform_users.email IS NULL))
  AND ((platform_users.email LIKE '%prebad50@gmail.com%'
        AND platform_users.email = 'prebad50@gmail.com')
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND platform_users.user_id = 'prebad50@gmail.com'))
2025-07-02 18:31:15,786 - INFO - Raw DB data retrieved: 290 rows
2025-07-02 18:31:15,786 - INFO - Sample data: {'id': 2, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': 'd181b6a9-2a96-480f-b82d-5a4c94f7a11b', 'user_id': '1d66d358-c981-4563-917f-8e8b35b497e6', 'title': 'Develop Ticket Categorization Model', 'description': 'Design and implement a machine learning model to categorize support tickets based on their content. Acceptance criteria: Model accurately categorizes tickets with at least 85% accuracy during testing.', 'status': 'Duplicate', 'priority': '2', 'labels': '[]', 'estimate': 13.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 38), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 46), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 37), 'owner_id': 1}
2025-07-02 18:31:15,798 - INFO - NO TEMPLATE
2025-07-02 18:31:15,802 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 18:31:17,229 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:31:21,535 - ERROR - Streaming error: 
2025-07-02 18:31:22,846 - INFO - chat_id_enc None
2025-07-02 18:31:22,846 - INFO - Generated unique_id_with_template: uid_9acbedfada8f4f8aaad90341cc255f45_3ca270633afe4e28_1751481082846
2025-07-02 18:31:22,847 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 18:31:22,847 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 18:31:22,848 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 18:31:22,848 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 18:31:22,848 - INFO - Generated unique_id_with_template: uid_9acbedfada8f4f8aaad90341cc255f45_3ca270633afe4e28_1751481082846
2025-07-02 18:31:22,848 - INFO - User metrics loaded: 4 metrics
2025-07-02 18:31:23,144 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:31:23,166 - INFO - Intent classification: sql
2025-07-02 18:31:23,185 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-07-02 18:17:55\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 18:31:23,411 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:31:24,957 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON CASE
                           WHEN 'prebad50@gmail.com' LIKE '%@%' THEN platform_users.email = 'prebad50@gmail.com'
                           ELSE platform_users.user_id = 'prebad50@gmail.com'
                       END
WHERE tasks.owner_id = 1
  AND platform_users.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com'
        AND tasks.user_id = platform_users.user_id)
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND tasks.user_id = platform_users.user_id));
2025-07-02 18:31:24,961 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 18:31:24,962 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1}
2025-07-02 18:31:24,963 - INFO - NO TEMPLATE
2025-07-02 18:31:24,964 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 18:31:25,386 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:31:35,030 - INFO - Client disconnected from WebSocket
2025-07-02 18:31:36,421 - INFO - chat_id_enc None
2025-07-02 18:31:36,422 - INFO - Generated unique_id_with_template: uid_5539cd6941ba42b7b895625a0eb3f5d8_5a889a345c484127_1751481096422
2025-07-02 18:31:36,422 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 18:31:36,423 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 18:31:36,424 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 18:31:36,424 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 18:31:36,424 - INFO - Generated unique_id_with_template: uid_5539cd6941ba42b7b895625a0eb3f5d8_5a889a345c484127_1751481096422
2025-07-02 18:31:36,424 - INFO - User metrics loaded: 4 metrics
2025-07-02 18:31:36,717 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:31:36,780 - INFO - Intent classification: sql
2025-07-02 18:31:36,807 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-07-02 18:17:55\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 18:31:37,025 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:31:38,428 - INFO - chat_id_enc None
2025-07-02 18:31:38,429 - INFO - Generated unique_id_with_template: uid_05534efc35f94b6f9c08b666c37517f9_bc13b6580051a9af_1751481098429
2025-07-02 18:31:38,429 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 18:31:38,430 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 18:31:38,431 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 18:31:38,431 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 18:31:38,431 - INFO - Generated unique_id_with_template: uid_05534efc35f94b6f9c08b666c37517f9_bc13b6580051a9af_1751481098429
2025-07-02 18:31:38,431 - INFO - User metrics loaded: 4 metrics
2025-07-02 18:31:38,650 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:31:38,660 - INFO - Intent classification: sql
2025-07-02 18:31:38,677 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-07-02 18:17:55\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 18:31:38,825 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.id,
       tasks.title,
       tasks.status,
       tasks.source,
       tasks.created_at,
       tasks.updated_at,
       platform_users.full_name AS user_full_name,
       platform_users.email AS user_email,
       projects.name AS project_name,
       teams.name AS team_name
FROM tasks
LEFT JOIN platform_users ON tasks.user_id = platform_users.user_id
AND platform_users.owner_id = 1
LEFT JOIN projects ON tasks.project_id = projects.id
AND projects.owner_id = 1
LEFT JOIN teams ON tasks.team_id = teams.id
AND teams.owner_id = 1
WHERE tasks.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com'
        AND platform_users.email LIKE '%@%')
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND platform_users.email NOT LIKE '%@%'))
  AND platform_users.owner_id = 1;
2025-07-02 18:31:38,828 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 18:31:38,828 - INFO - Sample data: {'id': 6, 'title': 'Create Dashboard for Ticket Insights', 'status': 'Backlog', 'source': 'linear', 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'user_full_name': 'prebad50@gmail.com', 'user_email': 'prebad50@gmail.com', 'project_name': None, 'team_name': None}
2025-07-02 18:31:38,829 - ERROR - SQL Query Error for user_id 1: 
2025-07-02 18:31:38,896 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:31:40,200 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON CASE
                           WHEN 'prebad50@gmail.com' LIKE '%@%' THEN platform_users.email = 'prebad50@gmail.com'
                           ELSE platform_users.user_id = 'prebad50@gmail.com'
                       END
WHERE tasks.owner_id = 1
  AND platform_users.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com'
        AND tasks.user_id = platform_users.user_id)
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND tasks.user_id = platform_users.user_id));
2025-07-02 18:31:40,204 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 18:31:40,205 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1}
2025-07-02 18:31:40,207 - INFO - NO TEMPLATE
2025-07-02 18:31:40,207 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 18:31:40,424 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:31:48,016 - INFO - Client disconnected from WebSocket
2025-07-02 18:31:49,406 - INFO - chat_id_enc None
2025-07-02 18:31:49,406 - INFO - Generated unique_id_with_template: uid_b7623634658545c0bb8b5a73f29e8a99_6060bf1597e199be_1751481109406
2025-07-02 18:31:49,406 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 18:31:49,407 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 18:31:49,408 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 18:31:49,409 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 18:31:49,409 - INFO - Generated unique_id_with_template: uid_b7623634658545c0bb8b5a73f29e8a99_6060bf1597e199be_1751481109406
2025-07-02 18:31:49,409 - INFO - User metrics loaded: 4 metrics
2025-07-02 18:31:49,918 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:31:49,946 - INFO - Intent classification: sql
2025-07-02 18:31:49,967 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-07-02 18:17:55\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 18:31:50,179 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:31:50,787 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON platform_users.email LIKE '%prebad50@gmail.com%'
AND platform_users.owner_id = 1
AND platform_users.email = 'prebad50@gmail.com'
WHERE tasks.owner_id = 1
  AND tasks.user_id = platform_users.user_id;
2025-07-02 18:31:50,791 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 18:31:50,791 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1}
2025-07-02 18:31:50,793 - INFO - NO TEMPLATE
2025-07-02 18:31:50,793 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 18:31:51,434 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:31:56,595 - INFO - Client disconnected from WebSocket
2025-07-02 18:31:57,832 - INFO - chat_id_enc None
2025-07-02 18:31:57,832 - INFO - Generated unique_id_with_template: uid_c438291958774e279db0b50a2ffcf701_3da1fd8deebe3fbd_1751481117832
2025-07-02 18:31:57,833 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 18:31:57,834 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 18:31:57,835 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 18:31:57,835 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 18:31:57,835 - INFO - Generated unique_id_with_template: uid_c438291958774e279db0b50a2ffcf701_3da1fd8deebe3fbd_1751481117832
2025-07-02 18:31:57,835 - INFO - User metrics loaded: 4 metrics
2025-07-02 18:31:58,037 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:31:58,090 - INFO - Intent classification: sql
2025-07-02 18:31:58,110 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-07-02 18:17:55\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 18:31:58,303 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:31:58,884 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT t.*
FROM tasks t
JOIN platform_users pu ON pu.email LIKE '%prebad50@gmail.com%'
AND pu.owner_id = 1
WHERE t.owner_id = 1
  AND t.user_id = pu.user_id;
2025-07-02 18:31:58,886 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 18:31:58,886 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1}
2025-07-02 18:31:58,888 - INFO - NO TEMPLATE
2025-07-02 18:31:58,888 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 18:31:59,157 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:34:58,767 - INFO - Client disconnected from WebSocket
2025-07-02 18:35:00,178 - INFO - chat_id_enc None
2025-07-02 18:35:00,179 - INFO - Generated unique_id_with_template: uid_d1f54039c7ec45b186134c61f4cc624c_8b949b4fcdd3263d_1751481300179
2025-07-02 18:35:00,179 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 18:35:00,180 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 18:35:00,181 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 18:35:00,181 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 18:35:00,181 - INFO - Generated unique_id_with_template: uid_d1f54039c7ec45b186134c61f4cc624c_8b949b4fcdd3263d_1751481300179
2025-07-02 18:35:00,181 - INFO - User metrics loaded: 4 metrics
2025-07-02 18:35:00,405 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:35:00,424 - INFO - Intent classification: sql
2025-07-02 18:35:00,443 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-07-02 18:17:55\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 18:35:00,678 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:35:02,228 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON CASE
                           WHEN 'prebad50@gmail.com' LIKE '%@%' THEN platform_users.email = 'prebad50@gmail.com'
                           ELSE platform_users.user_id = 'prebad50@gmail.com'
                       END
WHERE tasks.owner_id = 1
  AND platform_users.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com'
        AND tasks.user_id = platform_users.user_id)
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND tasks.user_id = platform_users.user_id));
2025-07-02 18:35:02,253 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 18:35:02,253 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1}
2025-07-02 18:35:02,255 - INFO - NO TEMPLATE
2025-07-02 18:35:02,256 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 18:35:02,578 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:36:46,924 - INFO - Client disconnected from WebSocket
2025-07-02 18:36:48,237 - INFO - chat_id_enc None
2025-07-02 18:36:48,238 - INFO - Generated unique_id_with_template: uid_abc637a2288d4aefa04894727e66367b_5fc1fbfe0211a316_1751481408238
2025-07-02 18:36:48,238 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 18:36:48,239 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 18:36:48,241 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 18:36:48,244 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 18:36:48,246 - INFO - Generated unique_id_with_template: uid_abc637a2288d4aefa04894727e66367b_5fc1fbfe0211a316_1751481408238
2025-07-02 18:36:48,246 - INFO - User metrics loaded: 4 metrics
2025-07-02 18:36:48,849 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:36:48,877 - INFO - Intent classification: sql
2025-07-02 18:36:48,901 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-07-02 18:17:55\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 18:36:49,138 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:36:50,833 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT t.id AS task_id,
       t.title AS task_title,
       t.status AS task_status,
       t.source AS task_source,
       t.created_at AS task_created_at,
       u.full_name AS user_full_name,
       u.email AS user_email,
       p.name AS project_name,
       team.name AS team_name
FROM tasks t
LEFT JOIN platform_users u ON t.user_id = u.user_id
AND u.owner_id = 1
LEFT JOIN projects p ON t.project_id = p.id
AND p.owner_id = 1
LEFT JOIN teams team ON t.team_id = team.id
AND team.owner_id = 1
WHERE t.owner_id = 1
  AND u.email = 'prebad50@gmail.com';
2025-07-02 18:36:50,837 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 18:36:50,838 - INFO - Sample data: {'task_id': 6, 'task_title': 'Create Dashboard for Ticket Insights', 'task_status': 'Backlog', 'task_source': 'linear', 'task_created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'user_full_name': 'prebad50@gmail.com', 'user_email': 'prebad50@gmail.com', 'project_name': None, 'team_name': None}
2025-07-02 18:36:50,838 - INFO - NO TEMPLATE
2025-07-02 18:36:50,839 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 18:36:51,413 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:37:52,505 - INFO - Client disconnected from WebSocket
2025-07-02 18:37:53,789 - INFO - chat_id_enc None
2025-07-02 18:37:53,790 - INFO - Generated unique_id_with_template: uid_03bd6f42dd104cb29e848edfc0e09ca7_e7e5b6e3d7818a95_1751481473790
2025-07-02 18:37:53,790 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 18:37:53,791 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 18:37:53,792 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 18:37:53,792 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 18:37:53,792 - INFO - Generated unique_id_with_template: uid_03bd6f42dd104cb29e848edfc0e09ca7_e7e5b6e3d7818a95_1751481473790
2025-07-02 18:37:53,792 - INFO - User metrics loaded: 4 metrics
2025-07-02 18:37:54,061 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:37:54,111 - INFO - Intent classification: sql
2025-07-02 18:37:54,152 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-07-02 18:17:55\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 18:37:54,416 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:37:57,690 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT t.id AS task_id,
       t.title,
       t.status,
       t.priority,
       t.labels,
       t.estimate,
       t.due_date,
       t.source,
       t.created_at AS task_created_at,
       t.updated_at AS task_updated_at,
       pu.id AS user_id,
       pu.name AS user_name,
       pu.email AS user_email,
       u.full_name AS owner_full_name,
       p.id AS project_id,
       p.name AS project_name,
       t.owner_id
FROM tasks t
LEFT JOIN platform_users pu ON (pu.email LIKE '%@%'
                                AND pu.email = 'prebad50@gmail.com'
                                AND t.owner_id = 1)
OR (pu.user_id = 'prebad50@gmail.com'
    AND t.owner_id = 1)
LEFT JOIN projects p ON p.id = t.project_id
AND p.owner_id = 1
LEFT JOIN users u ON u.id = t.owner_id
WHERE t.owner_id = 1
  AND ((pu.email LIKE '%@%'
        AND pu.email = 'prebad50@gmail.com')
       OR (pu.user_id = 'prebad50@gmail.com'))
  AND t.is_deleted = 0;
2025-07-02 18:37:57,691 - ERROR - SQL Query Error for user_id 1: (1054, "Unknown column 'u.full_name' in 'field list'")
2025-07-02 18:37:57,692 - INFO - NO TEMPLATE
2025-07-02 18:37:57,692 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 18:37:58,084 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:40:42,990 - INFO - Client disconnected from WebSocket
2025-07-02 18:41:02,652 - INFO - chat_id_enc None
2025-07-02 18:41:02,652 - INFO - Generated unique_id_with_template: uid_90295cb3d644418cab764f0f8a231030_b8d29cf1e480a250_1751481662652
2025-07-02 18:41:02,652 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 18:41:02,653 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 18:41:02,653 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 18:41:02,654 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 18:41:02,654 - INFO - Generated unique_id_with_template: uid_90295cb3d644418cab764f0f8a231030_b8d29cf1e480a250_1751481662652
2025-07-02 18:41:02,654 - INFO - User metrics loaded: 4 metrics
2025-07-02 18:41:02,903 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:41:03,012 - INFO - Intent classification: sql
2025-07-02 18:41:03,032 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-07-02 18:17:55\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 18:41:03,284 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:41:06,019 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT t.id AS task_id,
       t.title,
       t.status,
       t.owner_id,
       pu.full_name AS assigned_user_name,
       pu.email AS assigned_user_email,
       p.name AS project_name,
       s.status AS jira_status,
       t.source,
       t.created_at
FROM tasks t
LEFT JOIN platform_users pu ON pu.owner_id = t.owner_id
AND ((pu.email LIKE '%prebad50@gmail.com%'
      AND pu.email LIKE '%@%')
     AND pu.user_id = t.user_id)
LEFT JOIN projects p ON p.id = t.project_id
AND p.owner_id = t.owner_id
LEFT JOIN status_jira s ON s.platform_id = t.platform_id
AND s.owner_id = t.owner_id
AND s.user_id = pu.user_id
WHERE t.owner_id = 1
  AND ((pu.email LIKE '%prebad50@gmail.com%'
        AND pu.email LIKE '%@%')
       AND pu.user_id = t.user_id
       OR (pu.user_id = 'prebad50@gmail.com'
           AND NOT pu.email LIKE '%@%'));
2025-07-02 18:41:06,021 - ERROR - SQL Query Error for user_id 1: (1267, "Illegal mix of collations (utf8mb4_unicode_ci,IMPLICIT) and (utf8mb4_0900_ai_ci,IMPLICIT) for operation '='")
2025-07-02 18:41:06,021 - INFO - NO TEMPLATE
2025-07-02 18:41:06,022 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 18:41:06,233 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:41:09,633 - ERROR - Streaming error: 
2025-07-02 18:41:10,909 - INFO - chat_id_enc None
2025-07-02 18:41:10,910 - INFO - Generated unique_id_with_template: uid_0262d564f40b4584844bd9cdcbf1b4e5_600ad2ddebabb751_1751481670910
2025-07-02 18:41:10,911 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 18:41:10,912 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 18:41:10,914 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 18:41:10,914 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 18:41:10,914 - INFO - Generated unique_id_with_template: uid_0262d564f40b4584844bd9cdcbf1b4e5_600ad2ddebabb751_1751481670910
2025-07-02 18:41:10,915 - INFO - User metrics loaded: 4 metrics
2025-07-02 18:41:11,112 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:41:11,148 - INFO - Intent classification: sql
2025-07-02 18:41:11,185 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-07-02 18:17:55\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 18:41:11,819 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:41:13,410 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*
FROM tasks
JOIN platform_users ON CASE
                           WHEN 'prebad50@gmail.com' LIKE '%@%' THEN platform_users.email = 'prebad50@gmail.com'
                           ELSE platform_users.user_id = 'prebad50@gmail.com'
                       END
WHERE tasks.owner_id = 1
  AND platform_users.owner_id = 1
  AND ((platform_users.email = 'prebad50@gmail.com'
        AND tasks.user_id = platform_users.user_id)
       OR (platform_users.user_id = 'prebad50@gmail.com'
           AND tasks.user_id = platform_users.user_id));
2025-07-02 18:41:13,413 - INFO - Raw DB data retrieved: 26 rows
2025-07-02 18:41:13,413 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1}
2025-07-02 18:41:13,415 - INFO - NO TEMPLATE
2025-07-02 18:41:13,415 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 18:41:13,822 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:41:41,761 - INFO - Client disconnected from WebSocket
2025-07-02 18:41:43,198 - INFO - chat_id_enc None
2025-07-02 18:41:43,198 - INFO - Generated unique_id_with_template: uid_2049be5c14434a438f2c5e6d7dd2dd68_17f9c2e4e9a5b0bd_1751481703198
2025-07-02 18:41:43,199 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 18:41:43,200 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 18:41:43,200 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 18:41:43,201 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 18:41:43,201 - INFO - Generated unique_id_with_template: uid_2049be5c14434a438f2c5e6d7dd2dd68_17f9c2e4e9a5b0bd_1751481703198
2025-07-02 18:41:43,201 - INFO - User metrics loaded: 4 metrics
2025-07-02 18:41:43,411 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:41:43,449 - INFO - Intent classification: sql
2025-07-02 18:41:43,471 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-07-02 18:17:55\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 18:41:43,714 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:41:47,045 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT t.id AS task_id,
       t.title,
       t.status,
       t.priority,
       t.labels,
       t.estimate,
       t.due_date,
       t.source,
       t.created_at AS task_created_at,
       t.updated_at AS task_updated_at,
       u.full_name AS user_full_name,
       u.email AS user_email,
       p.name AS project_name,
       s.status AS jira_status,
       trello_status.type AS trello_status_type,
       team.name AS team_name
FROM tasks t
LEFT JOIN platform_users u ON u.id = t.user_id
AND u.owner_id = 1
LEFT JOIN projects p ON p.id = t.project_id
AND p.owner_id = 1
LEFT JOIN status_jira s ON s.platform_id = t.platform_id
AND s.owner_id = 1
LEFT JOIN status_trello trello_status ON trello_status.platform_id = t.platform_id
AND trello_status.owner_id = 1
LEFT JOIN teams team ON team.id = t.team_id
AND team.owner_id = 1
WHERE t.owner_id = 1
  AND ((u.email = 'prebad50@gmail.com'
        AND u.email LIKE '%@%')
       OR (u.user_id = 'prebad50@gmail.com'
           AND u.user_id NOT LIKE '%@%'))
2025-07-02 18:41:47,109 - INFO - Raw DB data retrieved: 1581 rows
2025-07-02 18:41:47,109 - INFO - Sample data: {'task_id': 2, 'title': 'Develop Ticket Categorization Model', 'status': 'Duplicate', 'priority': '2', 'labels': '[]', 'estimate': 13.0, 'due_date': None, 'source': 'linear', 'task_created_at': datetime.datetime(2025, 6, 18, 18, 6, 46), 'task_updated_at': datetime.datetime(2025, 6, 19, 10, 21, 37), 'user_full_name': 'prebad50@gmail.com', 'user_email': 'prebad50@gmail.com', 'project_name': None, 'jira_status': None, 'trello_status_type': None, 'team_name': None}
2025-07-02 18:41:47,142 - ERROR - SQL Query Error for user_id 1: 
2025-07-02 18:41:47,736 - INFO - chat_id_enc None
2025-07-02 18:41:47,737 - INFO - Generated unique_id_with_template: uid_be73ef116d054d3ab53a3415522a9835_a67e9da84eb8c0ea_1751481707737
2025-07-02 18:41:47,738 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 18:41:47,739 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 18:41:47,740 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 18:41:47,741 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 18:41:47,741 - INFO - Generated unique_id_with_template: uid_be73ef116d054d3ab53a3415522a9835_a67e9da84eb8c0ea_1751481707737
2025-07-02 18:41:47,741 - INFO - User metrics loaded: 4 metrics
2025-07-02 18:41:47,982 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:41:48,002 - INFO - Intent classification: sql
2025-07-02 18:41:48,038 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-07-02 18:41:45\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 18:41:48,295 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:41:51,993 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT t.id AS task_id,
       t.title AS task_title,
       t.status AS task_status,
       t.priority,
       t.labels,
       t.estimate,
       t.due_date,
       t.source,
       t.created_at AS task_created_at,
       t.updated_at AS task_updated_at,
       u.id AS user_id,
       u.name AS user_name,
       u.email AS user_email,
       p.id AS project_id,
       p.name AS project_name,
       s.id AS team_id,
       s.name AS team_name
FROM tasks t
LEFT JOIN platform_users u ON u.owner_id = 1
AND ((u.email LIKE '%prebad50@gmail.com%'
      AND u.email IS NOT NULL)
     OR (u.user_id = 'prebad50@gmail.com'
         AND u.user_id IS NOT NULL))
LEFT JOIN projects p ON p.id = t.project_id
AND p.owner_id = 1
LEFT JOIN teams s ON s.id = t.team_id
AND s.owner_id = 1
WHERE t.owner_id = 1
  AND u.id IS NOT NULL
  AND ((u.email LIKE '%prebad50@gmail.com%'
        AND u.email IS NOT NULL)
       OR (u.user_id = 'prebad50@gmail.com'
           AND u.user_id IS NOT NULL));
2025-07-02 18:41:52,006 - INFO - Raw DB data retrieved: 290 rows
2025-07-02 18:41:52,006 - INFO - Sample data: {'task_id': 2, 'task_title': 'Develop Ticket Categorization Model', 'task_status': 'Duplicate', 'priority': '2', 'labels': '[]', 'estimate': 13.0, 'due_date': None, 'source': 'linear', 'task_created_at': datetime.datetime(2025, 6, 18, 18, 6, 46), 'task_updated_at': datetime.datetime(2025, 6, 19, 10, 21, 37), 'user_id': 1, 'user_name': 'prebad50@gmail.com', 'user_email': 'prebad50@gmail.com', 'project_id': None, 'project_name': None, 'team_id': None, 'team_name': None}
2025-07-02 18:41:52,011 - INFO - NO TEMPLATE
2025-07-02 18:41:52,013 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 18:41:53,875 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:41:55,432 - ERROR - Streaming error: 
2025-07-02 18:41:57,132 - INFO - chat_id_enc None
2025-07-02 18:41:57,132 - INFO - Generated unique_id_with_template: uid_26666332c5454248856a17421650e101_ce23e363b620fea4_1751481717132
2025-07-02 18:41:57,133 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-02 18:41:57,134 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-02 18:41:57,135 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-02 18:41:57,135 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-02 18:41:57,135 - INFO - Generated unique_id_with_template: uid_26666332c5454248856a17421650e101_ce23e363b620fea4_1751481717132
2025-07-02 18:41:57,135 - INFO - User metrics loaded: 4 metrics
2025-07-02 18:41:57,344 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:41:57,408 - INFO - Intent classification: sql
2025-07-02 18:41:57,430 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-02 18:41:57,680 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:42:00,121 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT t.id AS task_id,
       t.title,
       t.status,
       t.priority,
       t.due_date,
       t.source,
       t.created_at AS task_created_at,
       u.full_name AS assigned_user_name,
       u.email AS assigned_user_email,
       p.name AS project_name,
       s.status AS jira_status,
       trello.status AS trello_status,
       team.name AS team_name
FROM tasks t
LEFT JOIN platform_users u ON t.user_id = u.user_id
AND u.owner_id = 1
LEFT JOIN projects p ON t.project_id = p.id
AND p.owner_id = 1
LEFT JOIN status_jira s ON u.user_id = s.user_id
AND s.owner_id = 1
LEFT JOIN status_trello trello ON u.user_id = trello.user_id
AND trello.owner_id = 1
LEFT JOIN teams team ON t.team_id = team.id
AND team.owner_id = 1
WHERE t.owner_id = 1
  AND ((u.email = 'prebad50@gmail.com')
       OR (u.user_id = 'prebad50@gmail.com'))
2025-07-02 18:42:00,122 - ERROR - SQL Query Error for user_id 1: (1054, "Unknown column 'trello.status' in 'field list'")
2025-07-02 18:42:00,122 - INFO - NO TEMPLATE
2025-07-02 18:42:00,122 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-02 18:42:00,474 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-02 18:42:03,602 - ERROR - Streaming error: 
