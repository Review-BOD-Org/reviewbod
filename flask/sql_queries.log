2025-07-09 17:55:45,686 - INFO - chat_id_enc 5f51e447-c09c-42d1-b300-73a09f3d167d
2025-07-09 17:55:45,687 - INFO - Executing chat history query for chat_id 5f51e447-c09c-42d1-b300-73a09f3d167d:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 17:55:45,689 - INFO - Saving message to DB for chat_id 5f51e447-c09c-42d1-b300-73a09f3d167d, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 17:55:45,694 - INFO - Generated unique_id_with_template: uid_1fc04a0bc5a74723a52be0fb568e1f17_5b4a581a05bfac7c_1752083745694
2025-07-09 17:55:45,695 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 17:55:45,696 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 17:55:45,698 - INFO - Processing query for user_id 1: What percentage of tasks are currently in 'in-progress' status?
2025-07-09 17:55:45,698 - INFO - Staff ID filter: 
2025-07-09 17:55:45,698 - INFO - Generated unique_id_with_template: uid_1fc04a0bc5a74723a52be0fb568e1f17_5b4a581a05bfac7c_1752083745694
2025-07-09 17:55:45,698 - INFO - User metrics loaded: 4 metrics
2025-07-09 17:55:46,087 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 17:55:46,152 - INFO - Intent classification: sql
2025-07-09 17:55:46,170 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 17:55:46,487 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 17:55:47,793 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT COUNT(*) * 100.0 /
  (SELECT COUNT(*)
   FROM tasks
   WHERE owner_id = 1) AS in_progress_percentage
FROM tasks
WHERE status = 'In Progress'
  AND owner_id = 1;
2025-07-09 17:55:47,795 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 17:55:47,796 - INFO - Sample data: {'in_progress_percentage': Decimal('6.55172')}
2025-07-09 17:55:47,796 - INFO - Final prompt created with unique_id_with_template: uid_1fc04a0bc5a74723a52be0fb568e1f17_5b4a581a05bfac7c_1752083745694
2025-07-09 17:55:48,391 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 17:55:58,274 - INFO - chat_id_enc 5f51e447-c09c-42d1-b300-73a09f3d167d
2025-07-09 17:55:58,276 - INFO - Executing chat history query for chat_id 5f51e447-c09c-42d1-b300-73a09f3d167d:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 17:55:58,278 - INFO - Saving message to DB for chat_id 5f51e447-c09c-42d1-b300-73a09f3d167d, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 17:55:58,287 - INFO - Generated unique_id_with_template: uid_a0d8e9940ef94cc48ed89596715f7501_2bad6926c614e203_1752083758287
2025-07-09 17:55:58,288 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 17:55:58,289 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 17:55:58,290 - INFO - Processing query for user_id 1: How does task volume differ between Linear, Trello, and Jira?
2025-07-09 17:55:58,290 - INFO - Staff ID filter: 
2025-07-09 17:55:58,291 - INFO - Generated unique_id_with_template: uid_a0d8e9940ef94cc48ed89596715f7501_2bad6926c614e203_1752083758287
2025-07-09 17:55:58,291 - INFO - User metrics loaded: 4 metrics
2025-07-09 17:55:58,591 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 17:55:58,615 - INFO - Intent classification: sql
2025-07-09 17:55:58,632 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 17:55:58,958 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 17:56:00,139 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT SOURCE,
       COUNT(*) AS task_count
FROM tasks
WHERE owner_id = 1
GROUP BY SOURCE;
2025-07-09 17:56:00,141 - INFO - Raw DB data retrieved: 3 rows
2025-07-09 17:56:00,141 - INFO - Sample data: {'SOURCE': 'linear', 'task_count': 152}
2025-07-09 17:56:00,141 - INFO - Final prompt created with unique_id_with_template: uid_a0d8e9940ef94cc48ed89596715f7501_2bad6926c614e203_1752083758287
2025-07-09 17:56:00,516 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 17:56:12,490 - INFO - chat_id_enc 5f51e447-c09c-42d1-b300-73a09f3d167d
2025-07-09 17:56:12,490 - INFO - Executing chat history query for chat_id 5f51e447-c09c-42d1-b300-73a09f3d167d:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 17:56:12,492 - INFO - Saving message to DB for chat_id 5f51e447-c09c-42d1-b300-73a09f3d167d, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 17:56:12,497 - INFO - Generated unique_id_with_template: uid_698174c6b9ff45e5b252e52e3ce82c2a_e016a1e2b8d00a35_1752083772496
2025-07-09 17:56:12,497 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 17:56:12,498 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 17:56:12,500 - INFO - Processing query for user_id 1: give more breakdown
2025-07-09 17:56:12,500 - INFO - Staff ID filter: 
2025-07-09 17:56:12,500 - INFO - Generated unique_id_with_template: uid_698174c6b9ff45e5b252e52e3ce82c2a_e016a1e2b8d00a35_1752083772496
2025-07-09 17:56:12,500 - INFO - User metrics loaded: 4 metrics
2025-07-09 17:56:12,713 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 17:56:12,751 - INFO - Intent classification: sql
2025-07-09 17:56:12,774 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 17:56:13,335 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 17:56:14,588 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT tasks.source,
       COUNT(tasks.id) AS task_count
FROM tasks
WHERE tasks.owner_id = 1
GROUP BY tasks.source
2025-07-09 17:56:14,589 - INFO - Raw DB data retrieved: 3 rows
2025-07-09 17:56:14,590 - INFO - Sample data: {'source': 'linear', 'task_count': 152}
2025-07-09 17:56:14,590 - INFO - Final prompt created with unique_id_with_template: uid_698174c6b9ff45e5b252e52e3ce82c2a_e016a1e2b8d00a35_1752083772496
2025-07-09 17:56:14,988 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 17:56:26,449 - INFO - chat_id_enc 
2025-07-09 17:56:26,773 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 17:56:29,677 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 17:56:30,088 - INFO - Created new chat with ID 148 and UUID 140b95e9-99f3-425b-9efd-e507ec297acd for user 1
2025-07-09 17:56:30,089 - INFO - 140b95e9-99f3-425b-9efd-e507ec297acd
2025-07-09 17:56:30,090 - INFO - Executing chat history query for chat_id 140b95e9-99f3-425b-9efd-e507ec297acd:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 17:56:30,091 - INFO - Saving message to DB for chat_id 140b95e9-99f3-425b-9efd-e507ec297acd, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 17:56:30,097 - INFO - Generated unique_id_with_template: uid_b6e98a60b1894402937665edeb2c09c4_cb3ce6f7c66ee8ee_1752083790097
2025-07-09 17:56:30,098 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 17:56:30,099 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 17:56:30,100 - INFO - Processing query for user_id 1: Which project has the tightest deadline vs. workload estimate?
2025-07-09 17:56:30,101 - INFO - Staff ID filter: 
2025-07-09 17:56:30,101 - INFO - Generated unique_id_with_template: uid_b6e98a60b1894402937665edeb2c09c4_cb3ce6f7c66ee8ee_1752083790097
2025-07-09 17:56:30,101 - INFO - User metrics loaded: 4 metrics
2025-07-09 17:56:30,359 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 17:56:30,399 - INFO - Intent classification: sql
2025-07-09 17:56:30,428 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 17:56:30,938 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 17:56:33,275 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.name AS project_name,
       p.end_date,
       SUM(t.estimate) AS total_workload_estimate
FROM projects p
LEFT JOIN tasks t ON p.id = t.project_id
WHERE p.owner_id = 1
GROUP BY p.id
ORDER BY p.end_date ASC,
         total_workload_estimate DESC
LIMIT 1;
2025-07-09 17:56:33,278 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 17:56:33,278 - INFO - Sample data: {'project_name': "Barber's update", 'end_date': None, 'total_workload_estimate': 132.0}
2025-07-09 17:56:33,278 - INFO - Final prompt created with unique_id_with_template: uid_b6e98a60b1894402937665edeb2c09c4_cb3ce6f7c66ee8ee_1752083790097
2025-07-09 17:56:33,627 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 17:59:09,079 - INFO - Client disconnected from WebSocket
2025-07-09 18:24:32,156 - INFO - chat_id_enc 
2025-07-09 18:24:32,820 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:24:33,797 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:24:34,072 - INFO - Created new chat with ID 149 and UUID 9e5b3587-e5a0-4ba3-b13f-7c2ee7128caa for user 1
2025-07-09 18:24:34,072 - INFO - 9e5b3587-e5a0-4ba3-b13f-7c2ee7128caa
2025-07-09 18:24:34,073 - INFO - Executing chat history query for chat_id 9e5b3587-e5a0-4ba3-b13f-7c2ee7128caa:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 18:24:34,075 - INFO - Saving message to DB for chat_id 9e5b3587-e5a0-4ba3-b13f-7c2ee7128caa, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 18:24:34,080 - INFO - Generated unique_id_with_template: uid_0b2d2177d88e48caba2e37e63a941df7_069822d36ff1c587_1752085474080
2025-07-09 18:24:34,080 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 18:24:34,081 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 18:24:34,083 - INFO - Processing query for user_id 1: What is the distribution of task priorities across all projects?
2025-07-09 18:24:34,083 - INFO - Staff ID filter: 
2025-07-09 18:24:34,083 - INFO - Generated unique_id_with_template: uid_0b2d2177d88e48caba2e37e63a941df7_069822d36ff1c587_1752085474080
2025-07-09 18:24:34,083 - INFO - User metrics loaded: 4 metrics
2025-07-09 18:24:34,966 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:24:34,999 - INFO - Intent classification: sql
2025-07-09 18:24:35,039 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 18:24:35,866 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:24:37,199 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT tasks.priority,
       COUNT(tasks.id) AS task_count,
       projects.name AS project_name,
       platform_users.full_name AS user_name
FROM tasks
LEFT JOIN projects ON tasks.project_id = projects.id
LEFT JOIN platform_users ON tasks.user_id = platform_users.user_id
WHERE tasks.owner_id = 1
GROUP BY tasks.priority,
         projects.name,
         platform_users.full_name
2025-07-09 18:24:37,206 - INFO - Raw DB data retrieved: 67 rows
2025-07-09 18:24:37,206 - INFO - Sample data: {'priority': '2', 'task_count': 20, 'project_name': None, 'user_name': 'dev.ayomide@gmail.com'}
2025-07-09 18:24:37,207 - INFO - Final prompt created with unique_id_with_template: uid_0b2d2177d88e48caba2e37e63a941df7_069822d36ff1c587_1752085474080
2025-07-09 18:24:37,642 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:26:53,054 - INFO - Client disconnected from WebSocket
2025-07-09 18:28:38,914 - INFO - chat_id_enc 
2025-07-09 18:28:39,416 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:28:40,266 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:28:40,467 - INFO - Created new chat with ID 150 and UUID 30f8ef78-56d0-4413-a325-a978edf71998 for user 1
2025-07-09 18:28:40,467 - INFO - 30f8ef78-56d0-4413-a325-a978edf71998
2025-07-09 18:28:40,468 - INFO - Executing chat history query for chat_id 30f8ef78-56d0-4413-a325-a978edf71998:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 18:28:40,469 - INFO - Saving message to DB for chat_id 30f8ef78-56d0-4413-a325-a978edf71998, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 18:28:40,472 - INFO - Generated unique_id_with_template: uid_445fd0645fda4c239394aa156bfb3061_6b3fb64e1cf9f13e_1752085720472
2025-07-09 18:28:40,473 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 18:28:40,473 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 18:28:40,474 - INFO - Processing query for user_id 1: Which projects have the most overdue tasks?
2025-07-09 18:28:40,474 - INFO - Staff ID filter: 
2025-07-09 18:28:40,474 - INFO - Generated unique_id_with_template: uid_445fd0645fda4c239394aa156bfb3061_6b3fb64e1cf9f13e_1752085720472
2025-07-09 18:28:40,474 - INFO - User metrics loaded: 4 metrics
2025-07-09 18:28:41,031 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:28:41,062 - INFO - Intent classification: sql
2025-07-09 18:28:41,079 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 18:28:41,439 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:28:42,623 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.name AS project_name,
       COUNT(t.id) AS overdue_tasks_count
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
WHERE t.owner_id = 1
  AND t.due_date < CURRENT_DATE
  AND t.status != 'Done'
GROUP BY p.name
ORDER BY overdue_tasks_count DESC;
2025-07-09 18:28:42,625 - INFO - Raw DB data retrieved: 2 rows
2025-07-09 18:28:42,625 - INFO - Sample data: {'project_name': 'Review', 'overdue_tasks_count': 4}
2025-07-09 18:28:42,626 - INFO - Final prompt created with unique_id_with_template: uid_445fd0645fda4c239394aa156bfb3061_6b3fb64e1cf9f13e_1752085720472
2025-07-09 18:28:43,188 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:33:01,691 - INFO - Client disconnected from WebSocket
2025-07-09 18:33:09,754 - INFO - chat_id_enc 30f8ef78-56d0-4413-a325-a978edf71998
2025-07-09 18:33:09,759 - INFO - Executing chat history query for chat_id 30f8ef78-56d0-4413-a325-a978edf71998:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 18:33:09,765 - INFO - Saving message to DB for chat_id 30f8ef78-56d0-4413-a325-a978edf71998, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 18:33:09,775 - INFO - Generated unique_id_with_template: uid_c2f7e486ee5a4db9b65cd23f95adfa00_2c46932a9ca5f90d_1752085989775
2025-07-09 18:33:09,776 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 18:33:09,778 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 18:33:09,783 - INFO - Processing query for user_id 1: Which projects havent been updated since creation?
2025-07-09 18:33:09,783 - INFO - Staff ID filter: 
2025-07-09 18:33:09,783 - INFO - Generated unique_id_with_template: uid_c2f7e486ee5a4db9b65cd23f95adfa00_2c46932a9ca5f90d_1752085989775
2025-07-09 18:33:09,783 - INFO - User metrics loaded: 4 metrics
2025-07-09 18:33:10,323 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:33:10,380 - INFO - Intent classification: sql
2025-07-09 18:33:10,409 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 18:33:10,706 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:33:11,473 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT projects.name AS project_name
FROM projects
LEFT JOIN tasks ON projects.id = tasks.project_id
WHERE projects.owner_id = 1
  AND projects.created_at = projects.updated_at
2025-07-09 18:33:11,488 - INFO - Raw DB data retrieved: 244 rows
2025-07-09 18:33:11,488 - INFO - Sample data: {'project_name': 'Automated Testing Framework'}
2025-07-09 18:33:11,491 - INFO - Final prompt created with unique_id_with_template: uid_c2f7e486ee5a4db9b65cd23f95adfa00_2c46932a9ca5f90d_1752085989775
2025-07-09 18:33:12,002 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:33:29,706 - ERROR - Streaming error: 
2025-07-09 18:33:31,633 - INFO - chat_id_enc 30f8ef78-56d0-4413-a325-a978edf71998
2025-07-09 18:33:31,634 - INFO - Executing chat history query for chat_id 30f8ef78-56d0-4413-a325-a978edf71998:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 18:33:31,636 - INFO - Saving message to DB for chat_id 30f8ef78-56d0-4413-a325-a978edf71998, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 18:33:31,641 - INFO - Generated unique_id_with_template: uid_6180223fd2ca42dd8d1d8ec0bb3d61c0_d0e4bfbb47b75d03_1752086011641
2025-07-09 18:33:31,642 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 18:33:31,643 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 18:33:31,644 - INFO - Processing query for user_id 1: the first template u gave me can u give me again
2025-07-09 18:33:31,644 - INFO - Staff ID filter: 
2025-07-09 18:33:31,644 - INFO - Generated unique_id_with_template: uid_6180223fd2ca42dd8d1d8ec0bb3d61c0_d0e4bfbb47b75d03_1752086011641
2025-07-09 18:33:31,645 - INFO - User metrics loaded: 4 metrics
2025-07-09 18:33:32,475 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:33:32,522 - INFO - Intent classification: chat
2025-07-09 18:33:32,522 - INFO - Final prompt created with unique_id_with_template: uid_6180223fd2ca42dd8d1d8ec0bb3d61c0_d0e4bfbb47b75d03_1752086011641
2025-07-09 18:33:33,001 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:35:06,583 - INFO - Client disconnected from WebSocket
2025-07-09 18:35:12,913 - INFO - chat_id_enc 30f8ef78-56d0-4413-a325-a978edf71998
2025-07-09 18:35:12,914 - INFO - Executing chat history query for chat_id 30f8ef78-56d0-4413-a325-a978edf71998:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 18:35:12,916 - INFO - Saving message to DB for chat_id 30f8ef78-56d0-4413-a325-a978edf71998, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 18:35:12,920 - INFO - Generated unique_id_with_template: uid_296cc9836847448ebf5b2e9d1d219e25_363595d4aae5f1a7_1752086112920
2025-07-09 18:35:12,921 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 18:35:12,922 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 18:35:12,923 - INFO - Processing query for user_id 1: again pls
2025-07-09 18:35:12,923 - INFO - Staff ID filter: 
2025-07-09 18:35:12,923 - INFO - Generated unique_id_with_template: uid_296cc9836847448ebf5b2e9d1d219e25_363595d4aae5f1a7_1752086112920
2025-07-09 18:35:12,923 - INFO - User metrics loaded: 4 metrics
2025-07-09 18:35:13,320 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:35:13,397 - INFO - Intent classification: chat
2025-07-09 18:35:13,398 - INFO - Final prompt created with unique_id_with_template: uid_296cc9836847448ebf5b2e9d1d219e25_363595d4aae5f1a7_1752086112920
2025-07-09 18:35:13,992 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:35:57,144 - INFO - chat_id_enc 
2025-07-09 18:35:57,482 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:35:57,882 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:35:58,310 - INFO - Created new chat with ID 151 and UUID 2a2029d6-d379-4dcd-91d3-54182158d1ca for user 1
2025-07-09 18:35:58,310 - INFO - 2a2029d6-d379-4dcd-91d3-54182158d1ca
2025-07-09 18:35:58,311 - INFO - Executing chat history query for chat_id 2a2029d6-d379-4dcd-91d3-54182158d1ca:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 18:35:58,312 - INFO - Saving message to DB for chat_id 2a2029d6-d379-4dcd-91d3-54182158d1ca, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 18:35:58,316 - INFO - Generated unique_id_with_template: uid_751e2eade21648af937160ecfc8b7343_91d5a9485a0eb927_1752086158316
2025-07-09 18:35:58,316 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 18:35:58,317 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 18:35:58,318 - INFO - Processing query for user_id 1: Which tasks have not been updated in over 30 days?
2025-07-09 18:35:58,318 - INFO - Staff ID filter: 
2025-07-09 18:35:58,318 - INFO - Generated unique_id_with_template: uid_751e2eade21648af937160ecfc8b7343_91d5a9485a0eb927_1752086158316
2025-07-09 18:35:58,318 - INFO - User metrics loaded: 4 metrics
2025-07-09 18:35:58,660 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:35:58,721 - INFO - Intent classification: sql
2025-07-09 18:35:58,737 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 18:35:59,022 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:36:00,538 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT tasks.id,
       tasks.title,
       tasks.status,
       tasks.updated_at,
       platform_users.full_name AS user_name,
       projects.name AS project_name,
       teams.name AS team_name
FROM tasks
LEFT JOIN platform_users ON tasks.user_id = platform_users.user_id
AND tasks.owner_id = platform_users.owner_id
LEFT JOIN projects ON tasks.project_id = projects.id
AND tasks.owner_id = projects.owner_id
LEFT JOIN teams ON tasks.team_id = teams.id
AND tasks.owner_id = teams.owner_id
WHERE tasks.owner_id = 1
  AND tasks.updated_at < NOW() - INTERVAL 30 DAY
2025-07-09 18:36:00,543 - INFO - Raw DB data retrieved: 116 rows
2025-07-09 18:36:00,543 - INFO - Sample data: {'id': 315, 'title': 'Admin should set time to barb one person', 'status': 'To Do', 'updated_at': datetime.datetime(2025, 5, 9, 12, 7, 3), 'user_name': 'Savechina', 'project_name': 'Review', 'team_name': None}
2025-07-09 18:36:00,545 - INFO - Final prompt created with unique_id_with_template: uid_751e2eade21648af937160ecfc8b7343_91d5a9485a0eb927_1752086158316
2025-07-09 18:36:01,293 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:37:26,073 - INFO - Client disconnected from WebSocket
2025-07-09 18:37:31,517 - INFO - chat_id_enc 2a2029d6-d379-4dcd-91d3-54182158d1ca
2025-07-09 18:37:31,518 - INFO - Executing chat history query for chat_id 2a2029d6-d379-4dcd-91d3-54182158d1ca:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 18:37:31,520 - INFO - Saving message to DB for chat_id 2a2029d6-d379-4dcd-91d3-54182158d1ca, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 18:37:31,524 - INFO - Generated unique_id_with_template: uid_9d012c8d600b4bb8af84e10784f24e3e_b75fa6412e6fe653_1752086251524
2025-07-09 18:37:31,524 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 18:37:31,525 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 18:37:31,526 - INFO - Processing query for user_id 1: Which tasks are overdue and not in 'completed' status?
2025-07-09 18:37:31,526 - INFO - Staff ID filter: 
2025-07-09 18:37:31,527 - INFO - Generated unique_id_with_template: uid_9d012c8d600b4bb8af84e10784f24e3e_b75fa6412e6fe653_1752086251524
2025-07-09 18:37:31,527 - INFO - User metrics loaded: 4 metrics
2025-07-09 18:37:31,879 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:37:31,929 - INFO - Intent classification: sql
2025-07-09 18:37:31,951 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 18:37:32,175 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:37:34,193 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT tasks.id,
       tasks.title,
       tasks.status,
       tasks.due_date,
       platform_users.full_name AS user_name,
       projects.name AS project_name
FROM tasks
LEFT JOIN platform_users ON tasks.user_id = platform_users.user_id
AND tasks.owner_id = platform_users.owner_id
LEFT JOIN projects ON tasks.project_id = projects.id
AND tasks.owner_id = projects.owner_id
WHERE tasks.due_date < NOW()
  AND tasks.status != 'Done'
  AND tasks.owner_id = 1
2025-07-09 18:37:34,195 - INFO - Raw DB data retrieved: 5 rows
2025-07-09 18:37:34,196 - INFO - Sample data: {'id': 315, 'title': 'Admin should set time to barb one person', 'status': 'To Do', 'due_date': '2023-04-11 23:26:00', 'user_name': 'Savechina', 'project_name': 'Review'}
2025-07-09 18:37:34,196 - INFO - Final prompt created with unique_id_with_template: uid_9d012c8d600b4bb8af84e10784f24e3e_b75fa6412e6fe653_1752086251524
2025-07-09 18:37:34,852 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:38:00,356 - INFO - chat_id_enc 2a2029d6-d379-4dcd-91d3-54182158d1ca
2025-07-09 18:38:00,357 - INFO - Executing chat history query for chat_id 2a2029d6-d379-4dcd-91d3-54182158d1ca:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 18:38:00,358 - INFO - Saving message to DB for chat_id 2a2029d6-d379-4dcd-91d3-54182158d1ca, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 18:38:00,363 - INFO - Generated unique_id_with_template: uid_c7279972dfaa4d3bb5928ef3f40373e8_fe072fe2505b15c6_1752086280363
2025-07-09 18:38:00,363 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 18:38:00,364 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 18:38:00,365 - INFO - Processing query for user_id 1: Which labels are used most across high-priority tasks?
2025-07-09 18:38:00,365 - INFO - Staff ID filter: 
2025-07-09 18:38:00,365 - INFO - Generated unique_id_with_template: uid_c7279972dfaa4d3bb5928ef3f40373e8_fe072fe2505b15c6_1752086280363
2025-07-09 18:38:00,365 - INFO - User metrics loaded: 4 metrics
2025-07-09 18:38:00,770 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:38:00,802 - INFO - Intent classification: sql
2025-07-09 18:38:00,819 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 18:38:01,100 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:38:01,505 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT labels,
       COUNT(*) AS label_count
FROM tasks
WHERE priority = 'high'
  AND owner_id = 1
GROUP BY labels
ORDER BY label_count DESC
2025-07-09 18:38:01,506 - INFO - Raw DB data retrieved: 0 rows
2025-07-09 18:38:01,506 - WARNING - No data returned from SQL query
2025-07-09 18:38:01,507 - INFO - Final prompt created with unique_id_with_template: uid_c7279972dfaa4d3bb5928ef3f40373e8_fe072fe2505b15c6_1752086280363
2025-07-09 18:38:01,978 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:39:04,769 - INFO - Client disconnected from WebSocket
2025-07-09 18:41:45,576 - INFO - chat_id_enc 2a2029d6-d379-4dcd-91d3-54182158d1ca
2025-07-09 18:41:45,578 - INFO - Executing chat history query for chat_id 2a2029d6-d379-4dcd-91d3-54182158d1ca:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 18:41:45,580 - INFO - Saving message to DB for chat_id 2a2029d6-d379-4dcd-91d3-54182158d1ca, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 18:41:45,586 - INFO - Generated unique_id_with_template: uid_23a7e7d6924b4caa83faba0b8efa4b3e_d3fdfdb34891dc6f_1752086505586
2025-07-09 18:41:45,587 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 18:41:45,588 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 18:41:45,589 - INFO - Processing query for user_id 1: What is the average time between task creation and due date?
2025-07-09 18:41:45,589 - INFO - Staff ID filter: 
2025-07-09 18:41:45,589 - INFO - Generated unique_id_with_template: uid_23a7e7d6924b4caa83faba0b8efa4b3e_d3fdfdb34891dc6f_1752086505586
2025-07-09 18:41:45,589 - INFO - User metrics loaded: 4 metrics
2025-07-09 18:41:46,171 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:41:46,244 - INFO - Intent classification: sql
2025-07-09 18:41:46,264 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 18:41:46,521 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:41:46,837 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT AVG(DATEDIFF(due_date, created_at)) AS average_time_between_creation_and_due_date
FROM tasks
WHERE owner_id = 1
2025-07-09 18:41:46,840 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 18:41:46,840 - INFO - Sample data: {'average_time_between_creation_and_due_date': Decimal('-428.7500')}
2025-07-09 18:41:46,841 - INFO - Final prompt created with unique_id_with_template: uid_23a7e7d6924b4caa83faba0b8efa4b3e_d3fdfdb34891dc6f_1752086505586
2025-07-09 18:41:47,295 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:46:11,956 - INFO - chat_id_enc 
2025-07-09 18:46:12,904 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:46:13,611 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:46:13,817 - INFO - Created new chat with ID 152 and UUID 954c1f44-ebf6-4e6f-9f09-af0b7a365f79 for user 1
2025-07-09 18:46:13,818 - INFO - 954c1f44-ebf6-4e6f-9f09-af0b7a365f79
2025-07-09 18:46:13,819 - INFO - Executing chat history query for chat_id 954c1f44-ebf6-4e6f-9f09-af0b7a365f79:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 18:46:13,821 - INFO - Saving message to DB for chat_id 954c1f44-ebf6-4e6f-9f09-af0b7a365f79, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 18:46:13,828 - INFO - Generated unique_id_with_template: uid_9d22ccdeceb248b991e19ab6e7430209_07810aaf8a1d209a_1752086773828
2025-07-09 18:46:13,829 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 18:46:13,830 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 18:46:13,831 - INFO - Processing query for user_id 1: Which label appears most frequently in overdue tasks?
2025-07-09 18:46:13,831 - INFO - Staff ID filter: 
2025-07-09 18:46:13,832 - INFO - Generated unique_id_with_template: uid_9d22ccdeceb248b991e19ab6e7430209_07810aaf8a1d209a_1752086773828
2025-07-09 18:46:13,832 - INFO - User metrics loaded: 4 metrics
2025-07-09 18:46:14,527 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:46:14,645 - INFO - Intent classification: sql
2025-07-09 18:46:14,678 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 18:46:14,977 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:46:16,265 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT t.labels,
       COUNT(*) AS label_count
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
WHERE t.owner_id = 1
  AND t.due_date < CURRENT_DATE
  AND t.status != 'Done'
GROUP BY t.labels
ORDER BY label_count DESC
LIMIT 1
2025-07-09 18:46:16,269 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 18:46:16,269 - INFO - Sample data: {'labels': '[]', 'label_count': 4}
2025-07-09 18:46:16,270 - INFO - Final prompt created with unique_id_with_template: uid_9d22ccdeceb248b991e19ab6e7430209_07810aaf8a1d209a_1752086773828
2025-07-09 18:46:17,268 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:47:28,070 - INFO - Client disconnected from WebSocket
2025-07-09 18:47:34,334 - INFO - chat_id_enc 954c1f44-ebf6-4e6f-9f09-af0b7a365f79
2025-07-09 18:47:34,335 - INFO - Executing chat history query for chat_id 954c1f44-ebf6-4e6f-9f09-af0b7a365f79:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 18:47:34,336 - INFO - Saving message to DB for chat_id 954c1f44-ebf6-4e6f-9f09-af0b7a365f79, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 18:47:34,341 - INFO - Generated unique_id_with_template: uid_5113db5ff6e542dab1e1300325caad44_7d96c58b683059b5_1752086854341
2025-07-09 18:47:34,341 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 18:47:34,342 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 18:47:34,343 - INFO - Processing query for user_id 1: Which project has the highest task reassignment rate?
2025-07-09 18:47:34,343 - INFO - Staff ID filter: 
2025-07-09 18:47:34,343 - INFO - Generated unique_id_with_template: uid_5113db5ff6e542dab1e1300325caad44_7d96c58b683059b5_1752086854341
2025-07-09 18:47:34,343 - INFO - User metrics loaded: 4 metrics
2025-07-09 18:47:34,943 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:47:34,971 - INFO - Intent classification: sql
2025-07-09 18:47:34,992 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 18:47:35,984 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:47:37,027 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.name AS ProjectName,
       COUNT(t.id) AS ReassignmentCount
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
WHERE t.owner_id = 1
  AND t.status = 'Reassigned'
GROUP BY p.name
ORDER BY ReassignmentCount DESC
LIMIT 1
2025-07-09 18:47:37,030 - INFO - Raw DB data retrieved: 0 rows
2025-07-09 18:47:37,030 - WARNING - No data returned from SQL query
2025-07-09 18:47:37,030 - INFO - Final prompt created with unique_id_with_template: uid_5113db5ff6e542dab1e1300325caad44_7d96c58b683059b5_1752086854341
2025-07-09 18:47:37,452 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:52:10,394 - INFO - Client disconnected from WebSocket
2025-07-09 18:52:17,254 - INFO - chat_id_enc 954c1f44-ebf6-4e6f-9f09-af0b7a365f79
2025-07-09 18:52:17,258 - INFO - Executing chat history query for chat_id 954c1f44-ebf6-4e6f-9f09-af0b7a365f79:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 18:52:17,263 - INFO - Saving message to DB for chat_id 954c1f44-ebf6-4e6f-9f09-af0b7a365f79, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 18:52:17,271 - INFO - Generated unique_id_with_template: uid_119125d22d2b470db6185b088947bffd_87f37f43bb3c4e3b_1752087137271
2025-07-09 18:52:17,272 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 18:52:17,273 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 18:52:17,274 - INFO - Processing query for user_id 1: Which source has the most completed projects?
2025-07-09 18:52:17,275 - INFO - Staff ID filter: 
2025-07-09 18:52:17,275 - INFO - Generated unique_id_with_template: uid_119125d22d2b470db6185b088947bffd_87f37f43bb3c4e3b_1752087137271
2025-07-09 18:52:17,275 - INFO - User metrics loaded: 4 metrics
2025-07-09 18:52:17,852 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:52:17,973 - INFO - Intent classification: sql
2025-07-09 18:52:18,005 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 18:52:18,443 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:52:18,886 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT SOURCE,
       COUNT(*) AS CompletedProjects
FROM projects
WHERE state = 'completed'
  AND owner_id = 1
GROUP BY SOURCE
ORDER BY CompletedProjects DESC
2025-07-09 18:52:18,887 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 18:52:18,888 - INFO - Sample data: {'SOURCE': 'linear', 'CompletedProjects': 5}
2025-07-09 18:52:18,888 - INFO - Final prompt created with unique_id_with_template: uid_119125d22d2b470db6185b088947bffd_87f37f43bb3c4e3b_1752087137271
2025-07-09 18:52:19,314 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:54:59,777 - INFO - Client disconnected from WebSocket
2025-07-09 18:55:07,957 - INFO - chat_id_enc 954c1f44-ebf6-4e6f-9f09-af0b7a365f79
2025-07-09 18:55:07,958 - INFO - Executing chat history query for chat_id 954c1f44-ebf6-4e6f-9f09-af0b7a365f79:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 18:55:07,959 - INFO - Saving message to DB for chat_id 954c1f44-ebf6-4e6f-9f09-af0b7a365f79, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 18:55:07,964 - INFO - Generated unique_id_with_template: uid_421a50038d574036adf0586a790409ce_81d7b4afc654516e_1752087307964
2025-07-09 18:55:07,965 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 18:55:07,967 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 18:55:07,969 - INFO - Processing query for user_id 1: give me same response template pls
2025-07-09 18:55:07,969 - INFO - Staff ID filter: 
2025-07-09 18:55:07,969 - INFO - Generated unique_id_with_template: uid_421a50038d574036adf0586a790409ce_81d7b4afc654516e_1752087307964
2025-07-09 18:55:07,969 - INFO - User metrics loaded: 4 metrics
2025-07-09 18:55:08,308 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:55:08,359 - INFO - Intent classification: chat
2025-07-09 18:55:08,359 - INFO - Final prompt created with unique_id_with_template: uid_421a50038d574036adf0586a790409ce_81d7b4afc654516e_1752087307964
2025-07-09 18:55:08,811 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:55:26,349 - INFO - chat_id_enc 954c1f44-ebf6-4e6f-9f09-af0b7a365f79
2025-07-09 18:55:26,350 - INFO - Executing chat history query for chat_id 954c1f44-ebf6-4e6f-9f09-af0b7a365f79:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 18:55:26,352 - INFO - Saving message to DB for chat_id 954c1f44-ebf6-4e6f-9f09-af0b7a365f79, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 18:55:26,356 - INFO - Generated unique_id_with_template: uid_2f23870a31b04a62a5b23b3b009d3b77_5817f362419a0a7b_1752087326356
2025-07-09 18:55:26,356 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 18:55:26,358 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 18:55:26,359 - INFO - Processing query for user_id 1: Which platform has the most deleted or cancelled tasks?
2025-07-09 18:55:26,359 - INFO - Staff ID filter: 
2025-07-09 18:55:26,359 - INFO - Generated unique_id_with_template: uid_2f23870a31b04a62a5b23b3b009d3b77_5817f362419a0a7b_1752087326356
2025-07-09 18:55:26,359 - INFO - User metrics loaded: 4 metrics
2025-07-09 18:55:26,930 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:55:27,179 - INFO - Intent classification: sql
2025-07-09 18:55:27,219 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 18:55:27,947 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:55:28,498 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT SOURCE,
       COUNT(*) AS DeletedOrCancelledTasks
FROM tasks
WHERE is_deleted = 1
  OR status = 'Canceled'
  AND owner_id = 1
GROUP BY SOURCE
ORDER BY DeletedOrCancelledTasks DESC
2025-07-09 18:55:28,500 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 18:55:28,500 - INFO - Sample data: {'SOURCE': 'linear', 'DeletedOrCancelledTasks': 23}
2025-07-09 18:55:28,500 - INFO - Final prompt created with unique_id_with_template: uid_2f23870a31b04a62a5b23b3b009d3b77_5817f362419a0a7b_1752087326356
2025-07-09 18:55:28,880 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:57:57,237 - INFO - Client disconnected from WebSocket
2025-07-09 18:58:04,011 - INFO - chat_id_enc 954c1f44-ebf6-4e6f-9f09-af0b7a365f79
2025-07-09 18:58:04,012 - INFO - Executing chat history query for chat_id 954c1f44-ebf6-4e6f-9f09-af0b7a365f79:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 18:58:04,014 - INFO - Saving message to DB for chat_id 954c1f44-ebf6-4e6f-9f09-af0b7a365f79, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 18:58:04,018 - INFO - Generated unique_id_with_template: uid_103a43b62ec04678a3135dfda8713487_e83f1f197ea8ff7b_1752087484018
2025-07-09 18:58:04,019 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 18:58:04,020 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 18:58:04,021 - INFO - Processing query for user_id 1: Which labels are used most across high-priority tasks?
2025-07-09 18:58:04,021 - INFO - Staff ID filter: 
2025-07-09 18:58:04,022 - INFO - Generated unique_id_with_template: uid_103a43b62ec04678a3135dfda8713487_e83f1f197ea8ff7b_1752087484018
2025-07-09 18:58:04,022 - INFO - User metrics loaded: 4 metrics
2025-07-09 18:58:04,391 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:58:04,455 - INFO - Intent classification: sql
2025-07-09 18:58:04,471 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 18:58:04,852 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 18:58:06,196 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT labels,
       COUNT(*) AS Frequency
FROM tasks
WHERE priority = 'high'
  AND owner_id = 1
GROUP BY labels
ORDER BY Frequency DESC
2025-07-09 18:58:06,198 - INFO - Raw DB data retrieved: 0 rows
2025-07-09 18:58:06,198 - WARNING - No data returned from SQL query
2025-07-09 18:58:06,199 - INFO - Final prompt created with unique_id_with_template: uid_103a43b62ec04678a3135dfda8713487_e83f1f197ea8ff7b_1752087484018
2025-07-09 18:58:06,655 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:00:07,225 - INFO - Client disconnected from WebSocket
2025-07-09 19:00:20,710 - INFO - chat_id_enc 954c1f44-ebf6-4e6f-9f09-af0b7a365f79
2025-07-09 19:00:20,711 - INFO - Executing chat history query for chat_id 954c1f44-ebf6-4e6f-9f09-af0b7a365f79:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 19:00:20,713 - INFO - Saving message to DB for chat_id 954c1f44-ebf6-4e6f-9f09-af0b7a365f79, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 19:00:20,725 - INFO - Generated unique_id_with_template: uid_5d6c918ea1724d649a332585ff6a772b_714ad647b40dc11d_1752087620725
2025-07-09 19:00:20,726 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:00:20,727 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:00:20,728 - INFO - Processing query for user_id 1: give me sample template again , template only 
2025-07-09 19:00:20,729 - INFO - Staff ID filter: 
2025-07-09 19:00:20,729 - INFO - Generated unique_id_with_template: uid_5d6c918ea1724d649a332585ff6a772b_714ad647b40dc11d_1752087620725
2025-07-09 19:00:20,729 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:00:21,536 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:00:21,583 - INFO - Intent classification: chat
2025-07-09 19:00:21,596 - INFO - Final prompt created with unique_id_with_template: uid_5d6c918ea1724d649a332585ff6a772b_714ad647b40dc11d_1752087620725
2025-07-09 19:00:22,094 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:00:42,748 - INFO - chat_id_enc 
2025-07-09 19:00:43,209 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:00:43,991 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:00:44,495 - INFO - Created new chat with ID 153 and UUID 3e2977bb-7e83-4c88-9006-bc77abb67faf for user 1
2025-07-09 19:00:44,496 - INFO - 3e2977bb-7e83-4c88-9006-bc77abb67faf
2025-07-09 19:00:44,497 - INFO - Executing chat history query for chat_id 3e2977bb-7e83-4c88-9006-bc77abb67faf:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 19:00:44,499 - INFO - Saving message to DB for chat_id 3e2977bb-7e83-4c88-9006-bc77abb67faf, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 19:00:44,503 - INFO - Generated unique_id_with_template: uid_a82cbc83ba5240dcb21d2c45cbbb8aef_fe95049b9b97dcae_1752087644503
2025-07-09 19:00:44,504 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:00:44,505 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:00:44,506 - INFO - Processing query for user_id 1: Which project has the highest task reassignment rate?
2025-07-09 19:00:44,507 - INFO - Staff ID filter: 
2025-07-09 19:00:44,507 - INFO - Generated unique_id_with_template: uid_a82cbc83ba5240dcb21d2c45cbbb8aef_fe95049b9b97dcae_1752087644503
2025-07-09 19:00:44,507 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:00:45,002 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:00:45,061 - INFO - Intent classification: sql
2025-07-09 19:00:45,083 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:00:45,317 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:00:45,985 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.name AS project_name,
       COUNT(t.id) AS reassignment_count
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
WHERE t.owner_id = 1
  AND t.status = 'Duplicate'
GROUP BY p.name
ORDER BY reassignment_count DESC
LIMIT 1;
2025-07-09 19:00:45,986 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 19:00:45,986 - INFO - Sample data: {'project_name': None, 'reassignment_count': 24}
2025-07-09 19:00:45,987 - INFO - Final prompt created with unique_id_with_template: uid_a82cbc83ba5240dcb21d2c45cbbb8aef_fe95049b9b97dcae_1752087644503
2025-07-09 19:00:46,653 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:01:01,056 - INFO - chat_id_enc 3e2977bb-7e83-4c88-9006-bc77abb67faf
2025-07-09 19:01:01,057 - INFO - Executing chat history query for chat_id 3e2977bb-7e83-4c88-9006-bc77abb67faf:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 19:01:01,059 - INFO - Saving message to DB for chat_id 3e2977bb-7e83-4c88-9006-bc77abb67faf, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 19:01:01,063 - INFO - Generated unique_id_with_template: uid_cbfa3fe3ab7e47baaf05d0dddc40e275_07a8e6105dd9247c_1752087661063
2025-07-09 19:01:01,064 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:01:01,065 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:01:01,066 - INFO - Processing query for user_id 1: Which users have the highest task estimate vs. delivery ratio?
2025-07-09 19:01:01,066 - INFO - Staff ID filter: 
2025-07-09 19:01:01,066 - INFO - Generated unique_id_with_template: uid_cbfa3fe3ab7e47baaf05d0dddc40e275_07a8e6105dd9247c_1752087661063
2025-07-09 19:01:01,066 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:01:01,395 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:01:01,422 - INFO - Intent classification: sql
2025-07-09 19:01:01,451 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:01:02,136 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:01:03,898 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT pu.full_name AS user_name,
       SUM(t.estimate) AS total_estimate,
       COUNT(t.id) AS total_tasks,
       (SUM(t.estimate) / COUNT(t.id)) AS estimate_to_task_ratio
FROM tasks t
LEFT JOIN platform_users pu ON t.user_id = pu.user_id
AND t.owner_id = pu.owner_id
WHERE t.owner_id = 1
GROUP BY pu.full_name
ORDER BY estimate_to_task_ratio DESC;
2025-07-09 19:01:03,901 - INFO - Raw DB data retrieved: 9 rows
2025-07-09 19:01:03,901 - INFO - Sample data: {'user_name': 'prebad50@gmail.com', 'total_estimate': 154.0, 'total_tasks': 26, 'estimate_to_task_ratio': 5.923076923076923}
2025-07-09 19:01:03,902 - INFO - Final prompt created with unique_id_with_template: uid_cbfa3fe3ab7e47baaf05d0dddc40e275_07a8e6105dd9247c_1752087661063
2025-07-09 19:01:04,356 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:03:26,785 - INFO - Client disconnected from WebSocket
2025-07-09 19:04:29,903 - INFO - Client disconnected from WebSocket
2025-07-09 19:05:58,924 - INFO - Client disconnected from WebSocket
2025-07-09 19:07:47,052 - INFO - chat_id_enc 3e2977bb-7e83-4c88-9006-bc77abb67faf
2025-07-09 19:07:47,052 - INFO - Executing chat history query for chat_id 3e2977bb-7e83-4c88-9006-bc77abb67faf:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 19:07:47,054 - INFO - Saving message to DB for chat_id 3e2977bb-7e83-4c88-9006-bc77abb67faf, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 19:07:47,061 - INFO - Generated unique_id_with_template: uid_f427bbfd65e143d18d53ee427ae16525_f2bfe6dc0f41f11a_1752088067061
2025-07-09 19:07:47,062 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:07:47,063 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:07:47,064 - INFO - Processing query for user_id 1: Whats the average priority level of tasks in each project?
2025-07-09 19:07:47,064 - INFO - Staff ID filter: 
2025-07-09 19:07:47,064 - INFO - Generated unique_id_with_template: uid_f427bbfd65e143d18d53ee427ae16525_f2bfe6dc0f41f11a_1752088067061
2025-07-09 19:07:47,064 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:07:47,415 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:07:47,459 - INFO - Intent classification: sql
2025-07-09 19:07:47,497 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:07:48,080 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:07:48,868 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT projects.name AS project_name,
       AVG(CAST(tasks.priority AS UNSIGNED)) AS average_priority
FROM tasks
LEFT JOIN projects ON tasks.project_id = projects.id
WHERE tasks.owner_id = 1
GROUP BY projects.name
2025-07-09 19:07:48,870 - INFO - Raw DB data retrieved: 11 rows
2025-07-09 19:07:48,870 - INFO - Sample data: {'project_name': None, 'average_priority': Decimal('2.4653')}
2025-07-09 19:07:48,871 - INFO - Final prompt created with unique_id_with_template: uid_f427bbfd65e143d18d53ee427ae16525_f2bfe6dc0f41f11a_1752088067061
2025-07-09 19:07:49,445 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:09:31,924 - INFO - chat_id_enc 3e2977bb-7e83-4c88-9006-bc77abb67faf
2025-07-09 19:09:31,925 - INFO - Executing chat history query for chat_id 3e2977bb-7e83-4c88-9006-bc77abb67faf:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 19:09:31,926 - INFO - Saving message to DB for chat_id 3e2977bb-7e83-4c88-9006-bc77abb67faf, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 19:09:31,929 - INFO - Generated unique_id_with_template: uid_a170b002ad234023a7224fb55966f2c3_e357df82cd2a7b15_1752088171929
2025-07-09 19:09:31,929 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:09:31,930 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:09:31,931 - INFO - Processing query for user_id 1: Which team has the highest number of tasks stuck in 'in-progress'?
2025-07-09 19:09:31,931 - INFO - Staff ID filter: 
2025-07-09 19:09:31,931 - INFO - Generated unique_id_with_template: uid_a170b002ad234023a7224fb55966f2c3_e357df82cd2a7b15_1752088171929
2025-07-09 19:09:31,931 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:09:32,306 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:09:32,381 - INFO - Intent classification: sql
2025-07-09 19:09:32,400 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:09:32,637 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:09:34,852 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT t.name AS team_name,
       COUNT(ts.id) AS in_progress_tasks_count
FROM tasks ts
LEFT JOIN teams t ON ts.team_id = t.team_key
WHERE ts.status = 'In Progress'
  AND ts.owner_id = 1
GROUP BY t.name
ORDER BY in_progress_tasks_count DESC
LIMIT 1;
2025-07-09 19:09:34,853 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 19:09:34,854 - INFO - Sample data: {'team_name': 'Help and support', 'in_progress_tasks_count': 32}
2025-07-09 19:09:34,854 - INFO - Final prompt created with unique_id_with_template: uid_a170b002ad234023a7224fb55966f2c3_e357df82cd2a7b15_1752088171929
2025-07-09 19:09:35,231 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:10:38,715 - INFO - Client disconnected from WebSocket
2025-07-09 19:10:43,442 - INFO - chat_id_enc 3e2977bb-7e83-4c88-9006-bc77abb67faf
2025-07-09 19:10:43,443 - INFO - Executing chat history query for chat_id 3e2977bb-7e83-4c88-9006-bc77abb67faf:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 19:10:43,444 - INFO - Saving message to DB for chat_id 3e2977bb-7e83-4c88-9006-bc77abb67faf, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 19:10:43,447 - INFO - Generated unique_id_with_template: uid_f3bdb36474334234b60569303900721e_6aa31694b3f3fc98_1752088243447
2025-07-09 19:10:43,448 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:10:43,449 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:10:43,450 - INFO - Processing query for user_id 1: Which source has the most completed projects?
2025-07-09 19:10:43,450 - INFO - Staff ID filter: 
2025-07-09 19:10:43,450 - INFO - Generated unique_id_with_template: uid_f3bdb36474334234b60569303900721e_6aa31694b3f3fc98_1752088243447
2025-07-09 19:10:43,450 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:10:44,392 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:10:44,440 - INFO - Intent classification: sql
2025-07-09 19:10:44,457 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:10:45,398 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:10:46,575 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT SOURCE,
       COUNT(*) AS completed_projects_count
FROM projects
WHERE state = 'completed'
  AND owner_id = 1
GROUP BY SOURCE
ORDER BY completed_projects_count DESC
2025-07-09 19:10:46,577 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 19:10:46,577 - INFO - Sample data: {'SOURCE': 'linear', 'completed_projects_count': 5}
2025-07-09 19:10:46,577 - INFO - Final prompt created with unique_id_with_template: uid_f3bdb36474334234b60569303900721e_6aa31694b3f3fc98_1752088243447
2025-07-09 19:10:47,730 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:12:12,543 - INFO - Client disconnected from WebSocket
2025-07-09 19:12:16,992 - INFO - chat_id_enc 3e2977bb-7e83-4c88-9006-bc77abb67faf
2025-07-09 19:12:16,994 - INFO - Executing chat history query for chat_id 3e2977bb-7e83-4c88-9006-bc77abb67faf:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 19:12:16,996 - INFO - Saving message to DB for chat_id 3e2977bb-7e83-4c88-9006-bc77abb67faf, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 19:12:17,002 - INFO - Generated unique_id_with_template: uid_261b2ebae5b94e3687f97d2a5496e67f_f32918b122d86325_1752088337002
2025-07-09 19:12:17,003 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:12:17,004 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:12:17,006 - INFO - Processing query for user_id 1: Which projects are past their end date but not marked complete?
2025-07-09 19:12:17,006 - INFO - Staff ID filter: 
2025-07-09 19:12:17,006 - INFO - Generated unique_id_with_template: uid_261b2ebae5b94e3687f97d2a5496e67f_f32918b122d86325_1752088337002
2025-07-09 19:12:17,006 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:12:17,430 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:12:17,560 - INFO - Intent classification: sql
2025-07-09 19:12:17,603 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:12:18,204 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:12:20,660 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.name AS project_name,
       p.end_date,
       p.state
FROM projects p
LEFT JOIN tasks t ON p.id = t.project_id
WHERE p.owner_id = 1
  AND p.end_date IS NOT NULL
  AND p.state != 'completed'
  AND p.end_date < CURRENT_DATE
2025-07-09 19:12:20,663 - INFO - Raw DB data retrieved: 0 rows
2025-07-09 19:12:20,663 - WARNING - No data returned from SQL query
2025-07-09 19:12:20,663 - INFO - Final prompt created with unique_id_with_template: uid_261b2ebae5b94e3687f97d2a5496e67f_f32918b122d86325_1752088337002
2025-07-09 19:12:21,501 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:12:44,055 - INFO - chat_id_enc 3e2977bb-7e83-4c88-9006-bc77abb67faf
2025-07-09 19:12:44,056 - INFO - Executing chat history query for chat_id 3e2977bb-7e83-4c88-9006-bc77abb67faf:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 19:12:44,057 - INFO - Saving message to DB for chat_id 3e2977bb-7e83-4c88-9006-bc77abb67faf, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 19:12:44,061 - INFO - Generated unique_id_with_template: uid_9880f5b3ee47468aa024cd7ec7b4dcc2_f3297fd0bbc304f2_1752088364061
2025-07-09 19:12:44,061 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:12:44,062 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:12:44,063 - INFO - Processing query for user_id 1: cool
2025-07-09 19:12:44,063 - INFO - Staff ID filter: 
2025-07-09 19:12:44,063 - INFO - Generated unique_id_with_template: uid_9880f5b3ee47468aa024cd7ec7b4dcc2_f3297fd0bbc304f2_1752088364061
2025-07-09 19:12:44,063 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:12:44,472 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:12:44,514 - INFO - Intent classification: chat
2025-07-09 19:12:44,514 - INFO - Final prompt created with unique_id_with_template: uid_9880f5b3ee47468aa024cd7ec7b4dcc2_f3297fd0bbc304f2_1752088364061
2025-07-09 19:12:44,951 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:12:56,451 - INFO - chat_id_enc 3e2977bb-7e83-4c88-9006-bc77abb67faf
2025-07-09 19:12:56,451 - INFO - Executing chat history query for chat_id 3e2977bb-7e83-4c88-9006-bc77abb67faf:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 19:12:56,453 - INFO - Saving message to DB for chat_id 3e2977bb-7e83-4c88-9006-bc77abb67faf, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 19:12:56,458 - INFO - Generated unique_id_with_template: uid_53154366735a4e26b49dc40a704a38ff_0dfd6542213b4a00_1752088376458
2025-07-09 19:12:56,459 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:12:56,459 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:12:56,460 - INFO - Processing query for user_id 1: give like 4 templates of analysis wanna see how u work
2025-07-09 19:12:56,461 - INFO - Staff ID filter: 
2025-07-09 19:12:56,461 - INFO - Generated unique_id_with_template: uid_53154366735a4e26b49dc40a704a38ff_0dfd6542213b4a00_1752088376458
2025-07-09 19:12:56,461 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:12:57,071 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:12:57,111 - INFO - Intent classification: sql
2025-07-09 19:12:57,131 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:12:57,461 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:13:00,499 - INFO - Generated SQL Query for user_id 1 with staff_id :
-- Template 1: Average Priority Level of Tasks in Each Project

SELECT p.name AS project_name,
       AVG(t.priority) AS average_priority
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
WHERE t.owner_id = 1
GROUP BY p.name;

-- Template 2: Number of In-Progress Tasks by Team

SELECT tm.name AS team_name,
       COUNT(t.id) AS in_progress_tasks_count
FROM tasks t
LEFT JOIN teams tm ON t.team_id = tm.id
WHERE t.status = 'In Progress'
  AND t.owner_id = 1
GROUP BY tm.name;

-- Template 3: Number of Completed Projects by Source

SELECT p.source AS source_name,
       COUNT(p.id) AS completed_projects_count
FROM projects p
WHERE p.state = 'completed'
  AND p.owner_id = 1
GROUP BY p.source;

-- Template 4: Projects Past Their End Date but Not Marked Complete

SELECT p.name AS project_name,
       p.end_date,
       p.state AS status
FROM projects p
WHERE p.end_date < CURRENT_DATE
  AND p.state != 'completed'
  AND p.owner_id = 1;
2025-07-09 19:13:00,500 - ERROR - SQL Query Error for user_id 1: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SELECT tm.name AS team_name,\n       COUNT(t.id) AS in_progress_tasks_count\nFROM ' at line 12")
2025-07-09 19:13:00,501 - INFO - Final prompt created with unique_id_with_template: uid_53154366735a4e26b49dc40a704a38ff_0dfd6542213b4a00_1752088376458
2025-07-09 19:13:01,010 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:13:39,373 - INFO - chat_id_enc 3e2977bb-7e83-4c88-9006-bc77abb67faf
2025-07-09 19:13:39,374 - INFO - Executing chat history query for chat_id 3e2977bb-7e83-4c88-9006-bc77abb67faf:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 19:13:39,376 - INFO - Saving message to DB for chat_id 3e2977bb-7e83-4c88-9006-bc77abb67faf, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 19:13:39,381 - INFO - Generated unique_id_with_template: uid_8be6d3a5a9394bdbb376e81756060962_c98358793d2421d1_1752088419381
2025-07-09 19:13:39,381 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:13:39,383 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:13:39,384 - INFO - Processing query for user_id 1: do that one last time
2025-07-09 19:13:39,384 - INFO - Staff ID filter: 
2025-07-09 19:13:39,384 - INFO - Generated unique_id_with_template: uid_8be6d3a5a9394bdbb376e81756060962_c98358793d2421d1_1752088419381
2025-07-09 19:13:39,384 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:13:39,833 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:13:39,869 - INFO - Intent classification: chat
2025-07-09 19:13:39,869 - INFO - Final prompt created with unique_id_with_template: uid_8be6d3a5a9394bdbb376e81756060962_c98358793d2421d1_1752088419381
2025-07-09 19:13:40,318 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:15:28,554 - INFO - Client disconnected from WebSocket
2025-07-09 19:16:51,009 - INFO - Client disconnected from WebSocket
2025-07-09 19:17:28,020 - INFO - Client disconnected from WebSocket
2025-07-09 19:17:47,229 - INFO - Client disconnected from WebSocket
2025-07-09 19:17:51,699 - INFO - Client disconnected from WebSocket
2025-07-09 19:18:50,682 - INFO - Client disconnected from WebSocket
2025-07-09 19:19:18,323 - INFO - Client disconnected from WebSocket
2025-07-09 19:19:30,770 - INFO - chat_id_enc 954c1f44-ebf6-4e6f-9f09-af0b7a365f79
2025-07-09 19:19:30,770 - INFO - Executing chat history query for chat_id 954c1f44-ebf6-4e6f-9f09-af0b7a365f79:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 19:19:30,772 - INFO - Saving message to DB for chat_id 954c1f44-ebf6-4e6f-9f09-af0b7a365f79, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 19:19:30,776 - INFO - Generated unique_id_with_template: uid_70681b874cb7423abfe167f9b837386d_393e6f9bbc37df40_1752088770776
2025-07-09 19:19:30,777 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:19:30,778 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:19:30,779 - INFO - Processing query for user_id 1: Which team has the highest task throughput?
2025-07-09 19:19:30,779 - INFO - Staff ID filter: 
2025-07-09 19:19:30,779 - INFO - Generated unique_id_with_template: uid_70681b874cb7423abfe167f9b837386d_393e6f9bbc37df40_1752088770776
2025-07-09 19:19:30,779 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:19:31,112 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:19:31,140 - INFO - Intent classification: sql
2025-07-09 19:19:31,165 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:19:31,823 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:19:32,634 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT teams.name,
       COUNT(tasks.id) AS TaskThroughput
FROM tasks
LEFT JOIN teams ON tasks.team_id = teams.id
WHERE tasks.owner_id = 1
GROUP BY teams.name
ORDER BY TaskThroughput DESC
2025-07-09 19:19:32,636 - INFO - Raw DB data retrieved: 2 rows
2025-07-09 19:19:32,637 - INFO - Sample data: {'name': None, 'TaskThroughput': 268}
2025-07-09 19:19:32,637 - INFO - Final prompt created with unique_id_with_template: uid_70681b874cb7423abfe167f9b837386d_393e6f9bbc37df40_1752088770776
2025-07-09 19:19:35,067 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:21:08,766 - INFO - Client disconnected from WebSocket
2025-07-09 19:21:19,694 - INFO - chat_id_enc 954c1f44-ebf6-4e6f-9f09-af0b7a365f79
2025-07-09 19:21:19,696 - INFO - Executing chat history query for chat_id 954c1f44-ebf6-4e6f-9f09-af0b7a365f79:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 19:21:19,698 - INFO - Saving message to DB for chat_id 954c1f44-ebf6-4e6f-9f09-af0b7a365f79, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 19:21:19,709 - INFO - Generated unique_id_with_template: uid_221e8ed4bd5a448fb4d76b37124bab3b_ebfb1f9dc8e0ee0f_1752088879709
2025-07-09 19:21:19,710 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:21:19,711 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:21:19,713 - INFO - Processing query for user_id 1: give me that chart again
2025-07-09 19:21:19,713 - INFO - Staff ID filter: 
2025-07-09 19:21:19,713 - INFO - Generated unique_id_with_template: uid_221e8ed4bd5a448fb4d76b37124bab3b_ebfb1f9dc8e0ee0f_1752088879709
2025-07-09 19:21:19,713 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:21:20,061 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:21:20,092 - INFO - Intent classification: sql
2025-07-09 19:21:20,116 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:21:20,507 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:21:21,302 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT teams.name AS TeamName,
       COUNT(*) AS TaskThroughput
FROM tasks
LEFT JOIN teams ON tasks.team_id = teams.team_key
WHERE tasks.owner_id = 1
GROUP BY TeamName
ORDER BY TaskThroughput DESC
2025-07-09 19:21:21,308 - INFO - Raw DB data retrieved: 6 rows
2025-07-09 19:21:21,308 - INFO - Sample data: {'TeamName': 'Help and support', 'TaskThroughput': 240}
2025-07-09 19:21:21,309 - INFO - Final prompt created with unique_id_with_template: uid_221e8ed4bd5a448fb4d76b37124bab3b_ebfb1f9dc8e0ee0f_1752088879709
2025-07-09 19:21:21,710 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:21:40,081 - INFO - chat_id_enc 
2025-07-09 19:21:40,407 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:21:40,910 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:21:41,049 - INFO - Created new chat with ID 154 and UUID 1f24c945-a2a1-4f34-8c77-7616862115aa for user 1
2025-07-09 19:21:41,049 - INFO - 1f24c945-a2a1-4f34-8c77-7616862115aa
2025-07-09 19:21:41,050 - INFO - Executing chat history query for chat_id 1f24c945-a2a1-4f34-8c77-7616862115aa:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 19:21:41,051 - INFO - Saving message to DB for chat_id 1f24c945-a2a1-4f34-8c77-7616862115aa, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 19:21:41,060 - INFO - Generated unique_id_with_template: uid_611ba06dffc847cbad715f9cbb77c300_9cee902f27772e93_1752088901060
2025-07-09 19:21:41,061 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:21:41,062 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:21:41,063 - INFO - Processing query for user_id 1: Which team has the highest task throughput?
2025-07-09 19:21:41,063 - INFO - Staff ID filter: 
2025-07-09 19:21:41,064 - INFO - Generated unique_id_with_template: uid_611ba06dffc847cbad715f9cbb77c300_9cee902f27772e93_1752088901060
2025-07-09 19:21:41,064 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:21:41,596 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:21:41,623 - INFO - Intent classification: sql
2025-07-09 19:21:41,650 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:21:41,947 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:21:42,500 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT t.name AS team_name,
       COUNT(ts.id) AS task_count
FROM teams t
LEFT JOIN tasks ts ON t.id = ts.team_id
WHERE t.owner_id = 1
GROUP BY t.id
ORDER BY task_count DESC
LIMIT 1
2025-07-09 19:21:42,501 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 19:21:42,502 - INFO - Sample data: {'team_name': 'Help and support', 'task_count': 0}
2025-07-09 19:21:42,502 - INFO - Final prompt created with unique_id_with_template: uid_611ba06dffc847cbad715f9cbb77c300_9cee902f27772e93_1752088901060
2025-07-09 19:21:43,429 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:21:58,698 - INFO - chat_id_enc 
2025-07-09 19:21:59,097 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:21:59,395 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:21:59,563 - INFO - Created new chat with ID 155 and UUID 4a7220db-4bfe-4ee0-9b32-918a003ea2cf for user 1
2025-07-09 19:21:59,563 - INFO - 4a7220db-4bfe-4ee0-9b32-918a003ea2cf
2025-07-09 19:21:59,564 - INFO - Executing chat history query for chat_id 4a7220db-4bfe-4ee0-9b32-918a003ea2cf:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 19:21:59,565 - INFO - Saving message to DB for chat_id 4a7220db-4bfe-4ee0-9b32-918a003ea2cf, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 19:21:59,569 - INFO - Generated unique_id_with_template: uid_3994646e2b8240cfa68b6fafe24ee237_d00ee6474307f577_1752088919569
2025-07-09 19:21:59,569 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:21:59,571 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:21:59,572 - INFO - Processing query for user_id 1: Which team has the highest task throughput?
2025-07-09 19:21:59,572 - INFO - Staff ID filter: 
2025-07-09 19:21:59,572 - INFO - Generated unique_id_with_template: uid_3994646e2b8240cfa68b6fafe24ee237_d00ee6474307f577_1752088919569
2025-07-09 19:21:59,572 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:21:59,902 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:21:59,940 - INFO - Intent classification: sql
2025-07-09 19:21:59,962 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:22:00,744 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:22:01,810 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT t.name AS team_name,
       COUNT(ts.id) AS task_count
FROM teams t
LEFT JOIN tasks ts ON t.id = ts.team_id
AND t.owner_id = ts.owner_id
WHERE t.owner_id = 1
GROUP BY t.name
ORDER BY task_count DESC
LIMIT 1
2025-07-09 19:22:01,813 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 19:22:01,813 - INFO - Sample data: {'team_name': 'Help and support', 'task_count': 0}
2025-07-09 19:22:01,814 - INFO - Final prompt created with unique_id_with_template: uid_3994646e2b8240cfa68b6fafe24ee237_d00ee6474307f577_1752088919569
2025-07-09 19:22:02,163 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:22:21,599 - INFO - chat_id_enc 4a7220db-4bfe-4ee0-9b32-918a003ea2cf
2025-07-09 19:22:21,599 - INFO - Executing chat history query for chat_id 4a7220db-4bfe-4ee0-9b32-918a003ea2cf:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 19:22:21,600 - INFO - Saving message to DB for chat_id 4a7220db-4bfe-4ee0-9b32-918a003ea2cf, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 19:22:21,604 - INFO - Generated unique_id_with_template: uid_340d39a817774a038f747d72d57089c4_b0ac2766a02a8925_1752088941604
2025-07-09 19:22:21,605 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:22:21,606 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:22:21,607 - INFO - Processing query for user_id 1: where is the template
2025-07-09 19:22:21,607 - INFO - Staff ID filter: 
2025-07-09 19:22:21,607 - INFO - Generated unique_id_with_template: uid_340d39a817774a038f747d72d57089c4_b0ac2766a02a8925_1752088941604
2025-07-09 19:22:21,607 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:22:22,004 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:22:22,037 - INFO - Intent classification: chat
2025-07-09 19:22:22,038 - INFO - Final prompt created with unique_id_with_template: uid_340d39a817774a038f747d72d57089c4_b0ac2766a02a8925_1752088941604
2025-07-09 19:22:22,469 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:22:27,452 - INFO - chat_id_enc 4a7220db-4bfe-4ee0-9b32-918a003ea2cf
2025-07-09 19:22:27,453 - INFO - Executing chat history query for chat_id 4a7220db-4bfe-4ee0-9b32-918a003ea2cf:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 19:22:27,454 - INFO - Saving message to DB for chat_id 4a7220db-4bfe-4ee0-9b32-918a003ea2cf, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 19:22:27,458 - INFO - Generated unique_id_with_template: uid_11827857859c4fbd9aa42c2b42310372_4997c5b593f627f4_1752088947458
2025-07-09 19:22:27,459 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:22:27,461 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:22:27,461 - INFO - Processing query for user_id 1: yes
2025-07-09 19:22:27,462 - INFO - Staff ID filter: 
2025-07-09 19:22:27,462 - INFO - Generated unique_id_with_template: uid_11827857859c4fbd9aa42c2b42310372_4997c5b593f627f4_1752088947458
2025-07-09 19:22:27,462 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:22:27,892 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:22:27,976 - INFO - Intent classification: chat
2025-07-09 19:22:27,976 - INFO - Final prompt created with unique_id_with_template: uid_11827857859c4fbd9aa42c2b42310372_4997c5b593f627f4_1752088947458
2025-07-09 19:22:28,657 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:22:32,241 - INFO - chat_id_enc 4a7220db-4bfe-4ee0-9b32-918a003ea2cf
2025-07-09 19:22:32,242 - INFO - Executing chat history query for chat_id 4a7220db-4bfe-4ee0-9b32-918a003ea2cf:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 19:22:32,243 - INFO - Saving message to DB for chat_id 4a7220db-4bfe-4ee0-9b32-918a003ea2cf, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 19:22:32,250 - INFO - Generated unique_id_with_template: uid_83a01e7028444a49a5f34d828f4cdb99_9e0130f6d84ad5f1_1752088952250
2025-07-09 19:22:32,251 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:22:32,251 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:22:32,252 - INFO - Processing query for user_id 1: Which projects have the most open tasks?
2025-07-09 19:22:32,253 - INFO - Staff ID filter: 
2025-07-09 19:22:32,253 - INFO - Generated unique_id_with_template: uid_83a01e7028444a49a5f34d828f4cdb99_9e0130f6d84ad5f1_1752088952250
2025-07-09 19:22:32,253 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:22:32,604 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:22:32,675 - INFO - Intent classification: sql
2025-07-09 19:22:32,701 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:22:32,990 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:22:33,704 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.name AS project_name,
       COUNT(t.id) AS open_tasks_count
FROM projects p
LEFT JOIN tasks t ON p.id = t.project_id
WHERE t.status NOT IN ('Done')
  AND t.owner_id = 1
GROUP BY p.name
ORDER BY open_tasks_count DESC
2025-07-09 19:22:33,707 - INFO - Raw DB data retrieved: 10 rows
2025-07-09 19:22:33,707 - INFO - Sample data: {'project_name': 'Review', 'open_tasks_count': 48}
2025-07-09 19:22:33,708 - INFO - Final prompt created with unique_id_with_template: uid_83a01e7028444a49a5f34d828f4cdb99_9e0130f6d84ad5f1_1752088952250
2025-07-09 19:22:34,203 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:23:17,761 - INFO - Client disconnected from WebSocket
2025-07-09 19:24:08,213 - INFO - Client disconnected from WebSocket
2025-07-09 19:24:11,793 - INFO - chat_id_enc 4a7220db-4bfe-4ee0-9b32-918a003ea2cf
2025-07-09 19:24:11,794 - INFO - Executing chat history query for chat_id 4a7220db-4bfe-4ee0-9b32-918a003ea2cf:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 19:24:11,796 - INFO - Saving message to DB for chat_id 4a7220db-4bfe-4ee0-9b32-918a003ea2cf, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 19:24:11,801 - INFO - Generated unique_id_with_template: uid_a9238da009a342629cdbc0e542023570_b514a0a39d3bb2d8_1752089051801
2025-07-09 19:24:11,802 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:24:11,803 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:24:11,804 - INFO - Processing query for user_id 1: How many tasks are due in the next 7 days?
2025-07-09 19:24:11,805 - INFO - Staff ID filter: 
2025-07-09 19:24:11,805 - INFO - Generated unique_id_with_template: uid_a9238da009a342629cdbc0e542023570_b514a0a39d3bb2d8_1752089051801
2025-07-09 19:24:11,805 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:24:12,173 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:24:12,214 - INFO - Intent classification: sql
2025-07-09 19:24:12,233 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:24:12,612 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:24:13,605 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT tasks.title,
       tasks.due_date,
       projects.name AS project_name
FROM tasks
LEFT JOIN projects ON tasks.project_id = projects.id
WHERE tasks.owner_id = 1
  AND tasks.due_date IS NOT NULL
  AND tasks.due_date BETWEEN CURDATE() AND DATE_ADD(CURDATE(), INTERVAL 7 DAY)
  AND tasks.status NOT IN ('Done');
2025-07-09 19:24:13,607 - INFO - Raw DB data retrieved: 0 rows
2025-07-09 19:24:13,607 - WARNING - No data returned from SQL query
2025-07-09 19:24:13,607 - INFO - Final prompt created with unique_id_with_template: uid_a9238da009a342629cdbc0e542023570_b514a0a39d3bb2d8_1752089051801
2025-07-09 19:24:13,933 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:25:52,472 - INFO - Client disconnected from WebSocket
2025-07-09 19:25:57,153 - INFO - chat_id_enc 4a7220db-4bfe-4ee0-9b32-918a003ea2cf
2025-07-09 19:25:57,154 - INFO - Executing chat history query for chat_id 4a7220db-4bfe-4ee0-9b32-918a003ea2cf:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 19:25:57,156 - INFO - Saving message to DB for chat_id 4a7220db-4bfe-4ee0-9b32-918a003ea2cf, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 19:25:57,160 - INFO - Generated unique_id_with_template: uid_fb84d9db4cd84c49a863904a74b26093_eb312ce11b3c5eba_1752089157160
2025-07-09 19:25:57,160 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:25:57,161 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:25:57,162 - INFO - Processing query for user_id 1: What is the average time between task creation and due date?
2025-07-09 19:25:57,162 - INFO - Staff ID filter: 
2025-07-09 19:25:57,162 - INFO - Generated unique_id_with_template: uid_fb84d9db4cd84c49a863904a74b26093_eb312ce11b3c5eba_1752089157160
2025-07-09 19:25:57,162 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:25:58,096 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:25:58,146 - INFO - Intent classification: sql
2025-07-09 19:25:58,166 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:25:58,618 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:25:59,726 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT AVG(DATEDIFF(due_date, created_at)) AS average_time_between_creation_and_due_date
FROM tasks
WHERE owner_id = 1
  AND due_date IS NOT NULL
  AND created_at IS NOT NULL;
2025-07-09 19:25:59,728 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 19:25:59,728 - INFO - Sample data: {'average_time_between_creation_and_due_date': Decimal('-428.7500')}
2025-07-09 19:25:59,728 - INFO - Final prompt created with unique_id_with_template: uid_fb84d9db4cd84c49a863904a74b26093_eb312ce11b3c5eba_1752089157160
2025-07-09 19:26:00,187 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:27:20,127 - INFO - Client disconnected from WebSocket
2025-07-09 19:27:33,465 - INFO - chat_id_enc 4a7220db-4bfe-4ee0-9b32-918a003ea2cf
2025-07-09 19:27:33,466 - INFO - Executing chat history query for chat_id 4a7220db-4bfe-4ee0-9b32-918a003ea2cf:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 19:27:33,467 - INFO - Saving message to DB for chat_id 4a7220db-4bfe-4ee0-9b32-918a003ea2cf, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 19:27:33,472 - INFO - Generated unique_id_with_template: uid_05cc73192ffb4296b26c4e19498d5fe7_2bf990b69a0b12db_1752089253472
2025-07-09 19:27:33,473 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:27:33,474 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:27:33,475 - INFO - Processing query for user_id 1: give this same response
2025-07-09 19:27:33,475 - INFO - Staff ID filter: 
2025-07-09 19:27:33,475 - INFO - Generated unique_id_with_template: uid_05cc73192ffb4296b26c4e19498d5fe7_2bf990b69a0b12db_1752089253472
2025-07-09 19:27:33,475 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:27:33,966 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:27:34,029 - INFO - Intent classification: chat
2025-07-09 19:27:34,030 - INFO - Final prompt created with unique_id_with_template: uid_05cc73192ffb4296b26c4e19498d5fe7_2bf990b69a0b12db_1752089253472
2025-07-09 19:27:34,517 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:27:55,705 - INFO - Client disconnected from WebSocket
2025-07-09 19:28:01,523 - INFO - chat_id_enc 4a7220db-4bfe-4ee0-9b32-918a003ea2cf
2025-07-09 19:28:01,524 - INFO - Executing chat history query for chat_id 4a7220db-4bfe-4ee0-9b32-918a003ea2cf:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 19:28:01,526 - INFO - Saving message to DB for chat_id 4a7220db-4bfe-4ee0-9b32-918a003ea2cf, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 19:28:01,531 - INFO - Generated unique_id_with_template: uid_163c7342454f47009ca3e1f9b624be44_0b74270fb2fe18e1_1752089281531
2025-07-09 19:28:01,531 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:28:01,533 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:28:01,535 - INFO - Processing query for user_id 1: give same respnose
2025-07-09 19:28:01,535 - INFO - Staff ID filter: 
2025-07-09 19:28:01,535 - INFO - Generated unique_id_with_template: uid_163c7342454f47009ca3e1f9b624be44_0b74270fb2fe18e1_1752089281531
2025-07-09 19:28:01,535 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:28:01,998 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:28:02,047 - INFO - Intent classification: chat
2025-07-09 19:28:02,052 - INFO - Final prompt created with unique_id_with_template: uid_163c7342454f47009ca3e1f9b624be44_0b74270fb2fe18e1_1752089281531
2025-07-09 19:28:02,468 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:28:52,217 - INFO - Client disconnected from WebSocket
2025-07-09 19:29:07,196 - INFO - chat_id_enc 4a7220db-4bfe-4ee0-9b32-918a003ea2cf
2025-07-09 19:29:07,197 - INFO - Executing chat history query for chat_id 4a7220db-4bfe-4ee0-9b32-918a003ea2cf:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 19:29:07,199 - INFO - Saving message to DB for chat_id 4a7220db-4bfe-4ee0-9b32-918a003ea2cf, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 19:29:07,206 - INFO - Generated unique_id_with_template: uid_4f5bb235062d48c496ca14a18c80b400_e41e1efcccb548bd_1752089347206
2025-07-09 19:29:07,208 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:29:07,209 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:29:07,211 - INFO - Processing query for user_id 1: Which label appears most frequently in overdue tasks?
2025-07-09 19:29:07,211 - INFO - Staff ID filter: 
2025-07-09 19:29:07,211 - INFO - Generated unique_id_with_template: uid_4f5bb235062d48c496ca14a18c80b400_e41e1efcccb548bd_1752089347206
2025-07-09 19:29:07,211 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:29:07,937 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:29:07,978 - INFO - Intent classification: sql
2025-07-09 19:29:08,000 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:29:08,328 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:29:09,092 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT labels,
       COUNT(*) AS label_count
FROM tasks
WHERE owner_id = 1
  AND due_date < CURRENT_DATE
  AND status != 'Done'
GROUP BY labels
ORDER BY label_count DESC
LIMIT 1
2025-07-09 19:29:09,094 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 19:29:09,094 - INFO - Sample data: {'labels': '[]', 'label_count': 4}
2025-07-09 19:29:09,095 - INFO - Final prompt created with unique_id_with_template: uid_4f5bb235062d48c496ca14a18c80b400_e41e1efcccb548bd_1752089347206
2025-07-09 19:29:09,505 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:33:54,600 - INFO - Client disconnected from WebSocket
2025-07-09 19:34:01,216 - INFO - Client disconnected from WebSocket
2025-07-09 19:34:31,997 - INFO - Client disconnected from WebSocket
2025-07-09 19:35:22,489 - INFO - Client disconnected from WebSocket
2025-07-09 19:35:42,993 - INFO - Client disconnected from WebSocket
2025-07-09 19:35:47,713 - INFO - Client disconnected from WebSocket
2025-07-09 19:35:57,856 - INFO - Client disconnected from WebSocket
2025-07-09 19:41:51,042 - INFO - Client disconnected from WebSocket
2025-07-09 19:43:08,433 - INFO - Client disconnected from WebSocket
2025-07-09 19:43:12,947 - INFO - chat_id_enc None
2025-07-09 19:43:12,947 - INFO - Generated unique_id_with_template: uid_00e4ed2c2a4e4c12af7499d75e4915af_514ed9aa19c23255_1752090192947
2025-07-09 19:43:12,948 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:43:12,949 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:43:12,951 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-09 19:43:12,951 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-09 19:43:12,951 - INFO - Generated unique_id_with_template: uid_00e4ed2c2a4e4c12af7499d75e4915af_514ed9aa19c23255_1752090192947
2025-07-09 19:43:12,951 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:43:13,789 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:43:13,803 - INFO - Intent classification: sql
2025-07-09 19:43:13,831 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:43:14,466 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:43:15,600 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*,
       platform_users.full_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
WHERE tasks.owner_id = '1'
  AND platform_users.email = 'prebad50@gmail.com'
2025-07-09 19:43:15,608 - INFO - Raw DB data retrieved: 104 rows
2025-07-09 19:43:15,609 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1, 'full_name': 'prebad50@gmail.com'}
2025-07-09 19:43:15,613 - INFO - NO TEMPLATE
2025-07-09 19:43:15,615 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-09 19:43:17,556 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:47:29,981 - INFO - Client disconnected from WebSocket
2025-07-09 19:47:31,337 - INFO - chat_id_enc None
2025-07-09 19:47:31,337 - INFO - Generated unique_id_with_template: uid_3adbc9b9a4ed46e984c7cdc0aae4b13a_48b18e907f561102_1752090451337
2025-07-09 19:47:31,338 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:47:31,339 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:47:31,340 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-09 19:47:31,340 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-09 19:47:31,340 - INFO - Generated unique_id_with_template: uid_3adbc9b9a4ed46e984c7cdc0aae4b13a_48b18e907f561102_1752090451337
2025-07-09 19:47:31,340 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:47:31,718 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:47:31,725 - INFO - Intent classification: sql
2025-07-09 19:47:31,754 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t8\t2025-06-01 09:02:23\t2025-07-02 18:41:54\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:47:32,629 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:47:33,734 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*,
       platform_users.full_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
WHERE tasks.owner_id = '1'
  AND platform_users.email = 'prebad50@gmail.com'
2025-07-09 19:47:33,742 - INFO - Raw DB data retrieved: 104 rows
2025-07-09 19:47:33,742 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1, 'full_name': 'prebad50@gmail.com'}
2025-07-09 19:47:33,746 - INFO - NO TEMPLATE
2025-07-09 19:47:33,747 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-09 19:47:35,019 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:47:36,581 - ERROR - Streaming error: 
2025-07-09 19:47:38,108 - INFO - chat_id_enc None
2025-07-09 19:47:38,108 - INFO - Generated unique_id_with_template: uid_2e224f3e101d44af91cb4f1d311525c8_4f8f9418fe8f98b8_1752090458108
2025-07-09 19:47:38,109 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:47:38,110 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:47:38,111 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-09 19:47:38,112 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-09 19:47:38,112 - INFO - Generated unique_id_with_template: uid_2e224f3e101d44af91cb4f1d311525c8_4f8f9418fe8f98b8_1752090458108
2025-07-09 19:47:38,112 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:47:38,482 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:47:38,536 - INFO - Intent classification: sql
2025-07-09 19:47:38,559 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\tNone\t2025-06-01 09:02:23\t2025-07-09 19:47:34\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:47:39,978 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:47:41,103 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*,
       platform_users.full_name,
       projects.name AS project_name,
       teams.name AS team_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
LEFT JOIN projects ON tasks.project_id = projects.id
LEFT JOIN teams ON tasks.team_id = teams.id
WHERE tasks.owner_id = '1'
  AND platform_users.email = 'prebad50@gmail.com'
2025-07-09 19:47:41,114 - INFO - Raw DB data retrieved: 104 rows
2025-07-09 19:47:41,115 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1, 'full_name': 'prebad50@gmail.com', 'project_name': None, 'team_name': None}
2025-07-09 19:47:41,119 - INFO - NO TEMPLATE
2025-07-09 19:47:41,120 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-09 19:47:43,075 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:50:53,708 - INFO - Client disconnected from WebSocket
2025-07-09 19:50:55,197 - INFO - chat_id_enc None
2025-07-09 19:50:55,197 - INFO - Generated unique_id_with_template: uid_f88d2b12785b46bc8dd9aee9ebab2305_f237dc2c8250991b_1752090655197
2025-07-09 19:50:55,198 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:50:55,199 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:50:55,200 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-09 19:50:55,201 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-09 19:50:55,201 - INFO - Generated unique_id_with_template: uid_f88d2b12785b46bc8dd9aee9ebab2305_f237dc2c8250991b_1752090655197
2025-07-09 19:50:55,201 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:50:55,568 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:50:55,612 - INFO - Intent classification: sql
2025-07-09 19:50:55,631 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\tNone\t2025-06-01 09:02:23\t2025-07-09 19:47:34\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:50:56,935 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:50:57,632 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*,
       platform_users.full_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
WHERE tasks.owner_id = '1'
  AND platform_users.email = 'prebad50@gmail.com'
2025-07-09 19:50:57,639 - INFO - Raw DB data retrieved: 104 rows
2025-07-09 19:50:57,639 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1, 'full_name': 'prebad50@gmail.com'}
2025-07-09 19:50:57,642 - INFO - NO TEMPLATE
2025-07-09 19:50:57,643 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-09 19:50:58,529 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:51:30,316 - INFO - Client disconnected from WebSocket
2025-07-09 19:51:31,528 - INFO - chat_id_enc None
2025-07-09 19:51:31,529 - INFO - Generated unique_id_with_template: uid_c0ff4f308dce418abc5a294d9559c86b_a11ef70d62668adb_1752090691529
2025-07-09 19:51:31,529 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:51:31,530 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:51:31,531 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-09 19:51:31,531 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-09 19:51:31,531 - INFO - Generated unique_id_with_template: uid_c0ff4f308dce418abc5a294d9559c86b_a11ef70d62668adb_1752090691529
2025-07-09 19:51:31,531 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:51:31,924 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:51:31,978 - INFO - Intent classification: sql
2025-07-09 19:51:31,996 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\tNone\t2025-06-01 09:02:23\t2025-07-09 19:47:34\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:51:32,479 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:51:33,234 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*,
       platform_users.full_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
WHERE tasks.owner_id = '1'
  AND platform_users.email = 'prebad50@gmail.com'
2025-07-09 19:51:33,242 - INFO - Raw DB data retrieved: 104 rows
2025-07-09 19:51:33,243 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1, 'full_name': 'prebad50@gmail.com'}
2025-07-09 19:51:33,248 - INFO - NO TEMPLATE
2025-07-09 19:51:33,250 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-09 19:51:34,633 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:51:48,312 - INFO - Client disconnected from WebSocket
2025-07-09 19:51:49,781 - INFO - chat_id_enc None
2025-07-09 19:51:49,782 - INFO - Generated unique_id_with_template: uid_d4e7749c06394f78a5fe5c5ce700f34f_a644e04caa42c676_1752090709782
2025-07-09 19:51:49,817 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:51:49,818 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:51:49,819 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-09 19:51:49,819 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-09 19:51:49,819 - INFO - Generated unique_id_with_template: uid_d4e7749c06394f78a5fe5c5ce700f34f_a644e04caa42c676_1752090709782
2025-07-09 19:51:49,819 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:51:50,122 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:51:50,149 - INFO - Intent classification: sql
2025-07-09 19:51:50,169 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t1\t2025-06-01 09:02:23\t2025-07-09 19:51:47\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:51:50,927 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:51:52,462 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*,
       platform_users.full_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
WHERE tasks.owner_id = '1'
  AND platform_users.email = 'prebad50@gmail.com'
2025-07-09 19:51:52,471 - INFO - Raw DB data retrieved: 104 rows
2025-07-09 19:51:52,472 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1, 'full_name': 'prebad50@gmail.com'}
2025-07-09 19:51:52,476 - INFO - NO TEMPLATE
2025-07-09 19:51:52,478 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-09 19:51:53,069 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:53:24,679 - INFO - Client disconnected from WebSocket
2025-07-09 19:53:26,021 - INFO - chat_id_enc None
2025-07-09 19:53:26,021 - INFO - Generated unique_id_with_template: uid_3365cf390c594ca6a48be998ebf966f8_8503ea28fe722250_1752090806021
2025-07-09 19:53:26,022 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:53:26,023 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:53:26,024 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-09 19:53:26,024 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-09 19:53:26,025 - INFO - Generated unique_id_with_template: uid_3365cf390c594ca6a48be998ebf966f8_8503ea28fe722250_1752090806021
2025-07-09 19:53:26,025 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:53:26,355 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:53:26,371 - INFO - Intent classification: sql
2025-07-09 19:53:26,391 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t1\t2025-06-01 09:02:23\t2025-07-09 19:51:47\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:53:29,386 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:53:34,366 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*,
       platform_users.full_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
WHERE tasks.owner_id = '1'
  AND platform_users.email = 'prebad50@gmail.com'
2025-07-09 19:53:34,375 - INFO - Raw DB data retrieved: 104 rows
2025-07-09 19:53:34,376 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1, 'full_name': 'prebad50@gmail.com'}
2025-07-09 19:53:34,380 - INFO - NO TEMPLATE
2025-07-09 19:53:34,382 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-09 19:53:36,236 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:55:06,833 - INFO - Client disconnected from WebSocket
2025-07-09 19:55:09,149 - INFO - chat_id_enc None
2025-07-09 19:55:09,149 - INFO - Generated unique_id_with_template: uid_ade3a936594b49239b4ad9a0c5f8a5e7_c3d724c10573744d_1752090909149
2025-07-09 19:55:09,150 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:55:09,151 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:55:09,152 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-09 19:55:09,152 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-09 19:55:09,152 - INFO - Generated unique_id_with_template: uid_ade3a936594b49239b4ad9a0c5f8a5e7_c3d724c10573744d_1752090909149
2025-07-09 19:55:09,152 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:55:09,546 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:55:09,576 - INFO - Intent classification: sql
2025-07-09 19:55:09,603 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t1\t2025-06-01 09:02:23\t2025-07-09 19:51:47\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:55:09,885 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:55:10,613 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*,
       platform_users.full_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
WHERE tasks.owner_id = '1'
  AND platform_users.email = 'prebad50@gmail.com'
2025-07-09 19:55:10,630 - INFO - Raw DB data retrieved: 104 rows
2025-07-09 19:55:10,632 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1, 'full_name': 'prebad50@gmail.com'}
2025-07-09 19:55:10,638 - INFO - NO TEMPLATE
2025-07-09 19:55:10,639 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-09 19:55:11,327 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:55:28,045 - INFO - Client disconnected from WebSocket
2025-07-09 19:55:29,493 - INFO - chat_id_enc None
2025-07-09 19:55:29,493 - INFO - Generated unique_id_with_template: uid_4037c13c27e148f2ae90475d0389dbb9_835e08aa7617f0b5_1752090929493
2025-07-09 19:55:29,494 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:55:29,495 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:55:29,496 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-09 19:55:29,496 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-09 19:55:29,496 - INFO - Generated unique_id_with_template: uid_4037c13c27e148f2ae90475d0389dbb9_835e08aa7617f0b5_1752090929493
2025-07-09 19:55:29,496 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:55:29,836 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:55:29,895 - INFO - Intent classification: sql
2025-07-09 19:55:29,938 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:55:33,831 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:55:40,227 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*,
       platform_users.full_name,
       projects.name AS project_name,
       teams.name AS team_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
LEFT JOIN projects ON tasks.project_id = projects.id
LEFT JOIN teams ON tasks.team_id = teams.id
WHERE tasks.owner_id = '1'
  AND platform_users.email = 'prebad50@gmail.com'
2025-07-09 19:55:40,234 - INFO - Raw DB data retrieved: 104 rows
2025-07-09 19:55:40,234 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1, 'full_name': 'prebad50@gmail.com', 'project_name': None, 'team_name': None}
2025-07-09 19:55:40,238 - INFO - NO TEMPLATE
2025-07-09 19:55:40,239 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-09 19:55:40,767 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:56:33,683 - INFO - Client disconnected from WebSocket
2025-07-09 19:56:35,659 - INFO - chat_id_enc None
2025-07-09 19:56:35,659 - INFO - Generated unique_id_with_template: uid_cbac52baaa374e3cb3cc6fdfb7bd8c5d_3a6e15b6392d7944_1752090995659
2025-07-09 19:56:35,660 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:56:35,661 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:56:35,662 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-09 19:56:35,662 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-09 19:56:35,662 - INFO - Generated unique_id_with_template: uid_cbac52baaa374e3cb3cc6fdfb7bd8c5d_3a6e15b6392d7944_1752090995659
2025-07-09 19:56:35,662 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:56:36,075 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:56:36,130 - INFO - Intent classification: sql
2025-07-09 19:56:36,151 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:56:36,387 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:56:37,211 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*,
       platform_users.full_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
WHERE tasks.owner_id = '1'
  AND platform_users.email = 'prebad50@gmail.com'
2025-07-09 19:56:37,220 - INFO - Raw DB data retrieved: 104 rows
2025-07-09 19:56:37,221 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1, 'full_name': 'prebad50@gmail.com'}
2025-07-09 19:56:37,225 - INFO - NO TEMPLATE
2025-07-09 19:56:37,226 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-09 19:56:37,735 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:56:53,812 - INFO - Client disconnected from WebSocket
2025-07-09 19:56:55,195 - INFO - chat_id_enc None
2025-07-09 19:56:55,195 - INFO - Generated unique_id_with_template: uid_4f77e5fdb0ae410fa3e4bb9ae4c4ad86_ede32bc130ec1bc6_1752091015195
2025-07-09 19:56:55,196 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:56:55,197 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:56:55,198 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-09 19:56:55,198 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-09 19:56:55,198 - INFO - Generated unique_id_with_template: uid_4f77e5fdb0ae410fa3e4bb9ae4c4ad86_ede32bc130ec1bc6_1752091015195
2025-07-09 19:56:55,198 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:56:55,538 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:56:55,561 - INFO - Intent classification: sql
2025-07-09 19:56:55,584 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:56:56,329 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:56:56,963 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*,
       platform_users.full_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
WHERE tasks.owner_id = '1'
  AND platform_users.email = 'prebad50@gmail.com'
2025-07-09 19:56:56,970 - INFO - Raw DB data retrieved: 104 rows
2025-07-09 19:56:56,970 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1, 'full_name': 'prebad50@gmail.com'}
2025-07-09 19:56:56,973 - INFO - NO TEMPLATE
2025-07-09 19:56:56,975 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-09 19:56:57,953 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:57:04,256 - ERROR - Streaming error: 
2025-07-09 19:57:05,547 - INFO - chat_id_enc None
2025-07-09 19:57:05,548 - INFO - Generated unique_id_with_template: uid_a419f60da4684c35917b280a30966591_a54a9dadb2eadca9_1752091025548
2025-07-09 19:57:05,549 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:57:05,550 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:57:05,550 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-09 19:57:05,551 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-09 19:57:05,551 - INFO - Generated unique_id_with_template: uid_a419f60da4684c35917b280a30966591_a54a9dadb2eadca9_1752091025548
2025-07-09 19:57:05,551 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:57:05,920 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:57:05,936 - INFO - Intent classification: sql
2025-07-09 19:57:05,959 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:57:06,211 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:57:06,970 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*,
       platform_users.full_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
WHERE tasks.owner_id = '1'
  AND platform_users.email = 'prebad50@gmail.com'
2025-07-09 19:57:06,977 - INFO - Raw DB data retrieved: 104 rows
2025-07-09 19:57:06,977 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1, 'full_name': 'prebad50@gmail.com'}
2025-07-09 19:57:06,981 - INFO - NO TEMPLATE
2025-07-09 19:57:06,982 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-09 19:57:07,532 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:57:18,245 - INFO - Client disconnected from WebSocket
2025-07-09 19:57:19,515 - INFO - chat_id_enc None
2025-07-09 19:57:19,515 - INFO - Generated unique_id_with_template: uid_6bf54399bdb042b4b9ff4fd7fd8d7ac7_c5e835b2fce07679_1752091039515
2025-07-09 19:57:19,515 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:57:19,517 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:57:19,518 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-09 19:57:19,518 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-09 19:57:19,518 - INFO - Generated unique_id_with_template: uid_6bf54399bdb042b4b9ff4fd7fd8d7ac7_c5e835b2fce07679_1752091039515
2025-07-09 19:57:19,518 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:57:19,870 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:57:19,936 - INFO - Intent classification: sql
2025-07-09 19:57:19,959 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:57:20,244 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:57:20,997 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*,
       platform_users.full_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
WHERE tasks.owner_id = '1'
  AND platform_users.email = 'prebad50@gmail.com'
2025-07-09 19:57:21,005 - INFO - Raw DB data retrieved: 104 rows
2025-07-09 19:57:21,006 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1, 'full_name': 'prebad50@gmail.com'}
2025-07-09 19:57:21,010 - INFO - NO TEMPLATE
2025-07-09 19:57:21,012 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-09 19:57:21,733 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:58:01,376 - INFO - Client disconnected from WebSocket
2025-07-09 19:58:02,815 - INFO - chat_id_enc None
2025-07-09 19:58:02,816 - INFO - Generated unique_id_with_template: uid_5d086a7357904a08832a7271c3703808_e311e0c337e9a2e0_1752091082816
2025-07-09 19:58:02,816 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 19:58:02,817 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 19:58:02,818 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-09 19:58:02,818 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-09 19:58:02,818 - INFO - Generated unique_id_with_template: uid_5d086a7357904a08832a7271c3703808_e311e0c337e9a2e0_1752091082816
2025-07-09 19:58:02,818 - INFO - User metrics loaded: 4 metrics
2025-07-09 19:58:03,262 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:58:03,291 - INFO - Intent classification: sql
2025-07-09 19:58:03,312 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 19:58:03,673 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 19:58:04,581 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*,
       platform_users.full_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
WHERE tasks.owner_id = '1'
  AND platform_users.email = 'prebad50@gmail.com'
2025-07-09 19:58:04,588 - INFO - Raw DB data retrieved: 104 rows
2025-07-09 19:58:04,588 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1, 'full_name': 'prebad50@gmail.com'}
2025-07-09 19:58:04,591 - INFO - NO TEMPLATE
2025-07-09 19:58:04,593 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-09 19:58:05,734 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:00:53,135 - INFO - Client disconnected from WebSocket
2025-07-09 20:01:04,821 - INFO - chat_id_enc None
2025-07-09 20:01:04,821 - INFO - Generated unique_id_with_template: uid_b0705cd90f9549a4b88ceba8fb552351_874b17bcf09fd5d4_1752091264821
2025-07-09 20:01:04,822 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 20:01:04,823 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 20:01:04,824 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-09 20:01:04,824 - INFO - Staff ID filter: godswillikwan01@gmail.com
2025-07-09 20:01:04,824 - INFO - Generated unique_id_with_template: uid_b0705cd90f9549a4b88ceba8fb552351_874b17bcf09fd5d4_1752091264821
2025-07-09 20:01:04,824 - INFO - User metrics loaded: 4 metrics
2025-07-09 20:01:05,317 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:01:05,518 - INFO - Intent classification: sql
2025-07-09 20:01:05,540 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 20:01:06,763 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:01:07,754 - INFO - Generated SQL Query for user_id 1 with staff_id godswillikwan01@gmail.com:
SELECT tasks.*,
       platform_users.full_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
WHERE tasks.owner_id = '1'
  AND platform_users.email = 'godswillikwan01@gmail.com'
2025-07-09 20:01:07,764 - INFO - Raw DB data retrieved: 186 rows
2025-07-09 20:01:07,765 - INFO - Sample data: {'id': 65, 'project_id': 'f7465753-5483-476b-90b9-a1d621f2d5f8', 'team_id': 'f6a76b45-8a4f-40c9-a965-62cb1cdb5e9c', 'platform_id': '1', 'parent_id': 'e5e61301-0692-4f32-9c8d-05e285e31889', 'user_id': 'b99caeb0-2bb3-4c15-9297-e657a46a3377', 'title': 'Implement Real-Time Notifications', 'description': 'Add real-time notification support for issue updates, comments, and status changes. Notifications should be configurable per user. Acceptance criteria: Users receive notifications in real-time and can manage notification settings.', 'status': 'Canceled', 'priority': '2', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 20, 40), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 9, 11), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 20, 40), 'owner_id': 1, 'full_name': 'godswillikwan01@gmail.com'}
2025-07-09 20:01:07,771 - INFO - NO TEMPLATE
2025-07-09 20:01:07,773 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-09 20:01:10,800 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:02:08,886 - INFO - Client disconnected from WebSocket
2025-07-09 20:03:27,461 - INFO - chat_id_enc 
2025-07-09 20:03:27,685 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:03:28,368 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:03:28,859 - INFO - Created new chat with ID 156 and UUID 4ebd5a66-f399-4aff-8fd7-7c75d4453958 for user 1
2025-07-09 20:03:28,860 - INFO - 4ebd5a66-f399-4aff-8fd7-7c75d4453958
2025-07-09 20:03:28,861 - INFO - Executing chat history query for chat_id 4ebd5a66-f399-4aff-8fd7-7c75d4453958:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 20:03:28,863 - INFO - Saving message to DB for chat_id 4ebd5a66-f399-4aff-8fd7-7c75d4453958, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 20:03:28,867 - INFO - Generated unique_id_with_template: uid_283545528e194836b2375c817769be2a_2af9cef1eb953688_1752091408867
2025-07-09 20:03:28,867 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 20:03:28,868 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 20:03:28,869 - INFO - Processing query for user_id 1: Based on the following data from [TIME_PERIOD]:  - [NUMBER] tasks completed - [NUMBER] tasks overdue - [NUMBER] code reviews participated in - [NUMBER] bugs reported/fixed  Provide a balanced performance review focusing on productivity, quality, and collaboration. Include specific strengths and 2-3 actionable improvement areas.
2025-07-09 20:03:28,869 - INFO - Staff ID filter: 
2025-07-09 20:03:28,870 - INFO - Generated unique_id_with_template: uid_283545528e194836b2375c817769be2a_2af9cef1eb953688_1752091408867
2025-07-09 20:03:28,870 - INFO - User metrics loaded: 4 metrics
2025-07-09 20:03:29,317 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:03:29,335 - INFO - Intent classification: sql
2025-07-09 20:03:29,364 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 20:03:29,907 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:03:32,020 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT t.id AS task_id,
       t.title AS task_title,
       t.status AS task_status,
       t.due_date,
       t.source,
       t.created_at AS task_created_at,
       p.name AS project_name,
       pu.full_name AS user_full_name,
       tm.name AS team_name
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
AND p.owner_id = 1
LEFT JOIN platform_users pu ON t.user_id = pu.user_id
AND pu.owner_id = 1
LEFT JOIN teams tm ON t.team_id = tm.id
AND tm.owner_id = 1
WHERE t.owner_id = 1
2025-07-09 20:03:32,034 - INFO - Raw DB data retrieved: 290 rows
2025-07-09 20:03:32,034 - INFO - Sample data: {'task_id': 2, 'task_title': 'Develop Ticket Categorization Model', 'task_status': 'Duplicate', 'due_date': None, 'source': 'linear', 'task_created_at': datetime.datetime(2025, 6, 18, 18, 6, 46), 'project_name': None, 'user_full_name': 'dev.ayomide@gmail.com', 'team_name': None}
2025-07-09 20:03:32,042 - INFO - Final prompt created with unique_id_with_template: uid_283545528e194836b2375c817769be2a_2af9cef1eb953688_1752091408867
2025-07-09 20:03:33,880 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:04:00,974 - INFO - chat_id_enc 4ebd5a66-f399-4aff-8fd7-7c75d4453958
2025-07-09 20:04:00,976 - INFO - Executing chat history query for chat_id 4ebd5a66-f399-4aff-8fd7-7c75d4453958:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 20:04:00,978 - INFO - Saving message to DB for chat_id 4ebd5a66-f399-4aff-8fd7-7c75d4453958, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 20:04:00,982 - INFO - Generated unique_id_with_template: uid_69782bc9374d4952a287b340aa56c129_329a0465dad0080b_1752091440982
2025-07-09 20:04:00,983 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 20:04:00,983 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 20:04:00,984 - INFO - Processing query for user_id 1: Analyze this employee's productivity metrics: - Tasks completed: [NUMBER] (team average: [NUMBER]) - Average completion time: [TIME] (team average: [TIME]) - Sprint velocity: [NUMBER] story points  Write a performance review that addresses their efficiency, consistency, and workload management. Provide specific recommendations for improvement.
2025-07-09 20:04:00,985 - INFO - Staff ID filter: 
2025-07-09 20:04:00,985 - INFO - Generated unique_id_with_template: uid_69782bc9374d4952a287b340aa56c129_329a0465dad0080b_1752091440982
2025-07-09 20:04:00,985 - INFO - User metrics loaded: 4 metrics
2025-07-09 20:04:01,399 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:04:01,449 - INFO - Intent classification: sql
2025-07-09 20:04:01,474 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_unicode_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 20:04:02,163 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:04:04,236 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT t.title AS task_title,
       t.status AS task_status,
       t.estimate AS task_estimate,
       t.created_at AS task_created_at,
       t.updated_at AS task_updated_at,
       t.source AS task_source,
       pu.full_name AS user_full_name,
       p.name AS project_name,
       tm.name AS team_name
FROM tasks t
LEFT JOIN platform_users pu ON t.user_id = pu.user_id
AND t.owner_id = pu.owner_id
LEFT JOIN projects p ON t.project_id = p.id
AND t.owner_id = p.owner_id
LEFT JOIN teams tm ON t.team_id = tm.id
AND t.owner_id = tm.owner_id
WHERE t.owner_id = 1
ORDER BY t.updated_at DESC;
2025-07-09 20:04:04,254 - INFO - Raw DB data retrieved: 290 rows
2025-07-09 20:04:04,257 - INFO - Sample data: {'task_title': 'Customer', 'task_status': 'Backend', 'task_estimate': None, 'task_created_at': datetime.datetime(2025, 6, 29, 21, 51, 10), 'task_updated_at': datetime.datetime(2025, 6, 29, 22, 7, 41), 'task_source': 'trello', 'user_full_name': 'Savechina', 'project_name': None, 'team_name': None}
2025-07-09 20:04:04,265 - INFO - Final prompt created with unique_id_with_template: uid_69782bc9374d4952a287b340aa56c129_329a0465dad0080b_1752091440982
2025-07-09 20:04:07,438 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:04:51,040 - INFO - Client disconnected from WebSocket
2025-07-09 20:05:11,935 - INFO - chat_id_enc 4ebd5a66-f399-4aff-8fd7-7c75d4453958
2025-07-09 20:05:11,948 - INFO - Executing chat history query for chat_id 4ebd5a66-f399-4aff-8fd7-7c75d4453958:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 20:05:11,951 - INFO - Saving message to DB for chat_id 4ebd5a66-f399-4aff-8fd7-7c75d4453958, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 20:05:11,957 - INFO - Generated unique_id_with_template: uid_f6dfe76b88dc42dc99e32a8f3fdf47d4_cb6e53843d9886d9_1752091511957
2025-07-09 20:05:11,958 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 20:05:11,963 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 20:05:11,966 - INFO - Processing query for user_id 1: What percentage of tasks are currently in 'in-progress' status?
2025-07-09 20:05:11,966 - INFO - Staff ID filter: 
2025-07-09 20:05:11,966 - INFO - Generated unique_id_with_template: uid_f6dfe76b88dc42dc99e32a8f3fdf47d4_cb6e53843d9886d9_1752091511957
2025-07-09 20:05:11,967 - INFO - User metrics loaded: 4 metrics
2025-07-09 20:05:12,391 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:05:12,643 - INFO - Intent classification: sql 
2025-07-09 20:05:12,643 - INFO - Final prompt created with unique_id_with_template: uid_f6dfe76b88dc42dc99e32a8f3fdf47d4_cb6e53843d9886d9_1752091511957
2025-07-09 20:05:13,128 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:06:22,475 - INFO - Client disconnected from WebSocket
2025-07-09 20:06:33,234 - INFO - chat_id_enc 4ebd5a66-f399-4aff-8fd7-7c75d4453958
2025-07-09 20:06:33,236 - INFO - Executing chat history query for chat_id 4ebd5a66-f399-4aff-8fd7-7c75d4453958:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 20:06:33,238 - INFO - Saving message to DB for chat_id 4ebd5a66-f399-4aff-8fd7-7c75d4453958, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 20:06:33,251 - INFO - Generated unique_id_with_template: uid_30ea2727c2d043f69393c9439059454a_aea7604901bf22d9_1752091593251
2025-07-09 20:06:33,253 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 20:06:33,254 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 20:06:33,256 - INFO - Processing query for user_id 1: Which project has the highest task reassignment rate?
2025-07-09 20:06:33,256 - INFO - Staff ID filter: 
2025-07-09 20:06:33,256 - INFO - Generated unique_id_with_template: uid_30ea2727c2d043f69393c9439059454a_aea7604901bf22d9_1752091593251
2025-07-09 20:06:33,257 - INFO - User metrics loaded: 4 metrics
2025-07-09 20:06:33,761 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:06:33,831 - INFO - Intent classification: sql
2025-07-09 20:06:33,903 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 20:06:34,512 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:06:36,507 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.name AS project_name,
       COUNT(t.id) AS reassignment_count
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
AND t.owner_id = p.owner_id
WHERE t.owner_id = 1
  AND t.parent_id IS NOT NULL
GROUP BY p.name
ORDER BY reassignment_count DESC
LIMIT 1;
2025-07-09 20:06:36,512 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 20:06:36,512 - INFO - Sample data: {'project_name': None, 'reassignment_count': 155}
2025-07-09 20:06:36,512 - INFO - Final prompt created with unique_id_with_template: uid_30ea2727c2d043f69393c9439059454a_aea7604901bf22d9_1752091593251
2025-07-09 20:06:36,963 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:06:42,527 - ERROR - Streaming error: 
2025-07-09 20:06:45,737 - INFO - chat_id_enc 
2025-07-09 20:06:46,048 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:06:46,676 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:06:46,940 - INFO - Created new chat with ID 157 and UUID 091488d0-51be-4146-94ef-8f1c9f7a508a for user 1
2025-07-09 20:06:46,947 - INFO - 091488d0-51be-4146-94ef-8f1c9f7a508a
2025-07-09 20:06:46,948 - INFO - Executing chat history query for chat_id 091488d0-51be-4146-94ef-8f1c9f7a508a:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 20:06:46,949 - INFO - Saving message to DB for chat_id 091488d0-51be-4146-94ef-8f1c9f7a508a, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 20:06:46,957 - INFO - Generated unique_id_with_template: uid_9ad8481cf86d4601a9e9448941b849b5_972c75e7711f3ae7_1752091606957
2025-07-09 20:06:46,958 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 20:06:46,959 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 20:06:46,961 - INFO - Processing query for user_id 1: Which platform (Linear, Trello, Jira) has the highest task completion rate?
2025-07-09 20:06:46,961 - INFO - Staff ID filter: 
2025-07-09 20:06:46,961 - INFO - Generated unique_id_with_template: uid_9ad8481cf86d4601a9e9448941b849b5_972c75e7711f3ae7_1752091606957
2025-07-09 20:06:46,961 - INFO - User metrics loaded: 4 metrics
2025-07-09 20:06:47,562 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:06:47,667 - INFO - Intent classification: sql
2025-07-09 20:06:47,710 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 20:06:48,166 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:06:49,413 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT SOURCE,
       COUNT(CASE
                 WHEN status = 'Done' THEN 1
             END) * 100.0 / COUNT(*) AS completion_rate
FROM tasks
WHERE owner_id = 1
GROUP BY SOURCE
ORDER BY completion_rate DESC
LIMIT 1
2025-07-09 20:06:49,416 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 20:06:49,416 - INFO - Sample data: {'SOURCE': 'trello', 'completion_rate': Decimal('31.57895')}
2025-07-09 20:06:49,417 - INFO - Final prompt created with unique_id_with_template: uid_9ad8481cf86d4601a9e9448941b849b5_972c75e7711f3ae7_1752091606957
2025-07-09 20:06:50,514 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:13:05,797 - INFO - Client disconnected from WebSocket
2025-07-09 20:13:25,189 - INFO - chat_id_enc 091488d0-51be-4146-94ef-8f1c9f7a508a
2025-07-09 20:13:25,190 - INFO - Executing chat history query for chat_id 091488d0-51be-4146-94ef-8f1c9f7a508a:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 20:13:25,192 - INFO - Saving message to DB for chat_id 091488d0-51be-4146-94ef-8f1c9f7a508a, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 20:13:25,205 - INFO - Generated unique_id_with_template: uid_16a8db935601453596dce4a6b77ba7e5_c7501723267adcb9_1752092005205
2025-07-09 20:13:25,205 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 20:13:25,206 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 20:13:25,207 - INFO - Processing query for user_id 1: Which platform (Linear, Trello, Jira) has the highest task completion rate?
2025-07-09 20:13:25,207 - INFO - Staff ID filter: 
2025-07-09 20:13:25,208 - INFO - Generated unique_id_with_template: uid_16a8db935601453596dce4a6b77ba7e5_c7501723267adcb9_1752092005205
2025-07-09 20:13:25,208 - INFO - User metrics loaded: 4 metrics
2025-07-09 20:13:25,561 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:13:25,599 - INFO - Intent classification: sql
2025-07-09 20:13:25,620 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 20:13:26,839 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:13:30,976 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT SOURCE,
       COUNT(CASE
                 WHEN status = 'Done' THEN 1
             END) * 100.0 / COUNT(*) AS completion_rate
FROM tasks
WHERE owner_id = 1
GROUP BY SOURCE
ORDER BY completion_rate DESC
LIMIT 1;
2025-07-09 20:13:30,978 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 20:13:30,979 - INFO - Sample data: {'SOURCE': 'trello', 'completion_rate': Decimal('31.57895')}
2025-07-09 20:13:30,979 - INFO - Final prompt created with unique_id_with_template: uid_16a8db935601453596dce4a6b77ba7e5_c7501723267adcb9_1752092005205
2025-07-09 20:13:31,529 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:14:06,061 - INFO - Client disconnected from WebSocket
2025-07-09 20:14:12,898 - INFO - Client disconnected from WebSocket
2025-07-09 20:16:18,967 - INFO - Client disconnected from WebSocket
2025-07-09 20:16:35,396 - INFO - chat_id_enc 091488d0-51be-4146-94ef-8f1c9f7a508a
2025-07-09 20:16:35,397 - INFO - Executing chat history query for chat_id 091488d0-51be-4146-94ef-8f1c9f7a508a:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 20:16:35,398 - INFO - Saving message to DB for chat_id 091488d0-51be-4146-94ef-8f1c9f7a508a, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 20:16:35,410 - INFO - Generated unique_id_with_template: uid_df9481a71ac24865ad9a12aa672ef293_1c6edc836bb35023_1752092195410
2025-07-09 20:16:35,411 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 20:16:35,413 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 20:16:35,415 - INFO - Processing query for user_id 1: Which tasks are overdue and not in 'completed' status?
2025-07-09 20:16:35,415 - INFO - Staff ID filter: 
2025-07-09 20:16:35,415 - INFO - Generated unique_id_with_template: uid_df9481a71ac24865ad9a12aa672ef293_1c6edc836bb35023_1752092195410
2025-07-09 20:16:35,415 - INFO - User metrics loaded: 4 metrics
2025-07-09 20:16:35,819 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:16:35,878 - INFO - Intent classification: sql
2025-07-09 20:16:35,940 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 20:16:36,199 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:16:38,045 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT tasks.id,
       tasks.title,
       tasks.status,
       tasks.due_date,
       platform_users.full_name AS user_name,
       projects.name AS project_name
FROM tasks
LEFT JOIN platform_users ON tasks.user_id = platform_users.user_id
AND tasks.owner_id = platform_users.owner_id
LEFT JOIN projects ON tasks.project_id = projects.id
AND tasks.owner_id = projects.owner_id
WHERE tasks.owner_id = 1
  AND tasks.status NOT LIKE 'Done'
  AND (tasks.due_date IS NOT NULL
       AND tasks.due_date < CURRENT_DATE)
2025-07-09 20:16:38,048 - INFO - Raw DB data retrieved: 5 rows
2025-07-09 20:16:38,048 - INFO - Sample data: {'id': 315, 'title': 'Admin should set time to barb one person', 'status': 'To Do', 'due_date': '2023-04-11 23:26:00', 'user_name': 'Savechina', 'project_name': 'Review'}
2025-07-09 20:16:38,049 - INFO - Final prompt created with unique_id_with_template: uid_df9481a71ac24865ad9a12aa672ef293_1c6edc836bb35023_1752092195410
2025-07-09 20:16:38,559 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:19:56,196 - INFO - Client disconnected from WebSocket
2025-07-09 20:20:19,157 - INFO - chat_id_enc 091488d0-51be-4146-94ef-8f1c9f7a508a
2025-07-09 20:20:19,157 - INFO - Executing chat history query for chat_id 091488d0-51be-4146-94ef-8f1c9f7a508a:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 20:20:19,159 - INFO - Saving message to DB for chat_id 091488d0-51be-4146-94ef-8f1c9f7a508a, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 20:20:19,174 - INFO - Generated unique_id_with_template: uid_fc609770807948f8919f1198b0fa7266_5c34d3ec3aa61819_1752092419174
2025-07-09 20:20:19,176 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 20:20:19,179 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 20:20:19,180 - INFO - Processing query for user_id 1: Which labels are used most across high-priority tasks?
2025-07-09 20:20:19,181 - INFO - Staff ID filter: 
2025-07-09 20:20:19,181 - INFO - Generated unique_id_with_template: uid_fc609770807948f8919f1198b0fa7266_5c34d3ec3aa61819_1752092419174
2025-07-09 20:20:19,181 - INFO - User metrics loaded: 4 metrics
2025-07-09 20:20:20,023 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:20:20,074 - INFO - Intent classification: sql
2025-07-09 20:20:20,129 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 20:20:20,735 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:20:21,764 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT t.labels,
       COUNT(t.id) AS label_count
FROM tasks t
LEFT JOIN platform_users pu ON t.user_id = pu.user_id
WHERE t.priority = 'high'
  AND t.owner_id = 1
GROUP BY t.labels
ORDER BY label_count DESC;
2025-07-09 20:20:21,783 - INFO - Raw DB data retrieved: 0 rows
2025-07-09 20:20:21,783 - WARNING - No data returned from SQL query
2025-07-09 20:20:21,784 - INFO - Final prompt created with unique_id_with_template: uid_fc609770807948f8919f1198b0fa7266_5c34d3ec3aa61819_1752092419174
2025-07-09 20:20:22,367 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:20:41,396 - INFO - chat_id_enc 091488d0-51be-4146-94ef-8f1c9f7a508a
2025-07-09 20:20:41,397 - INFO - Executing chat history query for chat_id 091488d0-51be-4146-94ef-8f1c9f7a508a:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 20:20:41,399 - INFO - Saving message to DB for chat_id 091488d0-51be-4146-94ef-8f1c9f7a508a, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 20:20:41,404 - INFO - Generated unique_id_with_template: uid_41fbc653e37a4f2abd4ce4123b27dc5c_caa65b51e6c16a87_1752092441403
2025-07-09 20:20:41,404 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 20:20:41,405 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 20:20:41,406 - INFO - Processing query for user_id 1: give template
2025-07-09 20:20:41,406 - INFO - Staff ID filter: 
2025-07-09 20:20:41,406 - INFO - Generated unique_id_with_template: uid_41fbc653e37a4f2abd4ce4123b27dc5c_caa65b51e6c16a87_1752092441403
2025-07-09 20:20:41,406 - INFO - User metrics loaded: 4 metrics
2025-07-09 20:20:41,740 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:20:41,798 - INFO - Intent classification: chat
2025-07-09 20:20:41,799 - INFO - Final prompt created with unique_id_with_template: uid_41fbc653e37a4f2abd4ce4123b27dc5c_caa65b51e6c16a87_1752092441403
2025-07-09 20:20:42,294 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:24:06,882 - INFO - Client disconnected from WebSocket
2025-07-09 20:25:58,037 - INFO - Client disconnected from WebSocket
2025-07-09 20:26:23,591 - INFO - chat_id_enc 091488d0-51be-4146-94ef-8f1c9f7a508a
2025-07-09 20:26:23,592 - INFO - Executing chat history query for chat_id 091488d0-51be-4146-94ef-8f1c9f7a508a:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 20:26:23,595 - INFO - Saving message to DB for chat_id 091488d0-51be-4146-94ef-8f1c9f7a508a, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 20:26:23,617 - INFO - Generated unique_id_with_template: uid_126b07e87fbb425ebc373226ee407e4e_a28e28b4cf2d9845_1752092783617
2025-07-09 20:26:23,618 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 20:26:23,620 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 20:26:23,621 - INFO - Processing query for user_id 1: Which team has the highest task throughput?
2025-07-09 20:26:23,622 - INFO - Staff ID filter: 
2025-07-09 20:26:23,622 - INFO - Generated unique_id_with_template: uid_126b07e87fbb425ebc373226ee407e4e_a28e28b4cf2d9845_1752092783617
2025-07-09 20:26:23,622 - INFO - User metrics loaded: 4 metrics
2025-07-09 20:26:24,431 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:26:24,580 - INFO - Intent classification: sql
2025-07-09 20:26:24,605 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 20:26:25,486 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:26:28,219 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT t.name AS team_name,
       COUNT(ts.id) AS task_throughput
FROM teams t
LEFT JOIN tasks ts ON t.id = ts.team_id
WHERE ts.owner_id = 1
GROUP BY t.name
ORDER BY task_throughput DESC
LIMIT 1
2025-07-09 20:26:28,221 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 20:26:28,221 - INFO - Sample data: {'team_name': 'Marketing', 'task_throughput': 22}
2025-07-09 20:26:28,221 - INFO - Final prompt created with unique_id_with_template: uid_126b07e87fbb425ebc373226ee407e4e_a28e28b4cf2d9845_1752092783617
2025-07-09 20:26:28,664 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:26:44,472 - INFO - chat_id_enc 091488d0-51be-4146-94ef-8f1c9f7a508a
2025-07-09 20:26:44,473 - INFO - Executing chat history query for chat_id 091488d0-51be-4146-94ef-8f1c9f7a508a:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 20:26:44,476 - INFO - Saving message to DB for chat_id 091488d0-51be-4146-94ef-8f1c9f7a508a, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 20:26:44,484 - INFO - Generated unique_id_with_template: uid_f3ed8e9eef4943e2977352c9c8ed8645_a35910ae27122747_1752092804484
2025-07-09 20:26:44,484 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 20:26:44,487 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 20:26:44,490 - INFO - Processing query for user_id 1: thanks
2025-07-09 20:26:44,490 - INFO - Staff ID filter: 
2025-07-09 20:26:44,490 - INFO - Generated unique_id_with_template: uid_f3ed8e9eef4943e2977352c9c8ed8645_a35910ae27122747_1752092804484
2025-07-09 20:26:44,490 - INFO - User metrics loaded: 4 metrics
2025-07-09 20:26:44,979 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:26:45,054 - INFO - Intent classification: chat
2025-07-09 20:26:45,054 - INFO - Final prompt created with unique_id_with_template: uid_f3ed8e9eef4943e2977352c9c8ed8645_a35910ae27122747_1752092804484
2025-07-09 20:26:45,642 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:27:02,245 - INFO - chat_id_enc 
2025-07-09 20:27:02,715 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:27:04,039 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:27:04,411 - INFO - Created new chat with ID 158 and UUID 8ea9155c-2e6f-4db6-a00d-7b5b3b949182 for user 1
2025-07-09 20:27:04,412 - INFO - 8ea9155c-2e6f-4db6-a00d-7b5b3b949182
2025-07-09 20:27:04,413 - INFO - Executing chat history query for chat_id 8ea9155c-2e6f-4db6-a00d-7b5b3b949182:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 20:27:04,416 - INFO - Saving message to DB for chat_id 8ea9155c-2e6f-4db6-a00d-7b5b3b949182, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 20:27:04,421 - INFO - Generated unique_id_with_template: uid_7dda0a9403ab445fa1da7ec4a796ade4_fc3fa91b032e5223_1752092824421
2025-07-09 20:27:04,422 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 20:27:04,423 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 20:27:04,424 - INFO - Processing query for user_id 1: Which projects have the most overdue tasks?
2025-07-09 20:27:04,424 - INFO - Staff ID filter: 
2025-07-09 20:27:04,424 - INFO - Generated unique_id_with_template: uid_7dda0a9403ab445fa1da7ec4a796ade4_fc3fa91b032e5223_1752092824421
2025-07-09 20:27:04,424 - INFO - User metrics loaded: 4 metrics
2025-07-09 20:27:04,916 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:27:04,960 - INFO - Intent classification: sql
2025-07-09 20:27:04,980 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 20:27:05,512 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:27:06,455 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.name AS project_name,
       COUNT(t.id) AS overdue_task_count
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
WHERE t.due_date < CURRENT_DATE
  AND t.status != 'Done'
  AND t.owner_id = 1
GROUP BY p.name
ORDER BY overdue_task_count DESC;
2025-07-09 20:27:06,457 - INFO - Raw DB data retrieved: 2 rows
2025-07-09 20:27:06,458 - INFO - Sample data: {'project_name': 'Review', 'overdue_task_count': 4}
2025-07-09 20:27:06,458 - INFO - Final prompt created with unique_id_with_template: uid_7dda0a9403ab445fa1da7ec4a796ade4_fc3fa91b032e5223_1752092824421
2025-07-09 20:27:06,816 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 20:45:24,728 - INFO - Client disconnected from WebSocket
2025-07-09 20:50:40,178 - INFO - Client disconnected from WebSocket
2025-07-09 21:00:18,217 - INFO - chat_id_enc 
2025-07-09 21:00:19,179 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:00:19,802 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:00:20,450 - INFO - Created new chat with ID 159 and UUID e7c3478e-2986-4610-89d2-92b90117a2e3 for user 1
2025-07-09 21:00:20,450 - INFO - e7c3478e-2986-4610-89d2-92b90117a2e3
2025-07-09 21:00:20,453 - INFO - Executing chat history query for chat_id e7c3478e-2986-4610-89d2-92b90117a2e3:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 21:00:20,455 - INFO - Saving message to DB for chat_id e7c3478e-2986-4610-89d2-92b90117a2e3, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 21:00:20,476 - INFO - Generated unique_id_with_template: uid_b5c41f9b1b9e4833844a8cb5af995fa4_c62b6cdc1044064b_1752094820476
2025-07-09 21:00:20,478 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 21:00:20,495 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 21:00:20,497 - INFO - Processing query for user_id 1: How many tasks were synced in the last 24 hours?
2025-07-09 21:00:20,498 - INFO - Staff ID filter: 
2025-07-09 21:00:20,498 - INFO - Generated unique_id_with_template: uid_b5c41f9b1b9e4833844a8cb5af995fa4_c62b6cdc1044064b_1752094820476
2025-07-09 21:00:20,499 - INFO - User metrics loaded: 4 metrics
2025-07-09 21:00:20,981 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:00:21,026 - INFO - Intent classification: sql
2025-07-09 21:00:21,071 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 21:00:21,970 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:00:22,429 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT COUNT(*) AS task_count
FROM tasks
WHERE owner_id = 1
  AND last_synced_at >= NOW() - INTERVAL 1 DAY;
2025-07-09 21:00:22,441 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 21:00:22,441 - INFO - Sample data: {'task_count': 0}
2025-07-09 21:00:22,442 - INFO - Final prompt created with unique_id_with_template: uid_b5c41f9b1b9e4833844a8cb5af995fa4_c62b6cdc1044064b_1752094820476
2025-07-09 21:00:23,161 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:01:04,733 - INFO - chat_id_enc 
2025-07-09 21:01:05,180 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:01:05,976 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:01:06,137 - INFO - Created new chat with ID 160 and UUID b5b2c50d-a143-465b-8470-1172ab7c7730 for user 1
2025-07-09 21:01:06,138 - INFO - b5b2c50d-a143-465b-8470-1172ab7c7730
2025-07-09 21:01:06,140 - INFO - Executing chat history query for chat_id b5b2c50d-a143-465b-8470-1172ab7c7730:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 21:01:06,143 - INFO - Saving message to DB for chat_id b5b2c50d-a143-465b-8470-1172ab7c7730, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 21:01:06,155 - INFO - Generated unique_id_with_template: uid_2128a19e2ddc491bba9e10f62e16d876_ebc58237fe1375e9_1752094866155
2025-07-09 21:01:06,156 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 21:01:06,159 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 21:01:06,161 - INFO - Processing query for user_id 1: what are the tasks completion rate of my team
2025-07-09 21:01:06,162 - INFO - Staff ID filter: 
2025-07-09 21:01:06,162 - INFO - Generated unique_id_with_template: uid_2128a19e2ddc491bba9e10f62e16d876_ebc58237fe1375e9_1752094866155
2025-07-09 21:01:06,162 - INFO - User metrics loaded: 4 metrics
2025-07-09 21:01:06,591 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:01:06,635 - INFO - Intent classification: sql
2025-07-09 21:01:06,663 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 21:01:07,218 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:01:08,908 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT t.title AS task_title,
       t.status,
       p.name AS project_name,
       tm.name AS team_name,
       pu.full_name AS user_name
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
LEFT JOIN teams tm ON t.team_id = tm.id
LEFT JOIN platform_users pu ON t.user_id = pu.user_id
WHERE t.owner_id = 1
2025-07-09 21:01:08,935 - INFO - Raw DB data retrieved: 875 rows
2025-07-09 21:01:08,935 - INFO - Sample data: {'task_title': 'Develop Ticket Categorization Model', 'status': 'Duplicate', 'project_name': None, 'team_name': None, 'user_name': 'dev.ayomide@gmail.com'}
2025-07-09 21:01:08,946 - INFO - Final prompt created with unique_id_with_template: uid_2128a19e2ddc491bba9e10f62e16d876_ebc58237fe1375e9_1752094866155
2025-07-09 21:01:11,484 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:01:23,600 - ERROR - Streaming error: 
2025-07-09 21:01:41,177 - INFO - chat_id_enc 
2025-07-09 21:01:42,007 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:01:42,513 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:01:42,795 - INFO - Created new chat with ID 161 and UUID 0dcd70b4-f576-4687-b82e-ee4d3dc08073 for user 1
2025-07-09 21:01:42,795 - INFO - 0dcd70b4-f576-4687-b82e-ee4d3dc08073
2025-07-09 21:01:42,796 - INFO - Executing chat history query for chat_id 0dcd70b4-f576-4687-b82e-ee4d3dc08073:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 21:01:42,797 - INFO - Saving message to DB for chat_id 0dcd70b4-f576-4687-b82e-ee4d3dc08073, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 21:01:42,801 - INFO - Generated unique_id_with_template: uid_e941810c814040fe9030f3535e0d5466_5ff7c07e7d9a45ff_1752094902801
2025-07-09 21:01:42,802 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 21:01:42,804 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 21:01:42,805 - INFO - Processing query for user_id 1: what is the task completion rate of my team?
2025-07-09 21:01:42,805 - INFO - Staff ID filter: 
2025-07-09 21:01:42,805 - INFO - Generated unique_id_with_template: uid_e941810c814040fe9030f3535e0d5466_5ff7c07e7d9a45ff_1752094902801
2025-07-09 21:01:42,805 - INFO - User metrics loaded: 4 metrics
2025-07-09 21:01:43,218 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:01:43,260 - INFO - Intent classification: sql
2025-07-09 21:01:43,305 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 21:01:43,641 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:01:45,108 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT t.id AS task_id,
       t.title AS task_title,
       t.status AS task_status,
       p.name AS project_name,
       tm.name AS team_name,
       pu.full_name AS user_name
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
AND p.owner_id = 1
LEFT JOIN teams tm ON t.team_id = tm.id
AND tm.owner_id = 1
LEFT JOIN platform_users pu ON t.user_id = pu.user_id
AND pu.owner_id = 1
WHERE t.owner_id = 1
2025-07-09 21:01:45,114 - INFO - Raw DB data retrieved: 290 rows
2025-07-09 21:01:45,115 - INFO - Sample data: {'task_id': 2, 'task_title': 'Develop Ticket Categorization Model', 'task_status': 'Duplicate', 'project_name': None, 'team_name': None, 'user_name': 'dev.ayomide@gmail.com'}
2025-07-09 21:01:45,121 - INFO - Final prompt created with unique_id_with_template: uid_e941810c814040fe9030f3535e0d5466_5ff7c07e7d9a45ff_1752094902801
2025-07-09 21:01:46,332 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:15:54,225 - INFO - chat_id_enc 
2025-07-09 21:15:54,891 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:16:00,199 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:16:00,380 - INFO - Created new chat with ID 162 and UUID 56e842cb-73d8-4b0c-ae9d-9c4059096ea5 for user 1
2025-07-09 21:16:00,381 - INFO - 56e842cb-73d8-4b0c-ae9d-9c4059096ea5
2025-07-09 21:16:00,382 - INFO - Executing chat history query for chat_id 56e842cb-73d8-4b0c-ae9d-9c4059096ea5:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 21:16:00,383 - INFO - Saving message to DB for chat_id 56e842cb-73d8-4b0c-ae9d-9c4059096ea5, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 21:16:00,389 - INFO - Generated unique_id_with_template: uid_4ac7c84b448443c4b2f0710d813543b5_6fefea8b3c5eb3c4_1752095760389
2025-07-09 21:16:00,389 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 21:16:00,390 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 21:16:00,391 - INFO - Processing query for user_id 1: give me my team report for last month
2025-07-09 21:16:00,391 - INFO - Staff ID filter: 
2025-07-09 21:16:00,391 - INFO - Generated unique_id_with_template: uid_4ac7c84b448443c4b2f0710d813543b5_6fefea8b3c5eb3c4_1752095760389
2025-07-09 21:16:00,391 - INFO - User metrics loaded: 4 metrics
2025-07-09 21:16:01,042 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:16:01,100 - INFO - Intent classification: sql
2025-07-09 21:16:01,124 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 21:16:01,564 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:16:05,831 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT t.id AS task_id,
       t.title AS task_title,
       t.status AS task_status,
       t.estimate AS task_estimate,
       t.due_date AS task_due_date,
       p.name AS project_name,
       tm.name AS team_name,
       pu.full_name AS user_name
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
AND p.owner_id = 1
LEFT JOIN teams tm ON t.team_id = tm.id
AND tm.owner_id = 1
LEFT JOIN platform_users pu ON t.user_id = pu.user_id
AND pu.owner_id = 1
WHERE t.owner_id = 1
  AND t.created_at >= DATE_SUB(CURDATE(), INTERVAL 1 MONTH)
  AND t.created_at < CURDATE();
2025-07-09 21:16:05,837 - INFO - Raw DB data retrieved: 174 rows
2025-07-09 21:16:05,838 - INFO - Sample data: {'task_id': 2, 'task_title': 'Develop Ticket Categorization Model', 'task_status': 'Duplicate', 'task_estimate': 13.0, 'task_due_date': None, 'project_name': None, 'team_name': None, 'user_name': 'dev.ayomide@gmail.com'}
2025-07-09 21:16:05,840 - INFO - Final prompt created with unique_id_with_template: uid_4ac7c84b448443c4b2f0710d813543b5_6fefea8b3c5eb3c4_1752095760389
2025-07-09 21:16:06,944 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:25:56,472 - INFO - chat_id_enc 
2025-07-09 21:25:57,144 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:25:57,600 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:25:57,820 - INFO - Created new chat with ID 163 and UUID 8e058232-0053-44b6-8a93-079f6993c6ee for user 1
2025-07-09 21:25:57,820 - INFO - 8e058232-0053-44b6-8a93-079f6993c6ee
2025-07-09 21:25:57,824 - INFO - Executing chat history query for chat_id 8e058232-0053-44b6-8a93-079f6993c6ee:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 21:25:57,826 - INFO - Saving message to DB for chat_id 8e058232-0053-44b6-8a93-079f6993c6ee, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 21:25:57,834 - INFO - Generated unique_id_with_template: uid_484d45ae476444e9815169d5486f975b_2aaa3855e9a14a46_1752096357834
2025-07-09 21:25:57,836 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 21:25:57,837 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 21:25:57,838 - INFO - Processing query for user_id 1: give me an insight of my team performance
2025-07-09 21:25:57,838 - INFO - Staff ID filter: 
2025-07-09 21:25:57,838 - INFO - Generated unique_id_with_template: uid_484d45ae476444e9815169d5486f975b_2aaa3855e9a14a46_1752096357834
2025-07-09 21:25:57,838 - INFO - User metrics loaded: 4 metrics
2025-07-09 21:25:58,607 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:25:58,665 - INFO - Intent classification: sql
2025-07-09 21:25:58,694 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 21:25:59,099 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:26:02,656 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT t.title AS task_title,
       t.status AS task_status,
       t.estimate AS task_estimate,
       p.name AS project_name,
       pu.full_name AS user_full_name,
       tm.name AS team_name
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
AND p.owner_id = 1
LEFT JOIN platform_users pu ON t.user_id = pu.user_id
AND pu.owner_id = 1
LEFT JOIN teams tm ON t.team_id = tm.team_key
AND tm.owner_id = 1
WHERE t.owner_id = 1;
2025-07-09 21:26:02,666 - INFO - Raw DB data retrieved: 290 rows
2025-07-09 21:26:02,667 - INFO - Sample data: {'task_title': 'Develop Ticket Categorization Model', 'task_status': 'Duplicate', 'task_estimate': 13.0, 'project_name': None, 'user_full_name': 'dev.ayomide@gmail.com', 'team_name': 'Help and support'}
2025-07-09 21:26:02,672 - INFO - Final prompt created with unique_id_with_template: uid_484d45ae476444e9815169d5486f975b_2aaa3855e9a14a46_1752096357834
2025-07-09 21:26:04,023 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:38:25,143 - INFO - chat_id_enc 
2025-07-09 21:38:25,483 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:38:26,000 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:38:26,278 - INFO - Created new chat with ID 164 and UUID a136f640-cce5-4a08-88ea-c81ca8c392c1 for user 1
2025-07-09 21:38:26,278 - INFO - a136f640-cce5-4a08-88ea-c81ca8c392c1
2025-07-09 21:38:26,279 - INFO - Executing chat history query for chat_id a136f640-cce5-4a08-88ea-c81ca8c392c1:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 21:38:26,281 - INFO - Saving message to DB for chat_id a136f640-cce5-4a08-88ea-c81ca8c392c1, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 21:38:26,289 - INFO - Generated unique_id_with_template: uid_5539687f6a7843cd837a6cfb2e842c04_f2e96921881623bd_1752097106288
2025-07-09 21:38:26,289 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 21:38:26,290 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 21:38:26,291 - INFO - Processing query for user_id 1: Which platform has the most deleted or cancelled tasks?
2025-07-09 21:38:26,291 - INFO - Staff ID filter: 
2025-07-09 21:38:26,292 - INFO - Generated unique_id_with_template: uid_5539687f6a7843cd837a6cfb2e842c04_f2e96921881623bd_1752097106288
2025-07-09 21:38:26,292 - INFO - User metrics loaded: 4 metrics
2025-07-09 21:38:26,814 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:38:26,867 - INFO - Intent classification: sql
2025-07-09 21:38:26,885 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 21:38:27,399 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:38:28,586 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT SOURCE,
       COUNT(*) AS cancelled_or_deleted_count
FROM tasks
WHERE (status = 'Canceled'
       OR is_deleted = 1)
  AND owner_id = 1
GROUP BY SOURCE
ORDER BY cancelled_or_deleted_count DESC
2025-07-09 21:38:28,589 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 21:38:28,589 - INFO - Sample data: {'SOURCE': 'linear', 'cancelled_or_deleted_count': 23}
2025-07-09 21:38:28,589 - INFO - Final prompt created with unique_id_with_template: uid_5539687f6a7843cd837a6cfb2e842c04_f2e96921881623bd_1752097106288
2025-07-09 21:38:29,425 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:41:51,883 - INFO - chat_id_enc 
2025-07-09 21:41:52,363 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:41:52,887 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:41:53,048 - INFO - Created new chat with ID 165 and UUID 23f3f34d-397b-4699-92ad-fe9391d1b9ec for user 1
2025-07-09 21:41:53,049 - INFO - 23f3f34d-397b-4699-92ad-fe9391d1b9ec
2025-07-09 21:41:53,050 - INFO - Executing chat history query for chat_id 23f3f34d-397b-4699-92ad-fe9391d1b9ec:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 21:41:53,051 - INFO - Saving message to DB for chat_id 23f3f34d-397b-4699-92ad-fe9391d1b9ec, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 21:41:53,054 - INFO - Generated unique_id_with_template: uid_5e5e2f34143e4b9b9b1010a05a8a4dea_b98d371d8031be67_1752097313054
2025-07-09 21:41:53,054 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 21:41:53,055 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 21:41:53,056 - INFO - Processing query for user_id 1: whats the average tasks completion rate of my team?
2025-07-09 21:41:53,056 - INFO - Staff ID filter: 
2025-07-09 21:41:53,056 - INFO - Generated unique_id_with_template: uid_5e5e2f34143e4b9b9b1010a05a8a4dea_b98d371d8031be67_1752097313054
2025-07-09 21:41:53,056 - INFO - User metrics loaded: 4 metrics
2025-07-09 21:41:53,577 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:41:53,648 - INFO - Intent classification: sql
2025-07-09 21:41:53,669 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 21:41:54,107 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:41:55,769 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT t.team_id,
       tm.name AS team_name,
       COUNT(t.id) AS total_tasks,
       SUM(CASE
               WHEN t.status = 'Done' THEN 1
               ELSE 0
           END) AS completed_tasks,
       (SUM(CASE
                WHEN t.status = 'Done' THEN 1
                ELSE 0
            END) / COUNT(t.id)) * 100 AS completion_rate
FROM tasks t
LEFT JOIN teams tm ON t.team_id = tm.id
WHERE t.owner_id = 1
GROUP BY t.team_id,
         tm.name
2025-07-09 21:41:55,771 - INFO - Raw DB data retrieved: 6 rows
2025-07-09 21:41:55,772 - INFO - Sample data: {'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'team_name': None, 'total_tasks': 60, 'completed_tasks': Decimal('9'), 'completion_rate': Decimal('15.0000')}
2025-07-09 21:41:55,772 - INFO - Final prompt created with unique_id_with_template: uid_5e5e2f34143e4b9b9b1010a05a8a4dea_b98d371d8031be67_1752097313054
2025-07-09 21:41:56,511 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:42:33,631 - INFO - chat_id_enc 
2025-07-09 21:42:34,027 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:42:34,416 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:42:34,536 - INFO - Created new chat with ID 166 and UUID 4909fe1d-258f-4c3b-b11d-008a4a495dbd for user 1
2025-07-09 21:42:34,536 - INFO - 4909fe1d-258f-4c3b-b11d-008a4a495dbd
2025-07-09 21:42:34,537 - INFO - Executing chat history query for chat_id 4909fe1d-258f-4c3b-b11d-008a4a495dbd:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 21:42:34,538 - INFO - Saving message to DB for chat_id 4909fe1d-258f-4c3b-b11d-008a4a495dbd, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 21:42:34,541 - INFO - Generated unique_id_with_template: uid_c3df01e1860b4fdd98f16ae8882b2f73_a6b3edad2b5c40f1_1752097354541
2025-07-09 21:42:34,541 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 21:42:34,542 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 21:42:34,544 - INFO - Processing query for user_id 1: Which project has the highest estimated workload?
2025-07-09 21:42:34,544 - INFO - Staff ID filter: 
2025-07-09 21:42:34,544 - INFO - Generated unique_id_with_template: uid_c3df01e1860b4fdd98f16ae8882b2f73_a6b3edad2b5c40f1_1752097354541
2025-07-09 21:42:34,544 - INFO - User metrics loaded: 4 metrics
2025-07-09 21:42:34,865 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:42:34,879 - INFO - Intent classification: sql
2025-07-09 21:42:34,900 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 21:42:35,167 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:42:35,841 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.name AS project_name,
       SUM(t.estimate) AS total_estimate
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
WHERE t.owner_id = 1
GROUP BY p.name
ORDER BY total_estimate DESC
LIMIT 1;
2025-07-09 21:42:35,844 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 21:42:35,844 - INFO - Sample data: {'project_name': "Barber's update", 'total_estimate': 75.0}
2025-07-09 21:42:35,844 - INFO - Final prompt created with unique_id_with_template: uid_c3df01e1860b4fdd98f16ae8882b2f73_a6b3edad2b5c40f1_1752097354541
2025-07-09 21:42:36,244 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:43:33,083 - INFO - chat_id_enc 
2025-07-09 21:43:33,495 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:43:34,025 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:43:34,222 - INFO - Created new chat with ID 167 and UUID 0609b746-fe07-48af-b5fc-70dc136fdd51 for user 1
2025-07-09 21:43:34,222 - INFO - 0609b746-fe07-48af-b5fc-70dc136fdd51
2025-07-09 21:43:34,223 - INFO - Executing chat history query for chat_id 0609b746-fe07-48af-b5fc-70dc136fdd51:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 21:43:34,224 - INFO - Saving message to DB for chat_id 0609b746-fe07-48af-b5fc-70dc136fdd51, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 21:43:34,228 - INFO - Generated unique_id_with_template: uid_033941ab73b247d49ad8570029d59e8b_25be22c7c57dff2a_1752097414228
2025-07-09 21:43:34,228 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 21:43:34,229 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 21:43:34,230 - INFO - Processing query for user_id 1: best team performance month?
2025-07-09 21:43:34,230 - INFO - Staff ID filter: 
2025-07-09 21:43:34,231 - INFO - Generated unique_id_with_template: uid_033941ab73b247d49ad8570029d59e8b_25be22c7c57dff2a_1752097414228
2025-07-09 21:43:34,231 - INFO - User metrics loaded: 4 metrics
2025-07-09 21:43:34,602 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:43:34,651 - INFO - Intent classification: sql
2025-07-09 21:43:34,671 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 21:43:35,113 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:43:36,949 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT t.name AS team_name,
       COUNT(ts.id) AS total_tasks,
       SUM(CASE
               WHEN ts.status = 'Done' THEN 1
               ELSE 0
           END) AS completed_tasks
FROM teams t
LEFT JOIN tasks ts ON t.id = ts.team_id
WHERE t.owner_id = 1
GROUP BY t.name
ORDER BY completed_tasks DESC,
         total_tasks DESC
2025-07-09 21:43:36,951 - INFO - Raw DB data retrieved: 6 rows
2025-07-09 21:43:36,951 - INFO - Sample data: {'team_name': 'Help and support', 'total_tasks': 0, 'completed_tasks': Decimal('0')}
2025-07-09 21:43:36,952 - INFO - Final prompt created with unique_id_with_template: uid_033941ab73b247d49ad8570029d59e8b_25be22c7c57dff2a_1752097414228
2025-07-09 21:43:37,341 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:44:07,611 - INFO - chat_id_enc 
2025-07-09 21:44:08,092 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:44:08,620 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:44:08,793 - INFO - Created new chat with ID 168 and UUID ede3a84f-7a9f-4f5c-95d8-445d676b7b15 for user 1
2025-07-09 21:44:08,793 - INFO - ede3a84f-7a9f-4f5c-95d8-445d676b7b15
2025-07-09 21:44:08,794 - INFO - Executing chat history query for chat_id ede3a84f-7a9f-4f5c-95d8-445d676b7b15:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 21:44:08,795 - INFO - Saving message to DB for chat_id ede3a84f-7a9f-4f5c-95d8-445d676b7b15, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 21:44:08,799 - INFO - Generated unique_id_with_template: uid_1e79341743764d47be736afc8f4629d2_649ebe236fad36af_1752097448799
2025-07-09 21:44:08,800 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 21:44:08,801 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 21:44:08,802 - INFO - Processing query for user_id 1: what month did my team engage in tasks the most?
2025-07-09 21:44:08,802 - INFO - Staff ID filter: 
2025-07-09 21:44:08,802 - INFO - Generated unique_id_with_template: uid_1e79341743764d47be736afc8f4629d2_649ebe236fad36af_1752097448799
2025-07-09 21:44:08,803 - INFO - User metrics loaded: 4 metrics
2025-07-09 21:44:09,536 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:44:09,581 - INFO - Intent classification: sql
2025-07-09 21:44:09,606 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 21:44:09,946 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:44:10,887 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT MONTH(t.created_at) AS MONTH,
       COUNT(t.id) AS task_count
FROM tasks t
LEFT JOIN teams tm ON t.team_id = tm.id
WHERE t.owner_id = 1
GROUP BY MONTH(t.created_at)
ORDER BY task_count DESC
LIMIT 1
2025-07-09 21:44:10,889 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 21:44:10,889 - INFO - Sample data: {'MONTH': 6, 'task_count': 174}
2025-07-09 21:44:10,890 - INFO - Final prompt created with unique_id_with_template: uid_1e79341743764d47be736afc8f4629d2_649ebe236fad36af_1752097448799
2025-07-09 21:44:11,322 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:45:02,264 - INFO - chat_id_enc 
2025-07-09 21:45:02,770 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:45:03,420 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:45:03,630 - INFO - Created new chat with ID 169 and UUID e5d3bcd5-8077-4007-b337-988ab1257f76 for user 1
2025-07-09 21:45:03,630 - INFO - e5d3bcd5-8077-4007-b337-988ab1257f76
2025-07-09 21:45:03,632 - INFO - Executing chat history query for chat_id e5d3bcd5-8077-4007-b337-988ab1257f76:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 21:45:03,636 - INFO - Saving message to DB for chat_id e5d3bcd5-8077-4007-b337-988ab1257f76, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 21:45:03,652 - INFO - Generated unique_id_with_template: uid_fd9e4809dc2c4ea4bf1a26f8f91b36f0_b5561ca1d3f6bb72_1752097503652
2025-07-09 21:45:03,654 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 21:45:03,657 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 21:45:03,660 - INFO - Processing query for user_id 1: What is the distribution of task priorities across all projects?
2025-07-09 21:45:03,660 - INFO - Staff ID filter: 
2025-07-09 21:45:03,660 - INFO - Generated unique_id_with_template: uid_fd9e4809dc2c4ea4bf1a26f8f91b36f0_b5561ca1d3f6bb72_1752097503652
2025-07-09 21:45:03,660 - INFO - User metrics loaded: 4 metrics
2025-07-09 21:45:04,880 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:45:04,928 - INFO - Intent classification: sql
2025-07-09 21:45:04,986 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 21:45:05,351 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:45:06,383 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT tasks.priority,
       COUNT(tasks.id) AS task_count
FROM tasks
LEFT JOIN projects ON tasks.project_id = projects.id
WHERE tasks.owner_id = 1
GROUP BY tasks.priority
2025-07-09 21:45:06,398 - INFO - Raw DB data retrieved: 6 rows
2025-07-09 21:45:06,399 - INFO - Sample data: {'priority': '2', 'task_count': 53}
2025-07-09 21:45:06,399 - INFO - Final prompt created with unique_id_with_template: uid_fd9e4809dc2c4ea4bf1a26f8f91b36f0_b5561ca1d3f6bb72_1752097503652
2025-07-09 21:45:06,853 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:46:00,132 - INFO - chat_id_enc 
2025-07-09 21:46:00,624 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:46:01,214 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:46:01,430 - INFO - Created new chat with ID 170 and UUID c796ff53-4da5-468d-9253-cc982f064676 for user 1
2025-07-09 21:46:01,431 - INFO - c796ff53-4da5-468d-9253-cc982f064676
2025-07-09 21:46:01,433 - INFO - Executing chat history query for chat_id c796ff53-4da5-468d-9253-cc982f064676:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 21:46:01,437 - INFO - Saving message to DB for chat_id c796ff53-4da5-468d-9253-cc982f064676, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 21:46:01,444 - INFO - Generated unique_id_with_template: uid_8d52ac1bbae246cfac4769b327eb4c13_df60a7a4a6e5cf1d_1752097561444
2025-07-09 21:46:01,446 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 21:46:01,450 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 21:46:01,452 - INFO - Processing query for user_id 1: Which label appears most frequently in overdue tasks?
2025-07-09 21:46:01,453 - INFO - Staff ID filter: 
2025-07-09 21:46:01,453 - INFO - Generated unique_id_with_template: uid_8d52ac1bbae246cfac4769b327eb4c13_df60a7a4a6e5cf1d_1752097561444
2025-07-09 21:46:01,454 - INFO - User metrics loaded: 4 metrics
2025-07-09 21:46:01,783 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:46:01,814 - INFO - Intent classification: sql
2025-07-09 21:46:01,866 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 21:46:02,737 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:46:05,757 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT t.labels,
       COUNT(t.id) AS label_count
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
WHERE t.owner_id = 1
  AND t.due_date < CURRENT_DATE
  AND t.status != 'Done'
GROUP BY t.labels
ORDER BY label_count DESC
LIMIT 1;
2025-07-09 21:46:05,761 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 21:46:05,761 - INFO - Sample data: {'labels': '[]', 'label_count': 4}
2025-07-09 21:46:05,761 - INFO - Final prompt created with unique_id_with_template: uid_8d52ac1bbae246cfac4769b327eb4c13_df60a7a4a6e5cf1d_1752097561444
2025-07-09 21:46:06,167 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:47:11,383 - INFO - chat_id_enc 82b218bb-2593-451a-aa7c-0bec23160f5b
2025-07-09 21:47:11,384 - INFO - Executing chat history query for chat_id 82b218bb-2593-451a-aa7c-0bec23160f5b:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 21:47:11,386 - INFO - Saving message to DB for chat_id 82b218bb-2593-451a-aa7c-0bec23160f5b, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 21:47:11,392 - INFO - Generated unique_id_with_template: uid_9c2f28a52cd643fe9c06413cad67ac33_0c0ce7f7a8aadb2c_1752097631392
2025-07-09 21:47:11,392 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 21:47:11,393 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 21:47:11,394 - INFO - Processing query for user_id 1: Which label appears most frequently in overdue tasks?
2025-07-09 21:47:11,395 - INFO - Staff ID filter: 
2025-07-09 21:47:11,395 - INFO - Generated unique_id_with_template: uid_9c2f28a52cd643fe9c06413cad67ac33_0c0ce7f7a8aadb2c_1752097631392
2025-07-09 21:47:11,395 - INFO - User metrics loaded: 4 metrics
2025-07-09 21:47:11,755 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:47:11,785 - INFO - Intent classification: sql
2025-07-09 21:47:11,810 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 21:47:12,120 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:47:12,719 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT labels,
       COUNT(*) AS label_count
FROM tasks
WHERE due_date < CURRENT_DATE
  AND owner_id = 1
GROUP BY labels
ORDER BY label_count DESC
LIMIT 1
2025-07-09 21:47:12,722 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 21:47:12,722 - INFO - Sample data: {'labels': '[]', 'label_count': 7}
2025-07-09 21:47:12,722 - INFO - Final prompt created with unique_id_with_template: uid_9c2f28a52cd643fe9c06413cad67ac33_0c0ce7f7a8aadb2c_1752097631392
2025-07-09 21:47:13,077 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:48:43,544 - INFO - chat_id_enc 
2025-07-09 21:48:44,007 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:48:44,660 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:48:44,868 - INFO - Created new chat with ID 171 and UUID 4cb9f53d-8a4e-4965-aef9-f02be3bf83db for user 1
2025-07-09 21:48:44,869 - INFO - 4cb9f53d-8a4e-4965-aef9-f02be3bf83db
2025-07-09 21:48:44,869 - INFO - Executing chat history query for chat_id 4cb9f53d-8a4e-4965-aef9-f02be3bf83db:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 21:48:44,871 - INFO - Saving message to DB for chat_id 4cb9f53d-8a4e-4965-aef9-f02be3bf83db, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 21:48:44,875 - INFO - Generated unique_id_with_template: uid_cc1da2d32ad04d7998a81f5244820647_7c49e7b8b8000192_1752097724875
2025-07-09 21:48:44,875 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 21:48:44,876 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 21:48:44,877 - INFO - Processing query for user_id 1: what project have the most overdue tasks?
2025-07-09 21:48:44,878 - INFO - Staff ID filter: 
2025-07-09 21:48:44,878 - INFO - Generated unique_id_with_template: uid_cc1da2d32ad04d7998a81f5244820647_7c49e7b8b8000192_1752097724875
2025-07-09 21:48:44,878 - INFO - User metrics loaded: 4 metrics
2025-07-09 21:48:45,250 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:48:45,316 - INFO - Intent classification: sql
2025-07-09 21:48:45,338 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 21:48:45,715 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:48:47,444 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.name AS project_name,
       COUNT(t.id) AS overdue_tasks_count
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
WHERE t.owner_id = 1
  AND t.due_date < CURRENT_DATE
  AND t.status != 'Done'
GROUP BY p.name
ORDER BY overdue_tasks_count DESC
LIMIT 1;
2025-07-09 21:48:47,446 - INFO - Raw DB data retrieved: 1 rows
2025-07-09 21:48:47,446 - INFO - Sample data: {'project_name': 'Review', 'overdue_tasks_count': 4}
2025-07-09 21:48:47,447 - INFO - Final prompt created with unique_id_with_template: uid_cc1da2d32ad04d7998a81f5244820647_7c49e7b8b8000192_1752097724875
2025-07-09 21:48:47,835 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:51:09,063 - INFO - Client disconnected from WebSocket
2025-07-09 21:51:41,380 - INFO - chat_id_enc 
2025-07-09 21:51:41,724 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:51:42,221 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:51:42,594 - INFO - Created new chat with ID 172 and UUID 9ea9ceca-af12-48da-99b9-4d8ce9608915 for user 1
2025-07-09 21:51:42,594 - INFO - 9ea9ceca-af12-48da-99b9-4d8ce9608915
2025-07-09 21:51:42,594 - INFO - Executing chat history query for chat_id 9ea9ceca-af12-48da-99b9-4d8ce9608915:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-09 21:51:42,596 - INFO - Saving message to DB for chat_id 9ea9ceca-af12-48da-99b9-4d8ce9608915, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-09 21:51:42,600 - INFO - Generated unique_id_with_template: uid_66dd2ce4018a49119ed4fbe57c4d72ce_c1ea5478f15e0af5_1752097902600
2025-07-09 21:51:42,601 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-09 21:51:42,603 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-09 21:51:42,605 - INFO - Processing query for user_id 1: whats the average completion rate for projects?
2025-07-09 21:51:42,605 - INFO - Staff ID filter: 
2025-07-09 21:51:42,605 - INFO - Generated unique_id_with_template: uid_66dd2ce4018a49119ed4fbe57c4d72ce_c1ea5478f15e0af5_1752097902600
2025-07-09 21:51:42,605 - INFO - User metrics loaded: 5 metrics
2025-07-09 21:51:43,025 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:51:43,068 - INFO - Intent classification: sql
2025-07-09 21:51:43,096 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-09 21:51:43,379 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 21:51:44,342 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.name AS project_name,
       COUNT(t.id) AS total_tasks,
       SUM(CASE
               WHEN t.status = 'Done' THEN 1
               ELSE 0
           END) AS completed_tasks,
       (SUM(CASE
                WHEN t.status = 'Done' THEN 1
                ELSE 0
            END) / COUNT(t.id)) * 100 AS completion_rate
FROM projects p
LEFT JOIN tasks t ON p.id = t.project_id
WHERE p.owner_id = 1
GROUP BY p.name
2025-07-09 21:51:44,345 - INFO - Raw DB data retrieved: 37 rows
2025-07-09 21:51:44,345 - INFO - Sample data: {'project_name': 'Automated Testing Framework', 'total_tasks': 0, 'completed_tasks': Decimal('0'), 'completion_rate': None}
2025-07-09 21:51:44,346 - INFO - Final prompt created with unique_id_with_template: uid_66dd2ce4018a49119ed4fbe57c4d72ce_c1ea5478f15e0af5_1752097902600
2025-07-09 21:51:44,843 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-09 22:33:56,762 - INFO - Client disconnected from WebSocket
2025-07-09 22:52:15,097 - INFO - Client disconnected from WebSocket
2025-07-09 22:54:32,342 - INFO - Client disconnected from WebSocket
2025-07-09 22:54:44,703 - INFO - Client disconnected from WebSocket
2025-07-09 22:54:59,170 - INFO - Client disconnected from WebSocket
2025-07-09 22:55:21,267 - INFO - Client disconnected from WebSocket
2025-07-09 22:55:57,033 - INFO - Client disconnected from WebSocket
2025-07-09 22:56:18,635 - INFO - Client disconnected from WebSocket
2025-07-09 22:56:27,550 - INFO - Client disconnected from WebSocket
2025-07-09 23:14:48,088 - INFO - Client disconnected from WebSocket
2025-07-10 10:08:52,767 - INFO - Client disconnected from WebSocket
2025-07-10 10:12:52,554 - INFO - Client disconnected from WebSocket
2025-07-10 10:18:32,592 - INFO - chat_id_enc 
2025-07-10 10:18:33,602 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 10:18:35,870 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 10:18:36,029 - INFO - Created new chat with ID 173 and UUID d5c0b5f3-d9eb-4296-b190-e40aea42f845 for user 1
2025-07-10 10:18:36,029 - INFO - d5c0b5f3-d9eb-4296-b190-e40aea42f845
2025-07-10 10:18:36,030 - INFO - Executing chat history query for chat_id d5c0b5f3-d9eb-4296-b190-e40aea42f845:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-10 10:18:36,031 - INFO - Saving message to DB for chat_id d5c0b5f3-d9eb-4296-b190-e40aea42f845, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-10 10:18:36,036 - INFO - Generated unique_id_with_template: uid_eed61e2dee0c4219bd00f21ccc3283f6_3ca87889b02fa38b_1752142716036
2025-07-10 10:18:36,036 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-10 10:18:36,038 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-10 10:18:36,039 - INFO - Processing query for user_id 1: hey
2025-07-10 10:18:36,039 - INFO - Staff ID filter: 
2025-07-10 10:18:36,039 - INFO - Generated unique_id_with_template: uid_eed61e2dee0c4219bd00f21ccc3283f6_3ca87889b02fa38b_1752142716036
2025-07-10 10:18:36,039 - INFO - User metrics loaded: 5 metrics
2025-07-10 10:18:37,044 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 10:18:37,112 - INFO - Intent classification: chat
2025-07-10 10:18:37,112 - INFO - Final prompt created with unique_id_with_template: uid_eed61e2dee0c4219bd00f21ccc3283f6_3ca87889b02fa38b_1752142716036
2025-07-10 10:18:38,124 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 10:18:44,491 - INFO - chat_id_enc d5c0b5f3-d9eb-4296-b190-e40aea42f845
2025-07-10 10:18:44,492 - INFO - Executing chat history query for chat_id d5c0b5f3-d9eb-4296-b190-e40aea42f845:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-10 10:18:44,493 - INFO - Saving message to DB for chat_id d5c0b5f3-d9eb-4296-b190-e40aea42f845, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-10 10:18:44,497 - INFO - Generated unique_id_with_template: uid_0f22f01c106941c7968c3297805ca52b_09afb9993285c5fc_1752142724497
2025-07-10 10:18:44,498 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-10 10:18:44,499 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-10 10:18:44,500 - INFO - Processing query for user_id 1: What is the average task completion time per project?
2025-07-10 10:18:44,500 - INFO - Staff ID filter: 
2025-07-10 10:18:44,500 - INFO - Generated unique_id_with_template: uid_0f22f01c106941c7968c3297805ca52b_09afb9993285c5fc_1752142724497
2025-07-10 10:18:44,500 - INFO - User metrics loaded: 5 metrics
2025-07-10 10:18:44,880 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 10:18:44,920 - INFO - Intent classification: sql
2025-07-10 10:18:44,922 - INFO - SQLAlchemy connection failed, recreating: (pymysql.err.OperationalError) (2006, "MySQL server has gone away (BrokenPipeError(32, 'Broken pipe'))")
[SQL: SELECT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 10:18:44,923 - ERROR - SQL Query Error for user_id 1: Connection.__init__() got an unexpected keyword argument 'pool_pre_ping'
2025-07-10 10:18:44,924 - INFO - Final prompt created with unique_id_with_template: uid_0f22f01c106941c7968c3297805ca52b_09afb9993285c5fc_1752142724497
2025-07-10 10:18:45,396 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 10:24:01,045 - INFO - Client disconnected from WebSocket
2025-07-10 12:21:21,971 - INFO - Client disconnected from WebSocket
2025-07-10 12:21:38,386 - INFO - chat_id_enc None
2025-07-10 12:21:38,387 - INFO - Generated unique_id_with_template: uid_e5625ba07edb42c7ade1ebe9688452f9_67bc2083beb6009c_1752150098387
2025-07-10 12:21:38,388 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-10 12:21:38,389 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-10 12:21:38,391 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-10 12:21:38,391 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-10 12:21:38,391 - INFO - Generated unique_id_with_template: uid_e5625ba07edb42c7ade1ebe9688452f9_67bc2083beb6009c_1752150098387
2025-07-10 12:21:38,391 - INFO - User metrics loaded: 5 metrics
2025-07-10 12:21:39,640 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 12:21:39,677 - INFO - Intent classification: sql
2025-07-10 12:21:39,695 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-10 12:21:40,179 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 12:21:40,795 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*,
       platform_users.full_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
WHERE tasks.owner_id = '1'
  AND platform_users.email = 'prebad50@gmail.com'
2025-07-10 12:21:40,803 - INFO - Raw DB data retrieved: 104 rows
2025-07-10 12:21:40,804 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1, 'full_name': 'prebad50@gmail.com'}
2025-07-10 12:21:40,809 - INFO - NO TEMPLATE
2025-07-10 12:21:40,810 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-10 12:21:43,481 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 12:21:55,699 - INFO - Client disconnected from WebSocket
2025-07-10 12:22:01,484 - INFO - chat_id_enc None
2025-07-10 12:22:01,485 - INFO - Generated unique_id_with_template: uid_3818129a292b425ab26231af783503e0_4b61c09fdbdc89bd_1752150121485
2025-07-10 12:22:01,485 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-10 12:22:01,486 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-10 12:22:01,487 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-10 12:22:01,487 - INFO - Staff ID filter: godswillikwan01@gmail.com
2025-07-10 12:22:01,487 - INFO - Generated unique_id_with_template: uid_3818129a292b425ab26231af783503e0_4b61c09fdbdc89bd_1752150121485
2025-07-10 12:22:01,487 - INFO - User metrics loaded: 5 metrics
2025-07-10 12:22:02,642 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 12:22:02,710 - INFO - Intent classification: sql
2025-07-10 12:22:02,727 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-10 12:22:04,837 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 12:22:05,627 - INFO - Generated SQL Query for user_id 1 with staff_id godswillikwan01@gmail.com:
SELECT tasks.*,
       platform_users.full_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
WHERE tasks.owner_id = '1'
  AND platform_users.email = 'godswillikwan01@gmail.com'
2025-07-10 12:22:05,637 - INFO - Raw DB data retrieved: 186 rows
2025-07-10 12:22:05,637 - INFO - Sample data: {'id': 65, 'project_id': 'f7465753-5483-476b-90b9-a1d621f2d5f8', 'team_id': 'f6a76b45-8a4f-40c9-a965-62cb1cdb5e9c', 'platform_id': '1', 'parent_id': 'e5e61301-0692-4f32-9c8d-05e285e31889', 'user_id': 'b99caeb0-2bb3-4c15-9297-e657a46a3377', 'title': 'Implement Real-Time Notifications', 'description': 'Add real-time notification support for issue updates, comments, and status changes. Notifications should be configurable per user. Acceptance criteria: Users receive notifications in real-time and can manage notification settings.', 'status': 'Canceled', 'priority': '2', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 20, 40), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 9, 11), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 20, 40), 'owner_id': 1, 'full_name': 'godswillikwan01@gmail.com'}
2025-07-10 12:22:05,642 - INFO - NO TEMPLATE
2025-07-10 12:22:05,643 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-10 12:22:10,301 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 12:23:48,836 - INFO - Client disconnected from WebSocket
2025-07-10 12:25:56,529 - INFO - Client disconnected from WebSocket
2025-07-10 12:26:05,941 - INFO - chat_id_enc None
2025-07-10 12:26:05,941 - INFO - Generated unique_id_with_template: uid_69fc3dbff43a42109330fe729495185c_d4308f32b32e6806_1752150365941
2025-07-10 12:26:05,942 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-10 12:26:05,943 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-10 12:26:05,944 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-10 12:26:05,944 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-10 12:26:05,944 - INFO - Generated unique_id_with_template: uid_69fc3dbff43a42109330fe729495185c_d4308f32b32e6806_1752150365941
2025-07-10 12:26:05,944 - INFO - User metrics loaded: 5 metrics
2025-07-10 12:26:06,705 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 12:26:06,800 - INFO - Intent classification: sql
2025-07-10 12:26:06,825 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-10 12:26:08,949 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 12:26:10,756 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*,
       platform_users.full_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
WHERE tasks.owner_id = '1'
  AND platform_users.email = 'prebad50@gmail.com'
2025-07-10 12:26:10,762 - INFO - Raw DB data retrieved: 104 rows
2025-07-10 12:26:10,763 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1, 'full_name': 'prebad50@gmail.com'}
2025-07-10 12:26:10,765 - INFO - NO TEMPLATE
2025-07-10 12:26:10,766 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-10 12:26:11,439 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 12:27:47,243 - INFO - Client disconnected from WebSocket
2025-07-10 12:28:12,438 - INFO - chat_id_enc None
2025-07-10 12:28:12,438 - INFO - Generated unique_id_with_template: uid_b8bc3018825d443e84f1de3b211bf230_23b2d454d00a450e_1752150492438
2025-07-10 12:28:12,439 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-10 12:28:12,440 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-10 12:28:12,441 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-10 12:28:12,441 - INFO - Staff ID filter: dev.ayomide@gmail.com
2025-07-10 12:28:12,441 - INFO - Generated unique_id_with_template: uid_b8bc3018825d443e84f1de3b211bf230_23b2d454d00a450e_1752150492438
2025-07-10 12:28:12,441 - INFO - User metrics loaded: 5 metrics
2025-07-10 12:28:13,314 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 12:28:13,388 - INFO - Intent classification: sql
2025-07-10 12:28:13,412 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-10 12:28:14,027 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 12:28:14,887 - INFO - Generated SQL Query for user_id 1 with staff_id dev.ayomide@gmail.com:
SELECT tasks.*,
       platform_users.full_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
WHERE tasks.owner_id = '1'
  AND platform_users.email = 'dev.ayomide@gmail.com'
2025-07-10 12:28:14,892 - INFO - Raw DB data retrieved: 110 rows
2025-07-10 12:28:14,892 - INFO - Sample data: {'id': 2, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': 'd181b6a9-2a96-480f-b82d-5a4c94f7a11b', 'user_id': '1d66d358-c981-4563-917f-8e8b35b497e6', 'title': 'Develop Ticket Categorization Model', 'description': 'Design and implement a machine learning model to categorize support tickets based on their content. Acceptance criteria: Model accurately categorizes tickets with at least 85% accuracy during testing.', 'status': 'Duplicate', 'priority': '2', 'labels': '[]', 'estimate': 13.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 38), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 46), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 37), 'owner_id': 1, 'full_name': 'dev.ayomide@gmail.com'}
2025-07-10 12:28:14,895 - INFO - NO TEMPLATE
2025-07-10 12:28:14,896 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-10 12:28:16,938 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 12:29:35,984 - INFO - Client disconnected from WebSocket
2025-07-10 12:29:43,594 - INFO - chat_id_enc None
2025-07-10 12:29:43,594 - INFO - Generated unique_id_with_template: uid_45630ca3f5df4fb8aaed882662869bf1_13316f2887e60e64_1752150583594
2025-07-10 12:29:43,595 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-10 12:29:43,596 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-10 12:29:43,596 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-10 12:29:43,596 - INFO - Staff ID filter: dev.ayomide@gmail.com
2025-07-10 12:29:43,597 - INFO - Generated unique_id_with_template: uid_45630ca3f5df4fb8aaed882662869bf1_13316f2887e60e64_1752150583594
2025-07-10 12:29:43,597 - INFO - User metrics loaded: 5 metrics
2025-07-10 12:29:43,971 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 12:29:44,002 - INFO - Intent classification: sql
2025-07-10 12:29:44,025 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-10 12:29:44,600 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 12:29:47,341 - INFO - Generated SQL Query for user_id 1 with staff_id dev.ayomide@gmail.com:
SELECT tasks.id,
       tasks.title,
       tasks.description,
       tasks.status,
       tasks.priority,
       tasks.estimate,
       tasks.due_date,
       tasks.source,
       platform_users.full_name AS user_name,
       projects.name AS project_name,
       teams.name AS team_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
LEFT JOIN projects ON tasks.project_id = projects.platform_id
LEFT JOIN teams ON tasks.team_id = teams.platform_id
WHERE tasks.owner_id = '1'
  AND platform_users.email = 'dev.ayomide@gmail.com'
2025-07-10 12:29:47,345 - INFO - Raw DB data retrieved: 110 rows
2025-07-10 12:29:47,345 - INFO - Sample data: {'id': 2, 'title': 'Develop Ticket Categorization Model', 'description': 'Design and implement a machine learning model to categorize support tickets based on their content. Acceptance criteria: Model accurately categorizes tickets with at least 85% accuracy during testing.', 'status': 'Duplicate', 'priority': '2', 'estimate': 13.0, 'due_date': None, 'source': 'linear', 'user_name': 'dev.ayomide@gmail.com', 'project_name': None, 'team_name': None}
2025-07-10 12:29:47,346 - ERROR - SQL Query Error for user_id 1: 
2025-07-10 12:29:54,071 - INFO - chat_id_enc None
2025-07-10 12:29:54,072 - INFO - Generated unique_id_with_template: uid_08b8a6d059e44fafb18e24efbf2ec4dd_bbf7f6928fa6d08e_1752150594071
2025-07-10 12:29:54,072 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-10 12:29:54,073 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-10 12:29:54,074 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-10 12:29:54,074 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-10 12:29:54,074 - INFO - Generated unique_id_with_template: uid_08b8a6d059e44fafb18e24efbf2ec4dd_bbf7f6928fa6d08e_1752150594071
2025-07-10 12:29:54,074 - INFO - User metrics loaded: 5 metrics
2025-07-10 12:29:54,383 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 12:29:54,396 - INFO - Intent classification: sql
2025-07-10 12:29:54,411 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-10 12:29:54,710 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 12:29:55,639 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*,
       platform_users.full_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
WHERE tasks.owner_id = '1'
  AND platform_users.email = 'prebad50@gmail.com'
2025-07-10 12:29:55,646 - INFO - Raw DB data retrieved: 104 rows
2025-07-10 12:29:55,646 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1, 'full_name': 'prebad50@gmail.com'}
2025-07-10 12:29:55,649 - INFO - NO TEMPLATE
2025-07-10 12:29:55,650 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-10 12:29:56,354 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 12:47:45,311 - INFO - chat_id_enc 
2025-07-10 12:47:46,101 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 12:47:46,564 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 12:47:46,844 - INFO - Created new chat with ID 174 and UUID d780860b-aada-4128-9364-d8bf01e05c89 for user 7
2025-07-10 12:47:46,844 - INFO - d780860b-aada-4128-9364-d8bf01e05c89
2025-07-10 12:47:46,846 - INFO - Executing chat history query for chat_id d780860b-aada-4128-9364-d8bf01e05c89:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-07-10 12:47:46,848 - INFO - Saving message to DB for chat_id d780860b-aada-4128-9364-d8bf01e05c89, user_id 7:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-07-10 12:47:46,852 - INFO - Generated unique_id_with_template: uid_f7c9e8bb8abf4802915510594b590e70_c8256d2808ba49ff_1752151666852
2025-07-10 12:47:46,853 - INFO - Fetching workspace types for owner_id 7:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-10 12:47:46,854 - INFO - Fetching user metrics for owner_id 7:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-10 12:47:46,855 - INFO - Processing query for user_id 7: how is godswill's performance
2025-07-10 12:47:46,856 - INFO - Staff ID filter: 
2025-07-10 12:47:46,856 - INFO - Generated unique_id_with_template: uid_f7c9e8bb8abf4802915510594b590e70_c8256d2808ba49ff_1752151666852
2025-07-10 12:47:46,856 - INFO - User metrics loaded: 0 metrics
2025-07-10 12:47:47,716 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 12:47:47,755 - INFO - Intent classification: sql
2025-07-10 12:47:47,774 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-10 12:47:49,723 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 12:47:51,639 - INFO - Generated SQL Query for user_id 7 with staff_id :
SELECT pu.full_name AS user_name,
       t.title AS task_title,
       t.status AS task_status,
       t.estimate AS task_estimate
FROM tasks t
LEFT JOIN platform_users pu ON t.user_id = pu.user_id
WHERE pu.full_name LIKE '%godswill%'
  AND t.owner_id = 7;
2025-07-10 12:47:51,642 - INFO - Raw DB data retrieved: 66 rows
2025-07-10 12:47:51,642 - INFO - Sample data: {'user_name': 'godswillikwan01@gmail.com', 'task_title': 'Identify bottlenecks', 'task_status': 'Canceled', 'task_estimate': 2.0}
2025-07-10 12:47:51,643 - INFO - Final prompt created with unique_id_with_template: uid_f7c9e8bb8abf4802915510594b590e70_c8256d2808ba49ff_1752151666852
2025-07-10 12:47:53,116 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 13:01:12,371 - INFO - Client disconnected from WebSocket
2025-07-10 13:08:31,614 - INFO - Client disconnected from WebSocket
2025-07-10 13:08:46,938 - INFO - Client disconnected from WebSocket
2025-07-10 13:08:52,018 - INFO - chat_id_enc None
2025-07-10 13:08:52,018 - INFO - Generated unique_id_with_template: uid_a80df3412bab422990eda064dd5e8806_fdd2b17fb456b0ce_1752152932018
2025-07-10 13:08:52,018 - INFO - Fetching workspace types for owner_id 7:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-10 13:08:52,019 - INFO - Fetching user metrics for owner_id 7:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-10 13:08:52,020 - INFO - Processing query for user_id 7: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-10 13:08:52,020 - INFO - Staff ID filter: dev.ayomide@gmail.com
2025-07-10 13:08:52,021 - INFO - Generated unique_id_with_template: uid_a80df3412bab422990eda064dd5e8806_fdd2b17fb456b0ce_1752152932018
2025-07-10 13:08:52,021 - INFO - User metrics loaded: 0 metrics
2025-07-10 13:08:53,154 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 13:08:53,247 - INFO - Intent classification: sql
2025-07-10 13:08:53,268 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-10 13:08:55,485 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 13:08:56,452 - INFO - Generated SQL Query for user_id 7 with staff_id dev.ayomide@gmail.com:
SELECT tasks.*,
       platform_users.full_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
WHERE tasks.owner_id = '7'
  AND platform_users.email = 'dev.ayomide@gmail.com'
2025-07-10 13:08:56,456 - INFO - Raw DB data retrieved: 50 rows
2025-07-10 13:08:56,457 - INFO - Sample data: {'id': 538, 'project_id': 'ae6b6b43-eed4-4f33-ad0e-899905252a2f', 'team_id': 'fabc9d41-eeeb-496e-b6db-c812d7d27cfc', 'platform_id': '19', 'parent_id': '137d1832-80df-46f3-b4c1-00d6b5d5e90c', 'user_id': '1d66d358-c981-4563-917f-8e8b35b497e6', 'title': 'Analyze current workflow', 'description': 'Review existing processes', 'status': 'Backlog', 'priority': '4', 'labels': '[]', 'estimate': 2.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 7, 8, 8, 49, 29), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 32, 26), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 18, 18, 32, 26), 'owner_id': 7, 'full_name': 'dev.ayomide@gmail.com'}
2025-07-10 13:08:56,459 - INFO - NO TEMPLATE
2025-07-10 13:08:56,459 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-10 13:08:57,793 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 13:12:06,336 - INFO - Client disconnected from WebSocket
2025-07-10 13:12:11,976 - INFO - chat_id_enc None
2025-07-10 13:12:11,976 - INFO - Generated unique_id_with_template: uid_99c92d5c494248a9b3bf5c975a40a690_10c54a900df3ab07_1752153131976
2025-07-10 13:12:11,977 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-07-10 13:12:11,978 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-07-10 13:12:11,979 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-07-10 13:12:11,979 - INFO - Staff ID filter: prebad50@gmail.com
2025-07-10 13:12:11,979 - INFO - Generated unique_id_with_template: uid_99c92d5c494248a9b3bf5c975a40a690_10c54a900df3ab07_1752153131976
2025-07-10 13:12:11,979 - INFO - User metrics loaded: 5 metrics
2025-07-10 13:12:12,404 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 13:12:12,489 - INFO - Intent classification: sql
2025-07-10 13:12:12,511 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tmanager INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tmanager_id INTEGER, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tmanager\tfull_name\tsource\tmanager_id\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tNone\tprebad50@gmail.com\tlinear\t14\t2025-06-01 09:02:23\t2025-07-09 19:55:26\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tNone\tgodswillikwan01@gmail.com\tlinear\tNone\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tNone\tdev.ayomide@gmail.com\tlinear\tNone\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE status_jira (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tuser_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tplatform_id BIGINT UNSIGNED NOT NULL, \n\tstatus_key VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\towner_id VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\ttype VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL, \n\tupdated_at TIMESTAMP NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from status_jira table:\nid\tuser_id\tplatform_id\tstatus_key\towner_id\ttype\tstatus\tcreated_at\tupdated_at\n\n*/\n\n\nCREATE TABLE status_trello (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(255) NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tstatus_key VARCHAR(255), \n\towner_id INTEGER, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from status_trello table:\nid\ttype\tcreated_at\tuser_id\tplatform_id\tstatus_key\towner_id\n1\tTo Do\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2842\t1\n2\tRequirements\t2025-06-23 20:30:09\t1\t15\t5f3ba24b5b55dd5de59c2843\t1\n3\tDoing\t2025-06-23 20:30:09\t1\t15\t5f3fa7b59989f64b20711c6a\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/\n\n\nCREATE TABLE users (\n\tid BIGINT UNSIGNED NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\temail VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tphone VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tcompany_name VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\temail_verified_at TIMESTAMP NULL, \n\ttoken VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tverified INTEGER, \n\tpassword VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, \n\tservice VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tworkspace VARCHAR(255) COLLATE utf8mb4_unicode_ci, \n\tstatus VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'active', \n\tremember_token VARCHAR(100) COLLATE utf8mb4_unicode_ci, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_unicode_ci\n\n/*\n3 rows from users table:\nid\tname\temail\tphone\tcompany_name\temail_verified_at\ttoken\tverified\tpassword\tservice\tworkspace\tstatus\tremember_token\tcreated_at\tupdated_at\n1\tGodspower Patrick\tallphonesblog@gmail.com\t08074725983\tNone\tNone\t903963\t1\t$2y$12$XcI66Tv3gAu/NPiOq2wVzOKhMb2SZKrERsPCWQZ60cCSHYNdgRNxa\tlinear\treviewbod\tactive\tNone\t2025-05-31 12:42:31\t2025-05-31 12:42:31\n3\tMishael Emmanuel\tmishaelemmanuel@outlook.com\t2347063419210\tNone\tNone\t155672\t1\t$2y$12$660nRbBdBQzWXwYlBlQqG.eTG78thuuBVhWRwQJCl67psgr6x8RfS\tNone\tNone\tactive\tNone\t2025-06-01 09:52:55\t2025-06-01 09:52:55\n4\tAyomide oloyede\tdev.ayomide@gmail.com\t0709232323\tNone\tNone\t467057\t1\t$2y$12$Q/6KRftlDrlM3F8AeOaml.QuFYG9oBpSUtXbiKojWIfM3BA9KNlaK\tlinear\tNone\tactive\tNone\t2025-06-01 11:44:18\t2025-06-01 11:44:18\n*/"
2025-07-10 13:12:13,533 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-10 13:12:14,506 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT tasks.*,
       platform_users.full_name
FROM tasks
JOIN platform_users ON tasks.user_id = platform_users.user_id
WHERE tasks.owner_id = '1'
  AND platform_users.email = 'prebad50@gmail.com'
2025-07-10 13:12:14,513 - INFO - Raw DB data retrieved: 104 rows
2025-07-10 13:12:14,513 - INFO - Sample data: {'id': 6, 'project_id': 'e09b716d-c3aa-43e1-bfc2-c0a0a5b7695a', 'team_id': '8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5', 'platform_id': '1', 'parent_id': '23225c41-e4d6-4aa9-812a-f75fd61cbeda', 'user_id': '0a996c49-4f8f-4af7-9414-01aa7759bb08', 'title': 'Create Dashboard for Ticket Insights', 'description': 'Develop a dashboard that provides insights into ticket categorizations and response effectiveness. Acceptance criteria: Dashboard displays accurate and real-time data on support ticket statistics.', 'status': 'Backlog', 'priority': '3', 'labels': '[]', 'estimate': 8.0, 'due_date': None, 'source': 'linear', 'last_synced_at': datetime.datetime(2025, 6, 19, 11, 21, 32), 'is_deleted': None, 'created_at': datetime.datetime(2025, 6, 18, 18, 6, 54), 'checklists': None, 'updated_at': datetime.datetime(2025, 6, 19, 10, 21, 31), 'owner_id': 1, 'full_name': 'prebad50@gmail.com'}
2025-07-10 13:12:14,516 - INFO - NO TEMPLATE
2025-07-10 13:12:14,518 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-07-10 13:12:17,146 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
