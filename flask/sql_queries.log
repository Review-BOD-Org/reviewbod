2025-06-28 11:17:00,175 - INFO - chat_id_enc None
2025-06-28 11:17:00,175 - INFO - Generated unique_id_with_template: uid_6d9e0929d86e4b9aae10874c335cb93a_eac214eca197a266_1751109420175
2025-06-28 11:17:00,176 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:17:00,177 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:17:00,178 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-06-28 11:17:00,178 - INFO - Staff ID filter: 1
2025-06-28 11:17:00,178 - INFO - Generated unique_id_with_template: uid_6d9e0929d86e4b9aae10874c335cb93a_eac214eca197a266_1751109420175
2025-06-28 11:17:00,178 - INFO - User metrics loaded: 3 metrics
2025-06-28 11:17:00,386 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:17:00,403 - INFO - Intent classification: sql
2025-06-28 11:17:00,434 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:17:00,716 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:17:02,190 - INFO - Generated SQL Query for user_id 1 with staff_id 1:
SELECT pu.id AS user_id,
       pu.name AS user_name,
       pu.email,
       pu.full_name,
       pu.source,
       pu.created_at AS user_created_at,
       pu.updated_at AS user_updated_at,
       p.id AS project_id,
       p.name AS project_name,
       p.description AS project_description,
       p.start_date,
       p.end_date,
       p.state AS project_state,
       t.id AS team_id,
       t.name AS team_name,
       t.description AS team_description,
       t.source AS team_source,
       t.last_synced_at AS team_last_synced_at,
       tm.id AS metric_id,
       tm.title AS metric_title,
       tm.description AS metric_description,
       tm.category AS metric_category,
       tm.weight AS metric_weight,
       tm.percentage AS metric_percentage
FROM platform_users pu
LEFT JOIN projects p ON pu.id = p.user_id
AND p.owner_id = 1
LEFT JOIN teams t ON pu.id = t.user_id
AND t.owner_id = 1
LEFT JOIN user_metrics tm ON pu.id = tm.userid
AND tm.owner_id = 1
WHERE pu.owner_id = 1
  AND pu.id IN
    (SELECT DISTINCT user_id
     FROM tasks
     WHERE owner_id = 1
       AND user_id = '1');
2025-06-28 11:17:02,192 - ERROR - SQL Query Error for user_id 1: (1054, "Unknown column 'tm.owner_id' in 'on clause'")
2025-06-28 11:17:02,193 - INFO - NO TEMPLATE
2025-06-28 11:17:02,194 - INFO - Final prompt created with unique_id_with_template: uid_6d9e0929d86e4b9aae10874c335cb93a_eac214eca197a266_1751109420175
2025-06-28 11:17:02,439 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:19:44,209 - INFO - Client disconnected from WebSocket
2025-06-28 11:19:45,505 - INFO - chat_id_enc None
2025-06-28 11:19:45,506 - INFO - Generated unique_id_with_template: uid_cfee5becaca34d9bbb419697a23b99e1_5e41f858c02c9737_1751109585506
2025-06-28 11:19:45,506 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:19:45,507 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:19:45,508 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-06-28 11:19:45,508 - INFO - Staff ID filter: 1
2025-06-28 11:19:45,508 - INFO - Generated unique_id_with_template: uid_cfee5becaca34d9bbb419697a23b99e1_5e41f858c02c9737_1751109585506
2025-06-28 11:19:45,508 - INFO - User metrics loaded: 3 metrics
2025-06-28 11:19:45,723 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:19:45,738 - INFO - Intent classification: sql
2025-06-28 11:19:45,751 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:19:45,986 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:19:47,466 - INFO - Generated SQL Query for user_id 1 with staff_id 1:
SELECT tu.id AS user_id,
       tu.full_name,
       tu.email,
       tu.source,
       tu.created_at AS user_created_at,
       tu.updated_at AS user_updated_at,
       t.name AS team_name,
       p.name AS project_name,
       COUNT(*) AS task_count,
       SUM(CASE
               WHEN t.status = 'Done' THEN 1
               ELSE 0
           END) AS tasks_completed,
       SUM(CASE
               WHEN t.status IN ('In Progress', 'Todo', 'Backlog') THEN 1
               ELSE 0
           END) AS tasks_in_progress_or_pending,
       AVG(t.estimate) AS average_estimate
FROM platform_users tu
LEFT JOIN teams t ON tu.id = t.user_id
AND t.owner_id = 1
LEFT JOIN projects p ON t.id = p.id
AND p.owner_id = 1
LEFT JOIN tasks t ON p.id = t.project_id
AND t.owner_id = 1
AND t.user_id = '1'
WHERE tu.owner_id = 1
GROUP BY tu.id,
         tu.full_name,
         tu.email,
         tu.source,
         t.name,
         p.name;
2025-06-28 11:19:47,467 - ERROR - SQL Query Error for user_id 1: (1066, "Not unique table/alias: 't'")
2025-06-28 11:19:47,468 - INFO - NO TEMPLATE
2025-06-28 11:19:47,468 - INFO - Final prompt created with unique_id_with_template: uid_cfee5becaca34d9bbb419697a23b99e1_5e41f858c02c9737_1751109585506
2025-06-28 11:19:47,674 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:20:10,111 - INFO - Client disconnected from WebSocket
2025-06-28 11:20:14,275 - INFO - chat_id_enc None
2025-06-28 11:20:14,275 - INFO - Generated unique_id_with_template: uid_ed4348bda50e4ddebdb5d9ccd41abc66_1a433a21ea950c7c_1751109614275
2025-06-28 11:20:14,275 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:20:14,276 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:20:14,277 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-06-28 11:20:14,277 - INFO - Staff ID filter: 19
2025-06-28 11:20:14,277 - INFO - Generated unique_id_with_template: uid_ed4348bda50e4ddebdb5d9ccd41abc66_1a433a21ea950c7c_1751109614275
2025-06-28 11:20:14,277 - INFO - User metrics loaded: 3 metrics
2025-06-28 11:20:14,453 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:20:14,475 - INFO - Intent classification: sql
2025-06-28 11:20:14,488 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:20:14,739 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:20:15,219 - INFO - Generated SQL Query for user_id 1 with staff_id 19:
SELECT pu.id AS user_id,
       pu.full_name,
       pu.email,
       pu.source,
       pu.created_at,
       pu.updated_at
FROM platform_users pu
WHERE pu.owner_id = 1
  AND pu.id IN
    (SELECT DISTINCT t.user_id
     FROM tasks t
     WHERE t.owner_id = 1
       AND t.user_id = '19');
2025-06-28 11:20:15,221 - INFO - Raw DB data retrieved: 0 rows
2025-06-28 11:20:15,222 - WARNING - No data returned from SQL query
2025-06-28 11:20:15,222 - INFO - NO TEMPLATE
2025-06-28 11:20:15,222 - INFO - Final prompt created with unique_id_with_template: uid_ed4348bda50e4ddebdb5d9ccd41abc66_1a433a21ea950c7c_1751109614275
2025-06-28 11:20:15,419 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:23:28,504 - INFO - Client disconnected from WebSocket
2025-06-28 11:23:37,356 - INFO - chat_id_enc None
2025-06-28 11:23:37,357 - INFO - Generated unique_id_with_template: uid_a89c376d403241eda1b44fc2a86930ef_028a2ef05cc87eca_1751109817356
2025-06-28 11:23:37,357 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:23:37,358 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:23:37,359 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-06-28 11:23:37,359 - INFO - Staff ID filter: 19
2025-06-28 11:23:37,360 - INFO - Generated unique_id_with_template: uid_a89c376d403241eda1b44fc2a86930ef_028a2ef05cc87eca_1751109817356
2025-06-28 11:23:37,360 - INFO - User metrics loaded: 3 metrics
2025-06-28 11:23:37,597 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:23:37,624 - INFO - Intent classification: sql
2025-06-28 11:23:37,651 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:23:38,128 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:23:39,964 - INFO - Generated SQL Query for user_id 1 with staff_id 19:
SELECT pu.id AS user_id,
       pu.full_name,
       pu.email,
       pu.source,
       pu.created_at AS user_created_at,
       pu.updated_at AS user_updated_at,
       t.id AS team_id,
       t.name AS team_name,
       p.id AS project_id,
       p.name AS project_name,
       COUNT(DISTINCT t.id) AS total_teams,
       COUNT(DISTINCT p.id) AS total_projects,
       COUNT(DISTINCT task.id) AS total_tasks_assigned,
       SUM(CASE
               WHEN task.status = 'Done' THEN 1
               ELSE 0
           END) AS tasks_completed,
       SUM(CASE
               WHEN task.status != 'Done' THEN 1
               ELSE 0
           END) AS tasks_in_progress_or_pending,
       AVG(task.testimate) AS average_estimate,
       MAX(task.updated_at) AS last_task_update
FROM platform_users pu
LEFT JOIN teams t ON pu.id = t.user_id
AND t.owner_id = 1
LEFT JOIN projects p ON pu.id = p.user_id
AND p.owner_id = 1
LEFT JOIN tasks task ON pu.user_id = task.user_id
AND task.owner_id = 1
AND task.user_id = '19'
WHERE pu.owner_id = 1
GROUP BY pu.id,
         pu.full_name,
         pu.email,
         pu.source,
         pu.created_at,
         pu.updated_at,
         t.id,
         t.name,
         p.id,
         p.name;
2025-06-28 11:23:39,965 - ERROR - SQL Query Error for user_id 1: (1054, "Unknown column 'task.testimate' in 'field list'")
2025-06-28 11:23:39,966 - INFO - NO TEMPLATE
2025-06-28 11:23:39,966 - INFO - Final prompt created with unique_id_with_template: uid_a89c376d403241eda1b44fc2a86930ef_028a2ef05cc87eca_1751109817356
2025-06-28 11:23:40,252 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:27:45,012 - INFO - Client disconnected from WebSocket
2025-06-28 11:27:46,829 - INFO - chat_id_enc None
2025-06-28 11:27:46,829 - INFO - Generated unique_id_with_template: uid_d807c0de88c9457c9e83f6d5366e7467_28c16e05431d11a7_1751110066829
2025-06-28 11:27:46,830 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:27:46,831 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:27:46,832 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-06-28 11:27:46,833 - INFO - Staff ID filter: 58fa0f7d251eaa6fb7b22b34
2025-06-28 11:27:46,833 - INFO - Generated unique_id_with_template: uid_d807c0de88c9457c9e83f6d5366e7467_28c16e05431d11a7_1751110066829
2025-06-28 11:27:46,833 - INFO - User metrics loaded: 3 metrics
2025-06-28 11:27:47,037 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:27:47,077 - INFO - Intent classification: sql
2025-06-28 11:27:47,093 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:27:47,404 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:27:48,032 - INFO - Generated SQL Query for user_id 1 with staff_id 58fa0f7d251eaa6fb7b22b34:
SELECT pu.id AS user_id,
       pu.name AS username,
       pu.email,
       pu.full_name,
       pu.source,
       pu.created_at AS user_created_at,
       pu.updated_at AS user_updated_at
FROM platform_users pu
WHERE pu.owner_id = 1
  AND pu.id IN
    (SELECT DISTINCT t.user_id
     FROM tasks t
     WHERE t.owner_id = 1
       AND t.user_id = '58fa0f7d251eaa6fb7b22b34');
2025-06-28 11:27:48,034 - INFO - Raw DB data retrieved: 0 rows
2025-06-28 11:27:48,034 - WARNING - No data returned from SQL query
2025-06-28 11:27:48,034 - INFO - NO TEMPLATE
2025-06-28 11:27:48,035 - INFO - Final prompt created with unique_id_with_template: uid_d807c0de88c9457c9e83f6d5366e7467_28c16e05431d11a7_1751110066829
2025-06-28 11:27:48,348 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:29:16,045 - INFO - Client disconnected from WebSocket
2025-06-28 11:29:17,327 - INFO - chat_id_enc None
2025-06-28 11:29:17,327 - INFO - Generated unique_id_with_template: uid_9e4f0f5d35d341a2a72b72574c33b640_21ba3aa83024c178_1751110157327
2025-06-28 11:29:17,329 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:29:17,330 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:29:17,331 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-06-28 11:29:17,331 - INFO - Staff ID filter: 58fa0f7d251eaa6fb7b22b34
2025-06-28 11:29:17,331 - INFO - Generated unique_id_with_template: uid_9e4f0f5d35d341a2a72b72574c33b640_21ba3aa83024c178_1751110157327
2025-06-28 11:29:17,331 - INFO - User metrics loaded: 3 metrics
2025-06-28 11:29:17,545 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:29:17,559 - INFO - Intent classification: sql
2025-06-28 11:29:17,572 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:29:17,855 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:29:18,463 - INFO - Generated SQL Query for user_id 1 with staff_id 58fa0f7d251eaa6fb7b22b34:
SELECT pu.id AS user_id,
       pu.name AS username,
       pu.email,
       pu.full_name,
       pu.source,
       pu.created_at AS user_created_at,
       pu.updated_at AS user_updated_at
FROM platform_users pu
WHERE pu.owner_id = 1
  AND pu.id IN
    (SELECT DISTINCT t.user_id
     FROM tasks t
     WHERE t.owner_id = 1
       AND t.user_id = '58fa0f7d251eaa6fb7b22b34');
2025-06-28 11:29:18,465 - INFO - Raw DB data retrieved: 0 rows
2025-06-28 11:29:18,465 - WARNING - No data returned from SQL query
2025-06-28 11:29:18,465 - INFO - NO TEMPLATE
2025-06-28 11:29:18,466 - INFO - Final prompt created with unique_id_with_template: uid_9e4f0f5d35d341a2a72b72574c33b640_21ba3aa83024c178_1751110157327
2025-06-28 11:29:18,651 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:30:47,649 - INFO - Client disconnected from WebSocket
2025-06-28 11:34:32,749 - INFO - chat_id_enc None
2025-06-28 11:34:33,186 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:34:33,407 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:34:33,512 - INFO - Created new chat with ID 53 and UUID f7531d9b-d011-4899-8aaf-04deed4fd09d for user 1
2025-06-28 11:34:33,512 - INFO - f7531d9b-d011-4899-8aaf-04deed4fd09d
2025-06-28 11:34:33,513 - INFO - Executing chat history query for chat_id f7531d9b-d011-4899-8aaf-04deed4fd09d:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:34:33,514 - INFO - Saving message to DB for chat_id f7531d9b-d011-4899-8aaf-04deed4fd09d, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:34:33,517 - INFO - Generated unique_id_with_template: uid_93f05a2973014d4195ec72a389a76d31_bf8513143ad4509b_1751110473517
2025-06-28 11:34:33,517 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:34:33,518 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:34:33,519 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-06-28 11:34:33,519 - INFO - Staff ID filter: 
2025-06-28 11:34:33,519 - INFO - Generated unique_id_with_template: uid_93f05a2973014d4195ec72a389a76d31_bf8513143ad4509b_1751110473517
2025-06-28 11:34:33,519 - INFO - User metrics loaded: 3 metrics
2025-06-28 11:34:33,708 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:34:33,742 - INFO - Intent classification: sql
2025-06-28 11:34:33,767 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci DEFAULT CHARSET=utf8mb4 ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:34:34,002 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:34:35,414 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT u.id AS user_id,
       u.full_name,
       u.email,
       u.source,
       u.created_at AS user_created_at,
       u.updated_at AS user_updated_at,
       t.name AS team_name,
       p.name AS project_name,
       COUNT(tk.id) AS total_tasks,
       SUM(CASE
               WHEN tk.status = 'Done' THEN 1
               ELSE 0
           END) AS tasks_completed,
       SUM(CASE
               WHEN tk.status != 'Done' THEN 1
               ELSE 0
           END) AS tasks_in_progress_or_pending,
       AVG(tk.testimate) AS average_estimate,
       MAX(tk.updated_at) AS last_task_update
FROM platform_users u
LEFT JOIN teams t ON u.id = t.user_id
AND t.owner_id = 1
LEFT JOIN projects p ON u.id = p.user_id
AND p.owner_id = 1
LEFT JOIN tasks tk ON tk.project_id = p.id
AND tk.owner_id = 1
WHERE u.owner_id = 1
GROUP BY u.id,
         u.full_name,
         u.email,
         u.source,
         u.created_at,
         u.updated_at,
         t.name,
         p.name
2025-06-28 11:34:35,415 - ERROR - SQL Query Error for user_id 1: (1054, "Unknown column 'tk.testimate' in 'field list'")
2025-06-28 11:34:35,416 - INFO - Final prompt created with unique_id_with_template: uid_93f05a2973014d4195ec72a389a76d31_bf8513143ad4509b_1751110473517
2025-06-28 11:34:35,684 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:35:11,467 - INFO - Client disconnected from WebSocket
2025-06-28 11:35:26,351 - INFO - chat_id_enc None
2025-06-28 11:35:26,560 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:35:26,871 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:35:27,021 - INFO - Created new chat with ID 54 and UUID 5ffc19f9-7d4d-4124-9d46-182d586c4ea5 for user 1
2025-06-28 11:35:27,022 - INFO - 5ffc19f9-7d4d-4124-9d46-182d586c4ea5
2025-06-28 11:35:27,023 - INFO - Executing chat history query for chat_id 5ffc19f9-7d4d-4124-9d46-182d586c4ea5:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:35:27,024 - INFO - Saving message to DB for chat_id 5ffc19f9-7d4d-4124-9d46-182d586c4ea5, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:35:27,029 - INFO - Generated unique_id_with_template: uid_f22a529d5ccb4c6a8e88ac8a3b956253_39830eaa0ccc6e07_1751110527029
2025-06-28 11:35:27,029 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:35:27,030 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:35:27,032 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-06-28 11:35:27,032 - INFO - Staff ID filter: 
2025-06-28 11:35:27,032 - INFO - Generated unique_id_with_template: uid_f22a529d5ccb4c6a8e88ac8a3b956253_39830eaa0ccc6e07_1751110527029
2025-06-28 11:35:27,032 - INFO - User metrics loaded: 3 metrics
2025-06-28 11:35:27,409 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:35:27,445 - INFO - Intent classification: sql
2025-06-28 11:35:27,473 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:35:27,809 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:35:29,403 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT pu.id AS user_id,
       pu.full_name,
       pu.email,
       pu.source,
       pu.created_at AS user_created_at,
       pu.updated_at AS user_updated_at,
       t.name AS team_name,
       p.name AS project_name,
       COUNT(tk.id) AS total_tasks,
       SUM(CASE
               WHEN tk.status = 'Done' THEN 1
               ELSE 0
           END) AS tasks_completed,
       SUM(CASE
               WHEN tk.status IN ('In Progress', 'Todo', 'Backlog') THEN 1
               ELSE 0
           END) AS tasks_pending,
       AVG(tk.testimate) AS average_estimate,
       MAX(tk.updated_at) AS last_task_update
FROM platform_users pu
LEFT JOIN teams t ON pu.id = t.user_id
AND t.owner_id = 1
LEFT JOIN projects p ON pu.id = p.user_id
AND p.owner_id = 1
LEFT JOIN tasks tk ON tk.project_id = p.id
AND tk.owner_id = 1
WHERE pu.owner_id = 1
GROUP BY pu.id,
         pu.full_name,
         pu.email,
         pu.source,
         pu.created_at,
         pu.updated_at,
         t.name,
         p.name
2025-06-28 11:35:29,404 - ERROR - SQL Query Error for user_id 1: (1054, "Unknown column 'tk.testimate' in 'field list'")
2025-06-28 11:35:29,405 - INFO - Final prompt created with unique_id_with_template: uid_f22a529d5ccb4c6a8e88ac8a3b956253_39830eaa0ccc6e07_1751110527029
2025-06-28 11:35:29,762 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:37:32,520 - INFO - Client disconnected from WebSocket
2025-06-28 11:38:10,292 - INFO - chat_id_enc None
2025-06-28 11:38:10,568 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:38:10,817 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:38:10,910 - INFO - Created new chat with ID 55 and UUID f262f593-1231-45ca-9dbb-9c9605cf823c for user 1
2025-06-28 11:38:10,910 - INFO - f262f593-1231-45ca-9dbb-9c9605cf823c
2025-06-28 11:38:10,911 - INFO - Executing chat history query for chat_id f262f593-1231-45ca-9dbb-9c9605cf823c:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:38:10,912 - INFO - Saving message to DB for chat_id f262f593-1231-45ca-9dbb-9c9605cf823c, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:38:10,915 - INFO - Generated unique_id_with_template: uid_37a08aa9fdc3400b9cdcd2be1da882a4_c58244019cfba58c_1751110690915
2025-06-28 11:38:10,915 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:38:10,916 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:38:10,917 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-06-28 11:38:10,917 - INFO - Staff ID filter: 
2025-06-28 11:38:10,917 - INFO - Generated unique_id_with_template: uid_37a08aa9fdc3400b9cdcd2be1da882a4_c58244019cfba58c_1751110690915
2025-06-28 11:38:10,917 - INFO - User metrics loaded: 3 metrics
2025-06-28 11:38:11,106 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:38:11,122 - INFO - Intent classification: sql
2025-06-28 11:38:11,146 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:38:11,373 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:38:12,454 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT u.id AS user_id,
       u.full_name,
       u.email,
       u.source,
       u.created_at AS user_created_at,
       u.updated_at AS user_updated_at,
       COUNT(t.id) AS total_tasks,
       SUM(CASE
               WHEN t.status = 'Done' THEN 1
               ELSE 0
           END) AS tasks_done,
       SUM(CASE
               WHEN t.status = 'In Progress' THEN 1
               ELSE 0
           END) AS tasks_in_progress,
       SUM(CASE
               WHEN t.status = 'Backlog' THEN 1
               ELSE 0
           END) AS tasks_backlog,
       SUM(CASE
               WHEN t.status = 'Todo' THEN 1
               ELSE 0
           END) AS tasks_todo
FROM platform_users u
LEFT JOIN tasks t ON u.id = t.owner_id
AND t.owner_id = 1
WHERE u.owner_id = 1
GROUP BY u.id,
         u.full_name,
         u.email,
         u.source,
         u.created_at,
         u.updated_at;
2025-06-28 11:38:12,460 - INFO - Raw DB data retrieved: 23 rows
2025-06-28 11:38:12,460 - INFO - Sample data: {'user_id': 1, 'full_name': 'prebad50@gmail.com', 'email': 'prebad50@gmail.com', 'source': 'linear', 'user_created_at': datetime.datetime(2025, 6, 1, 9, 2, 23), 'user_updated_at': datetime.datetime(2025, 6, 1, 9, 2, 23), 'total_tasks': 287, 'tasks_done': Decimal('67'), 'tasks_in_progress': Decimal('19'), 'tasks_backlog': Decimal('32'), 'tasks_todo': Decimal('44')}
2025-06-28 11:38:12,461 - INFO - Final prompt created with unique_id_with_template: uid_37a08aa9fdc3400b9cdcd2be1da882a4_c58244019cfba58c_1751110690915
2025-06-28 11:38:12,763 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:39:05,075 - INFO - Client disconnected from WebSocket
2025-06-28 11:39:11,231 - INFO - chat_id_enc None
2025-06-28 11:39:11,463 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:39:11,766 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:39:11,942 - INFO - Created new chat with ID 56 and UUID 1b033e38-5a1c-48aa-97bb-9a15bf400f31 for user 1
2025-06-28 11:39:11,942 - INFO - 1b033e38-5a1c-48aa-97bb-9a15bf400f31
2025-06-28 11:39:11,943 - INFO - Executing chat history query for chat_id 1b033e38-5a1c-48aa-97bb-9a15bf400f31:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:39:11,944 - INFO - Saving message to DB for chat_id 1b033e38-5a1c-48aa-97bb-9a15bf400f31, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:39:11,953 - INFO - Generated unique_id_with_template: uid_7f3ac37ed4cd4c8c9993ef7ec00af568_323b4b803d72e025_1751110751953
2025-06-28 11:39:11,954 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:39:11,956 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:39:11,957 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-06-28 11:39:11,957 - INFO - Staff ID filter: 
2025-06-28 11:39:11,957 - INFO - Generated unique_id_with_template: uid_7f3ac37ed4cd4c8c9993ef7ec00af568_323b4b803d72e025_1751110751953
2025-06-28 11:39:11,957 - INFO - User metrics loaded: 3 metrics
2025-06-28 11:39:12,232 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:39:12,245 - INFO - Intent classification: sql
2025-06-28 11:39:12,275 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_0900_ai_ci\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:39:12,499 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:39:14,250 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT pu.id AS user_id,
       pu.full_name,
       pu.email,
       pu.source,
       pu.created_at AS user_created_at,
       pu.updated_at AS user_updated_at,
       t.id AS team_id,
       t.name AS team_name,
       p.id AS project_id,
       p.name AS project_name,
       COUNT(DISTINCT task.id) AS total_tasks,
       SUM(CASE
               WHEN task.status = 'Done' THEN 1
               ELSE 0
           END) AS tasks_completed,
       SUM(CASE
               WHEN task.status IN ('In Progress', 'Todo', 'Backlog') THEN 1
               ELSE 0
           END) AS tasks_in_progress_or_pending,
       AVG(task.testimate) AS average_estimate,
       MAX(task.updated_at) AS last_task_update
FROM platform_users pu
LEFT JOIN teams t ON pu.id = t.user_id
AND t.owner_id = 1
LEFT JOIN projects p ON pu.id = p.user_id
AND p.owner_id = 1
LEFT JOIN tasks task ON p.id = task.project_id
AND task.owner_id = 1
WHERE pu.owner_id = 1
  AND pu.name LIKE '%'
GROUP BY pu.id,
         pu.full_name,
         pu.email,
         pu.source,
         pu.created_at,
         pu.updated_at,
         t.id,
         t.name,
         p.id,
         p.name
2025-06-28 11:39:14,251 - ERROR - SQL Query Error for user_id 1: (1054, "Unknown column 'task.testimate' in 'field list'")
2025-06-28 11:39:14,251 - INFO - Final prompt created with unique_id_with_template: uid_7f3ac37ed4cd4c8c9993ef7ec00af568_323b4b803d72e025_1751110751953
2025-06-28 11:39:14,641 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:39:54,524 - INFO - Client disconnected from WebSocket
2025-06-28 11:39:54,525 - INFO - Client disconnected from WebSocket
2025-06-28 11:40:00,949 - INFO - chat_id_enc None
2025-06-28 11:40:01,175 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:40:01,426 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:40:01,542 - INFO - Created new chat with ID 57 and UUID 9a06dcb2-39fa-4f39-9314-e3674e03a95b for user 1
2025-06-28 11:40:01,542 - INFO - 9a06dcb2-39fa-4f39-9314-e3674e03a95b
2025-06-28 11:40:01,543 - INFO - Executing chat history query for chat_id 9a06dcb2-39fa-4f39-9314-e3674e03a95b:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:40:01,545 - INFO - Saving message to DB for chat_id 9a06dcb2-39fa-4f39-9314-e3674e03a95b, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:40:01,555 - INFO - Generated unique_id_with_template: uid_17e5ab9a36f94026bc61576e9e5a3501_5b90f25bbcd53044_1751110801555
2025-06-28 11:40:01,556 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:40:01,560 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:40:01,563 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-06-28 11:40:01,566 - INFO - Staff ID filter: 
2025-06-28 11:40:01,568 - INFO - Generated unique_id_with_template: uid_17e5ab9a36f94026bc61576e9e5a3501_5b90f25bbcd53044_1751110801555
2025-06-28 11:40:01,568 - INFO - User metrics loaded: 3 metrics
2025-06-28 11:40:01,922 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:40:01,977 - INFO - Intent classification: sql
2025-06-28 11:40:02,190 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:40:02,470 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:40:04,041 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT u.id AS user_id,
       u.name AS user_name,
       u.email,
       u.full_name,
       u.source,
       u.created_at AS user_created_at,
       u.updated_at AS user_updated_at,
       p.id AS project_id,
       p.name AS project_name,
       p.description AS project_description,
       p.start_date,
       p.end_date,
       p.source AS project_source,
       p.state AS project_state,
       t.id AS team_id,
       t.name AS team_name,
       t.description AS team_description,
       t.source AS team_source,
       um.id AS metric_id,
       um.title AS metric_title,
       um.category AS metric_category,
       um.weight AS metric_weight,
       um.percentage AS metric_percentage
FROM platform_users u
LEFT JOIN projects p ON p.owner_id = u.owner_id
AND p.user_id = u.id
LEFT JOIN teams t ON t.owner_id = u.owner_id
AND t.user_id = u.id
LEFT JOIN user_metrics um ON um.userid = u.id
WHERE u.owner_id = 1;
2025-06-28 11:40:04,271 - INFO - Raw DB data retrieved: 1078 rows
2025-06-28 11:40:04,271 - INFO - Sample data: {'user_id': 1, 'user_name': 'prebad50@gmail.com', 'email': 'prebad50@gmail.com', 'full_name': 'prebad50@gmail.com', 'source': 'linear', 'user_created_at': datetime.datetime(2025, 6, 1, 9, 2, 23), 'user_updated_at': datetime.datetime(2025, 6, 1, 9, 2, 23), 'project_id': 76, 'project_name': 'Support', 'project_description': '', 'start_date': '2025-06-24 20:38:49', 'end_date': None, 'project_source': 'jira', 'project_state': 'active', 'team_id': 13, 'team_name': 'workspace24129603', 'team_description': '', 'team_source': 'trello', 'metric_id': 7, 'metric_title': 'Root Mean Squared Error (RMSE)', 'metric_category': '2', 'metric_weight': '5', 'metric_percentage': '42'}
2025-06-28 11:40:04,387 - INFO - Final prompt created with unique_id_with_template: uid_17e5ab9a36f94026bc61576e9e5a3501_5b90f25bbcd53044_1751110801555
2025-06-28 11:40:07,128 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:40:19,581 - INFO - Client disconnected from WebSocket
2025-06-28 11:40:26,763 - INFO - chat_id_enc None
2025-06-28 11:40:26,987 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:40:27,256 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:40:27,367 - INFO - Created new chat with ID 58 and UUID 0f9b5ec2-60a2-4f80-9626-c31a3b2ff51e for user 1
2025-06-28 11:40:27,367 - INFO - 0f9b5ec2-60a2-4f80-9626-c31a3b2ff51e
2025-06-28 11:40:27,368 - INFO - Executing chat history query for chat_id 0f9b5ec2-60a2-4f80-9626-c31a3b2ff51e:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:40:27,369 - INFO - Saving message to DB for chat_id 0f9b5ec2-60a2-4f80-9626-c31a3b2ff51e, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:40:27,373 - INFO - Generated unique_id_with_template: uid_ffd3f6f4812949a9a31a92d3193c2769_b48f4e1cee26575b_1751110827373
2025-06-28 11:40:27,374 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:40:27,374 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:40:27,375 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-06-28 11:40:27,375 - INFO - Staff ID filter: 
2025-06-28 11:40:27,376 - INFO - Generated unique_id_with_template: uid_ffd3f6f4812949a9a31a92d3193c2769_b48f4e1cee26575b_1751110827373
2025-06-28 11:40:27,376 - INFO - User metrics loaded: 3 metrics
2025-06-28 11:40:27,545 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:40:27,561 - INFO - Intent classification: sql
2025-06-28 11:40:27,576 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:40:27,777 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:40:28,175 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT u.id AS user_id,
       u.name AS user_name,
       u.email,
       u.full_name,
       u.source,
       u.created_at AS user_created_at,
       u.updated_at AS user_updated_at,
       u.owner_id
FROM platform_users u
WHERE u.owner_id = 1
  AND u.name LIKE '%'
LIMIT 1;
2025-06-28 11:40:28,176 - INFO - Raw DB data retrieved: 1 rows
2025-06-28 11:40:28,176 - INFO - Sample data: {'user_id': 1, 'user_name': 'prebad50@gmail.com', 'email': 'prebad50@gmail.com', 'full_name': 'prebad50@gmail.com', 'source': 'linear', 'user_created_at': datetime.datetime(2025, 6, 1, 9, 2, 23), 'user_updated_at': datetime.datetime(2025, 6, 1, 9, 2, 23), 'owner_id': 1}
2025-06-28 11:40:28,177 - INFO - Final prompt created with unique_id_with_template: uid_ffd3f6f4812949a9a31a92d3193c2769_b48f4e1cee26575b_1751110827373
2025-06-28 11:40:28,392 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:41:09,062 - INFO - Client disconnected from WebSocket
2025-06-28 11:41:15,932 - INFO - chat_id_enc None
2025-06-28 11:41:16,187 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:41:16,729 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:41:16,914 - INFO - Created new chat with ID 59 and UUID 3b01714a-71e4-4728-a1ed-b70f16748793 for user 1
2025-06-28 11:41:16,914 - INFO - 3b01714a-71e4-4728-a1ed-b70f16748793
2025-06-28 11:41:16,915 - INFO - Executing chat history query for chat_id 3b01714a-71e4-4728-a1ed-b70f16748793:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:41:16,916 - INFO - Saving message to DB for chat_id 3b01714a-71e4-4728-a1ed-b70f16748793, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:41:16,920 - INFO - Generated unique_id_with_template: uid_1f185fc6f4da4b3282233c5f71850163_e1d3d73d0642c985_1751110876920
2025-06-28 11:41:16,921 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:41:16,922 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:41:16,923 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-06-28 11:41:16,923 - INFO - Staff ID filter: 
2025-06-28 11:41:16,923 - INFO - Generated unique_id_with_template: uid_1f185fc6f4da4b3282233c5f71850163_e1d3d73d0642c985_1751110876920
2025-06-28 11:41:16,923 - INFO - User metrics loaded: 3 metrics
2025-06-28 11:41:17,097 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:41:17,114 - INFO - Intent classification: sql
2025-06-28 11:41:17,137 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:41:17,548 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:41:18,569 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT u.id AS user_id,
       u.name AS user_name,
       u.email,
       u.full_name,
       u.source,
       u.created_at AS user_created_at,
       u.updated_at AS user_updated_at,
       p.id AS project_id,
       p.name AS project_name,
       p.description AS project_description,
       p.start_date,
       p.end_date,
       p.source AS project_source,
       t.id AS team_id,
       t.name AS team_name,
       t.description AS team_description,
       t.source AS team_source
FROM platform_users u
LEFT JOIN projects p ON p.owner_id = u.owner_id
AND p.user_id = u.id
LEFT JOIN teams t ON t.owner_id = u.owner_id
AND t.user_id = u.id
WHERE u.owner_id = 1;
2025-06-28 11:41:18,587 - INFO - Raw DB data retrieved: 374 rows
2025-06-28 11:41:18,587 - INFO - Sample data: {'user_id': 1, 'user_name': 'prebad50@gmail.com', 'email': 'prebad50@gmail.com', 'full_name': 'prebad50@gmail.com', 'source': 'linear', 'user_created_at': datetime.datetime(2025, 6, 1, 9, 2, 23), 'user_updated_at': datetime.datetime(2025, 6, 1, 9, 2, 23), 'project_id': 76, 'project_name': 'Support', 'project_description': '', 'start_date': '2025-06-24 20:38:49', 'end_date': None, 'project_source': 'jira', 'team_id': 13, 'team_name': 'workspace24129603', 'team_description': '', 'team_source': 'trello'}
2025-06-28 11:41:18,603 - INFO - Final prompt created with unique_id_with_template: uid_1f185fc6f4da4b3282233c5f71850163_e1d3d73d0642c985_1751110876920
2025-06-28 11:41:19,971 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:41:29,782 - INFO - Client disconnected from WebSocket
2025-06-28 11:41:31,140 - INFO - chat_id_enc None
2025-06-28 11:41:31,422 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:41:31,778 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:41:31,999 - INFO - Created new chat with ID 60 and UUID f4c65a75-57a1-410b-b050-eb594aca41e0 for user 1
2025-06-28 11:41:31,999 - INFO - f4c65a75-57a1-410b-b050-eb594aca41e0
2025-06-28 11:41:32,000 - INFO - Executing chat history query for chat_id f4c65a75-57a1-410b-b050-eb594aca41e0:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:41:32,005 - INFO - Saving message to DB for chat_id f4c65a75-57a1-410b-b050-eb594aca41e0, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:41:32,011 - INFO - Generated unique_id_with_template: uid_0eb99a66503041d1a446625252fa8b79_43657abb9c0b6d34_1751110892011
2025-06-28 11:41:32,012 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:41:32,013 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:41:32,014 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-06-28 11:41:32,014 - INFO - Staff ID filter: 
2025-06-28 11:41:32,014 - INFO - Generated unique_id_with_template: uid_0eb99a66503041d1a446625252fa8b79_43657abb9c0b6d34_1751110892011
2025-06-28 11:41:32,015 - INFO - User metrics loaded: 3 metrics
2025-06-28 11:41:32,216 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:41:32,231 - INFO - Intent classification: sql
2025-06-28 11:41:32,251 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:41:32,494 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:41:32,951 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT u.id AS user_id,
       u.name AS user_name,
       u.email,
       u.full_name,
       u.source,
       u.created_at AS user_created_at,
       u.updated_at AS user_updated_at,
       u.owner_id
FROM platform_users u
WHERE u.owner_id = 1
  AND u.name LIKE '%'
LIMIT 1;
2025-06-28 11:41:32,952 - INFO - Raw DB data retrieved: 1 rows
2025-06-28 11:41:32,952 - INFO - Sample data: {'user_id': 1, 'user_name': 'prebad50@gmail.com', 'email': 'prebad50@gmail.com', 'full_name': 'prebad50@gmail.com', 'source': 'linear', 'user_created_at': datetime.datetime(2025, 6, 1, 9, 2, 23), 'user_updated_at': datetime.datetime(2025, 6, 1, 9, 2, 23), 'owner_id': 1}
2025-06-28 11:41:32,953 - ERROR - SQL Query Error for user_id 1: 
2025-06-28 11:41:38,965 - INFO - chat_id_enc None
2025-06-28 11:41:38,965 - INFO - Generated unique_id_with_template: uid_223b2d0cb058409ea3aa676a09738fe4_d08ff70b32404fa9_1751110898965
2025-06-28 11:41:38,966 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:41:38,967 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:41:38,968 - INFO - Processing query for user_id 1: Give analysis base on this user, and avoid starting with hey or hello, just give insight on this user
2025-06-28 11:41:38,968 - INFO - Staff ID filter: prebad50@gmail.com
2025-06-28 11:41:38,969 - INFO - Generated unique_id_with_template: uid_223b2d0cb058409ea3aa676a09738fe4_d08ff70b32404fa9_1751110898965
2025-06-28 11:41:38,969 - INFO - User metrics loaded: 3 metrics
2025-06-28 11:41:39,141 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:41:39,156 - INFO - Intent classification: sql
2025-06-28 11:41:39,172 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:41:39,432 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:41:40,639 - INFO - Generated SQL Query for user_id 1 with staff_id prebad50@gmail.com:
SELECT pu.id AS user_id,
       pu.email,
       pu.full_name,
       pu.source,
       COUNT(t.id) AS total_tasks,
       SUM(CASE
               WHEN t.status = 'Done' THEN 1
               ELSE 0
           END) AS tasks_completed,
       SUM(CASE
               WHEN t.status IN ('In Progress', 'Todo', 'Backlog') THEN 1
               ELSE 0
           END) AS tasks_pending,
       AVG(t.testimate) AS average_estimate,
       MIN(t.created_at) AS first_task_created_at,
       MAX(t.updated_at) AS last_task_updated_at
FROM platform_users pu
LEFT JOIN tasks t ON pu.id = t.user_id
AND pu.email = 'prebad50@gmail.com'
AND t.owner_id = 1
WHERE pu.owner_id = 1
  AND pu.email = 'prebad50@gmail.com'
GROUP BY pu.id,
         pu.email,
         pu.full_name,
         pu.source;
2025-06-28 11:41:40,640 - ERROR - SQL Query Error for user_id 1: (1054, "Unknown column 't.testimate' in 'field list'")
2025-06-28 11:41:40,641 - INFO - NO TEMPLATE
2025-06-28 11:41:40,641 - INFO - Final prompt created with unique_id_with_template: DISABLED
2025-06-28 11:41:40,840 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:44:44,438 - INFO - Client disconnected from WebSocket
2025-06-28 11:45:09,324 - INFO - chat_id_enc 
2025-06-28 11:45:09,537 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:45:09,793 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:45:09,892 - INFO - Created new chat with ID 61 and UUID 264ea1c5-c4df-453f-b322-96f9a697db10 for user 1
2025-06-28 11:45:09,893 - INFO - 264ea1c5-c4df-453f-b322-96f9a697db10
2025-06-28 11:45:09,894 - INFO - Executing chat history query for chat_id 264ea1c5-c4df-453f-b322-96f9a697db10:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:45:09,895 - INFO - Saving message to DB for chat_id 264ea1c5-c4df-453f-b322-96f9a697db10, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:45:09,910 - INFO - Generated unique_id_with_template: uid_69380b785eb44d31834d1de06704a10e_e20f84de993595ba_1751111109910
2025-06-28 11:45:09,910 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:45:09,911 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:45:09,912 - INFO - Processing query for user_id 1: What is the distribution of task priorities across all projects?
2025-06-28 11:45:09,912 - INFO - Staff ID filter: 
2025-06-28 11:45:09,912 - INFO - Generated unique_id_with_template: uid_69380b785eb44d31834d1de06704a10e_e20f84de993595ba_1751111109910
2025-06-28 11:45:09,912 - INFO - User metrics loaded: 4 metrics
2025-06-28 11:45:10,297 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:45:10,319 - INFO - Intent classification: sql
2025-06-28 11:45:10,332 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:45:10,550 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:45:10,695 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT priority,
       COUNT(*) AS task_count
FROM tasks
WHERE owner_id = 1
GROUP BY priority;
2025-06-28 11:45:10,696 - INFO - Raw DB data retrieved: 6 rows
2025-06-28 11:45:10,696 - INFO - Sample data: {'priority': '2', 'task_count': 53}
2025-06-28 11:45:10,697 - INFO - Final prompt created with unique_id_with_template: uid_69380b785eb44d31834d1de06704a10e_e20f84de993595ba_1751111109910
2025-06-28 11:45:10,976 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:45:22,148 - INFO - chat_id_enc 264ea1c5-c4df-453f-b322-96f9a697db10
2025-06-28 11:45:22,149 - INFO - Executing chat history query for chat_id 264ea1c5-c4df-453f-b322-96f9a697db10:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:45:22,150 - INFO - Saving message to DB for chat_id 264ea1c5-c4df-453f-b322-96f9a697db10, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:45:22,153 - INFO - Generated unique_id_with_template: uid_46363819ee2f40ff9ffb86f617b6ef26_b7a4f823df9e5114_1751111122153
2025-06-28 11:45:22,154 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:45:22,155 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:45:22,156 - INFO - Processing query for user_id 1: Which tasks are overdue and not in 'completed' status?
2025-06-28 11:45:22,156 - INFO - Staff ID filter: 
2025-06-28 11:45:22,156 - INFO - Generated unique_id_with_template: uid_46363819ee2f40ff9ffb86f617b6ef26_b7a4f823df9e5114_1751111122153
2025-06-28 11:45:22,156 - INFO - User metrics loaded: 4 metrics
2025-06-28 11:45:22,416 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:45:22,454 - INFO - Intent classification: sql
2025-06-28 11:45:22,469 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:45:22,652 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:45:23,308 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT t.id,
       t.title,
       t.description,
       t.status,
       t.due_date,
       p.name AS project_name,
       u.full_name AS assigned_user
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
AND p.owner_id = 1
LEFT JOIN platform_users u ON t.user_id = u.id
AND u.owner_id = 1
WHERE t.owner_id = 1
  AND t.status <> 'Done'
  AND t.due_date IS NOT NULL
  AND STR_TO_DATE(t.due_date, '%Y-%m-%d') < CURDATE();
2025-06-28 11:45:23,310 - INFO - Raw DB data retrieved: 5 rows
2025-06-28 11:45:23,311 - INFO - Sample data: {'id': 315, 'title': 'Admin should set time to barb one person', 'description': 'The admin should be able to set and adjust the appropriate time it will take to complete a service on one person (male, female and children)', 'status': 'To Do', 'due_date': '2023-04-11 23:26:00', 'project_name': 'Review', 'assigned_user': None}
2025-06-28 11:45:23,311 - INFO - Final prompt created with unique_id_with_template: uid_46363819ee2f40ff9ffb86f617b6ef26_b7a4f823df9e5114_1751111122153
2025-06-28 11:45:23,590 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:45:43,900 - INFO - Client disconnected from WebSocket
2025-06-28 11:45:57,429 - INFO - chat_id_enc 264ea1c5-c4df-453f-b322-96f9a697db10
2025-06-28 11:45:57,429 - INFO - Executing chat history query for chat_id 264ea1c5-c4df-453f-b322-96f9a697db10:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:45:57,430 - INFO - Saving message to DB for chat_id 264ea1c5-c4df-453f-b322-96f9a697db10, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:45:57,433 - INFO - Generated unique_id_with_template: uid_7592c3c3e38844e2bd03596bbfb57133_8790f308e951a812_1751111157433
2025-06-28 11:45:57,434 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:45:57,434 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:45:57,435 - INFO - Processing query for user_id 1: Which label appears most frequently in overdue tasks?
2025-06-28 11:45:57,435 - INFO - Staff ID filter: 
2025-06-28 11:45:57,435 - INFO - Generated unique_id_with_template: uid_7592c3c3e38844e2bd03596bbfb57133_8790f308e951a812_1751111157433
2025-06-28 11:45:57,435 - INFO - User metrics loaded: 4 metrics
2025-06-28 11:45:57,878 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:45:57,896 - INFO - Intent classification: sql
2025-06-28 11:45:57,911 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:45:58,132 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:45:58,574 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT JSON_UNQUOTE(JSON_EXTRACT(labels, '$')) AS label,
       COUNT(*) AS frequency
FROM tasks
WHERE owner_id = 1
  AND status != 'Done'
  AND STR_TO_DATE(due_date, '%Y-%m-%d') < CURDATE()
  AND labels IS NOT NULL
GROUP BY label
ORDER BY frequency DESC
LIMIT 1;
2025-06-28 11:45:58,576 - INFO - Raw DB data retrieved: 1 rows
2025-06-28 11:45:58,576 - INFO - Sample data: {'label': '[]', 'frequency': 4}
2025-06-28 11:45:58,576 - INFO - Final prompt created with unique_id_with_template: uid_7592c3c3e38844e2bd03596bbfb57133_8790f308e951a812_1751111157433
2025-06-28 11:45:58,835 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:02,031 - INFO - chat_id_enc 264ea1c5-c4df-453f-b322-96f9a697db10
2025-06-28 11:46:02,031 - INFO - Executing chat history query for chat_id 264ea1c5-c4df-453f-b322-96f9a697db10:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:46:02,033 - INFO - Saving message to DB for chat_id 264ea1c5-c4df-453f-b322-96f9a697db10, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:46:02,041 - INFO - Generated unique_id_with_template: uid_44809b1c48664481a3139316ee5a8ec4_9ad2ef50589e86fe_1751111162041
2025-06-28 11:46:02,042 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:46:02,043 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:46:02,044 - INFO - Processing query for user_id 1: How many tasks were synced in the last 24 hours?
2025-06-28 11:46:02,044 - INFO - Staff ID filter: 
2025-06-28 11:46:02,044 - INFO - Generated unique_id_with_template: uid_44809b1c48664481a3139316ee5a8ec4_9ad2ef50589e86fe_1751111162041
2025-06-28 11:46:02,044 - INFO - User metrics loaded: 4 metrics
2025-06-28 11:46:02,263 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:02,295 - INFO - Intent classification: sql
2025-06-28 11:46:02,313 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:46:02,577 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:02,801 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT COUNT(*) AS tasks_synced_last_24h
FROM tasks
WHERE owner_id = 1
  AND last_synced_at >= NOW() - INTERVAL 1 DAY;
2025-06-28 11:46:02,803 - INFO - Raw DB data retrieved: 1 rows
2025-06-28 11:46:02,803 - INFO - Sample data: {'tasks_synced_last_24h': 0}
2025-06-28 11:46:02,803 - INFO - Final prompt created with unique_id_with_template: uid_44809b1c48664481a3139316ee5a8ec4_9ad2ef50589e86fe_1751111162041
2025-06-28 11:46:03,255 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:05,093 - INFO - chat_id_enc 264ea1c5-c4df-453f-b322-96f9a697db10
2025-06-28 11:46:05,094 - INFO - Executing chat history query for chat_id 264ea1c5-c4df-453f-b322-96f9a697db10:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:46:05,095 - INFO - Saving message to DB for chat_id 264ea1c5-c4df-453f-b322-96f9a697db10, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:46:05,098 - INFO - Generated unique_id_with_template: uid_d1eaffbcee8240399355ba59c01bb867_d1d60060913d3870_1751111165098
2025-06-28 11:46:05,099 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:46:05,100 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:46:05,100 - INFO - Processing query for user_id 1: Which project has the most deleted tasks?
2025-06-28 11:46:05,101 - INFO - Staff ID filter: 
2025-06-28 11:46:05,101 - INFO - Generated unique_id_with_template: uid_d1eaffbcee8240399355ba59c01bb867_d1d60060913d3870_1751111165098
2025-06-28 11:46:05,101 - INFO - User metrics loaded: 4 metrics
2025-06-28 11:46:05,305 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:05,338 - INFO - Intent classification: sql
2025-06-28 11:46:05,351 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:46:05,605 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:05,985 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.name AS project_name,
       COUNT(t.id) AS deleted_tasks_count
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
AND p.owner_id = 1
WHERE t.is_deleted = 1
GROUP BY p.id,
         p.name
ORDER BY deleted_tasks_count DESC
LIMIT 1;
2025-06-28 11:46:05,986 - INFO - Raw DB data retrieved: 0 rows
2025-06-28 11:46:05,986 - WARNING - No data returned from SQL query
2025-06-28 11:46:05,987 - INFO - Final prompt created with unique_id_with_template: uid_d1eaffbcee8240399355ba59c01bb867_d1d60060913d3870_1751111165098
2025-06-28 11:46:06,230 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:08,029 - INFO - chat_id_enc 264ea1c5-c4df-453f-b322-96f9a697db10
2025-06-28 11:46:08,030 - INFO - Executing chat history query for chat_id 264ea1c5-c4df-453f-b322-96f9a697db10:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:46:08,031 - INFO - Saving message to DB for chat_id 264ea1c5-c4df-453f-b322-96f9a697db10, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:46:08,034 - INFO - Generated unique_id_with_template: uid_aba6528906bb4aaaabf74956bfa74dae_db7d59cf77b7b388_1751111168034
2025-06-28 11:46:08,035 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:46:08,036 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:46:08,037 - INFO - Processing query for user_id 1: Which project has the most deleted tasks?
2025-06-28 11:46:08,037 - INFO - Staff ID filter: 
2025-06-28 11:46:08,037 - INFO - Generated unique_id_with_template: uid_aba6528906bb4aaaabf74956bfa74dae_db7d59cf77b7b388_1751111168034
2025-06-28 11:46:08,037 - INFO - User metrics loaded: 4 metrics
2025-06-28 11:46:08,228 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:08,255 - INFO - Intent classification: sql
2025-06-28 11:46:08,268 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:46:08,626 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:09,032 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.name AS project_name,
       COUNT(d.id) AS deleted_task_count
FROM projects p
LEFT JOIN tasks t ON p.id = t.project_id
AND t.is_deleted = 1
LEFT JOIN sub_issues d ON t.id = d.task_id
AND d.is_deleted = 1
WHERE p.owner_id = 1
GROUP BY p.id,
         p.name
ORDER BY deleted_task_count DESC
LIMIT 1;
2025-06-28 11:46:09,035 - INFO - Raw DB data retrieved: 1 rows
2025-06-28 11:46:09,035 - INFO - Sample data: {'project_name': 'Automated Testing Framework', 'deleted_task_count': 0}
2025-06-28 11:46:09,036 - INFO - Final prompt created with unique_id_with_template: uid_aba6528906bb4aaaabf74956bfa74dae_db7d59cf77b7b388_1751111168034
2025-06-28 11:46:09,251 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:11,701 - INFO - chat_id_enc 264ea1c5-c4df-453f-b322-96f9a697db10
2025-06-28 11:46:11,701 - INFO - Executing chat history query for chat_id 264ea1c5-c4df-453f-b322-96f9a697db10:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:46:11,703 - INFO - Saving message to DB for chat_id 264ea1c5-c4df-453f-b322-96f9a697db10, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:46:11,706 - INFO - Generated unique_id_with_template: uid_f13f71008658470682964a3bb8deb4ce_c995d61a5833eede_1751111171706
2025-06-28 11:46:11,707 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:46:11,708 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:46:11,709 - INFO - Processing query for user_id 1: Which projects havent been updated since creation?
2025-06-28 11:46:11,709 - INFO - Staff ID filter: 
2025-06-28 11:46:11,709 - INFO - Generated unique_id_with_template: uid_f13f71008658470682964a3bb8deb4ce_c995d61a5833eede_1751111171706
2025-06-28 11:46:11,709 - INFO - User metrics loaded: 4 metrics
2025-06-28 11:46:11,945 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:11,983 - INFO - Intent classification: sql
2025-06-28 11:46:11,996 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:46:12,188 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:12,608 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.id AS project_id,
       p.name AS project_name,
       p.created_at,
       p.updated_at
FROM projects p
LEFT JOIN tasks t ON p.id = t.project_id
WHERE p.owner_id = 1
  AND (p.updated_at IS NULL
       OR p.updated_at = p.created_at);
2025-06-28 11:46:12,614 - INFO - Raw DB data retrieved: 170 rows
2025-06-28 11:46:12,615 - INFO - Sample data: {'project_id': 1, 'project_name': 'Automated Testing Framework', 'created_at': datetime.datetime(2025, 6, 18, 18, 7, 50), 'updated_at': datetime.datetime(2025, 6, 18, 18, 7, 50)}
2025-06-28 11:46:12,618 - INFO - Final prompt created with unique_id_with_template: uid_f13f71008658470682964a3bb8deb4ce_c995d61a5833eede_1751111171706
2025-06-28 11:46:12,896 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:17,610 - INFO - chat_id_enc 264ea1c5-c4df-453f-b322-96f9a697db10
2025-06-28 11:46:17,611 - INFO - Executing chat history query for chat_id 264ea1c5-c4df-453f-b322-96f9a697db10:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:46:17,613 - INFO - Saving message to DB for chat_id 264ea1c5-c4df-453f-b322-96f9a697db10, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:46:17,616 - INFO - Generated unique_id_with_template: uid_626e0a7ec0c74518b739402a6e27c808_d377a2c7d55d586d_1751111177616
2025-06-28 11:46:17,617 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:46:17,618 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:46:17,618 - INFO - Processing query for user_id 1: yh
2025-06-28 11:46:17,619 - INFO - Staff ID filter: 
2025-06-28 11:46:17,619 - INFO - Generated unique_id_with_template: uid_626e0a7ec0c74518b739402a6e27c808_d377a2c7d55d586d_1751111177616
2025-06-28 11:46:17,619 - INFO - User metrics loaded: 4 metrics
2025-06-28 11:46:17,901 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:17,941 - INFO - Intent classification: chat
2025-06-28 11:46:17,941 - INFO - Final prompt created with unique_id_with_template: uid_626e0a7ec0c74518b739402a6e27c808_d377a2c7d55d586d_1751111177616
2025-06-28 11:46:18,164 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:26,834 - INFO - chat_id_enc 264ea1c5-c4df-453f-b322-96f9a697db10
2025-06-28 11:46:26,834 - INFO - Executing chat history query for chat_id 264ea1c5-c4df-453f-b322-96f9a697db10:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:46:26,835 - INFO - Saving message to DB for chat_id 264ea1c5-c4df-453f-b322-96f9a697db10, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:46:26,841 - INFO - Generated unique_id_with_template: uid_275ec7e1be8a42bf88b86cbb08a16db2_1ee5d279ad8adefb_1751111186841
2025-06-28 11:46:26,842 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:46:26,843 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:46:26,844 - INFO - Processing query for user_id 1: Which user is assigned to the most overdue tasks?
2025-06-28 11:46:26,844 - INFO - Staff ID filter: 
2025-06-28 11:46:26,844 - INFO - Generated unique_id_with_template: uid_275ec7e1be8a42bf88b86cbb08a16db2_1ee5d279ad8adefb_1751111186841
2025-06-28 11:46:26,844 - INFO - User metrics loaded: 4 metrics
2025-06-28 11:46:27,103 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:27,140 - INFO - Intent classification: sql
2025-06-28 11:46:27,154 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:46:27,342 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:28,058 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT pu.full_name AS user_full_name,
       COUNT(*) AS overdue_task_count
FROM tasks t
LEFT JOIN platform_users pu ON t.user_id = pu.id
AND pu.owner_id = 1
WHERE t.status != 'Done'
  AND t.due_date IS NOT NULL
  AND STR_TO_DATE(t.due_date, '%Y-%m-%d') < CURDATE()
  AND t.owner_id = 1
GROUP BY pu.full_name
ORDER BY overdue_task_count DESC
LIMIT 1;
2025-06-28 11:46:28,061 - INFO - Raw DB data retrieved: 1 rows
2025-06-28 11:46:28,061 - INFO - Sample data: {'user_full_name': 'prebad50@gmail.com', 'overdue_task_count': 3}
2025-06-28 11:46:28,062 - INFO - Final prompt created with unique_id_with_template: uid_275ec7e1be8a42bf88b86cbb08a16db2_1ee5d279ad8adefb_1751111186841
2025-06-28 11:46:28,280 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:32,027 - INFO - chat_id_enc 264ea1c5-c4df-453f-b322-96f9a697db10
2025-06-28 11:46:32,027 - INFO - Executing chat history query for chat_id 264ea1c5-c4df-453f-b322-96f9a697db10:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:46:32,028 - INFO - Saving message to DB for chat_id 264ea1c5-c4df-453f-b322-96f9a697db10, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:46:32,032 - INFO - Generated unique_id_with_template: uid_fe4572d314f24de48f5b8bf0f6ef5f67_dbd9c42be9ab6fa7_1751111192032
2025-06-28 11:46:32,032 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:46:32,033 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:46:32,034 - INFO - Processing query for user_id 1: Which label is associated with the longest task durations?
2025-06-28 11:46:32,034 - INFO - Staff ID filter: 
2025-06-28 11:46:32,034 - INFO - Generated unique_id_with_template: uid_fe4572d314f24de48f5b8bf0f6ef5f67_dbd9c42be9ab6fa7_1751111192032
2025-06-28 11:46:32,034 - INFO - User metrics loaded: 4 metrics
2025-06-28 11:46:32,386 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:32,403 - INFO - Intent classification: sql
2025-06-28 11:46:32,417 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:46:32,649 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:33,121 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT JSON_UNQUOTE(JSON_EXTRACT(labels, '$[0]')) AS label,
       MAX(estimate) AS max_duration
FROM tasks
WHERE owner_id = 1
  AND labels IS NOT NULL
GROUP BY label
ORDER BY max_duration DESC
LIMIT 1;
2025-06-28 11:46:33,124 - INFO - Raw DB data retrieved: 1 rows
2025-06-28 11:46:33,124 - INFO - Sample data: {'label': None, 'max_duration': 13.0}
2025-06-28 11:46:33,124 - INFO - Final prompt created with unique_id_with_template: uid_fe4572d314f24de48f5b8bf0f6ef5f67_dbd9c42be9ab6fa7_1751111192032
2025-06-28 11:46:33,387 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:38,201 - INFO - chat_id_enc 
2025-06-28 11:46:38,419 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:38,698 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:38,782 - INFO - Created new chat with ID 62 and UUID 80c5f1d1-0634-4036-91fb-bf9bfe6925a2 for user 1
2025-06-28 11:46:38,782 - INFO - 80c5f1d1-0634-4036-91fb-bf9bfe6925a2
2025-06-28 11:46:38,783 - INFO - Executing chat history query for chat_id 80c5f1d1-0634-4036-91fb-bf9bfe6925a2:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:46:38,784 - INFO - Saving message to DB for chat_id 80c5f1d1-0634-4036-91fb-bf9bfe6925a2, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:46:38,788 - INFO - Generated unique_id_with_template: uid_c0d545e53d34486297a609d9b259858b_791d9b815c947c94_1751111198788
2025-06-28 11:46:38,788 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:46:38,789 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:46:38,790 - INFO - Processing query for user_id 1: Whats the average task estimate per platform?
2025-06-28 11:46:38,790 - INFO - Staff ID filter: 
2025-06-28 11:46:38,790 - INFO - Generated unique_id_with_template: uid_c0d545e53d34486297a609d9b259858b_791d9b815c947c94_1751111198788
2025-06-28 11:46:38,790 - INFO - User metrics loaded: 4 metrics
2025-06-28 11:46:39,013 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:39,042 - INFO - Intent classification: sql
2025-06-28 11:46:39,059 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:46:39,242 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:39,455 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT platform_id,
       AVG(estimate) AS average_task_estimate
FROM tasks
WHERE owner_id = 1
GROUP BY platform_id;
2025-06-28 11:46:39,458 - INFO - Raw DB data retrieved: 4 rows
2025-06-28 11:46:39,458 - INFO - Sample data: {'platform_id': '1', 'average_task_estimate': 4.967105263157895}
2025-06-28 11:46:39,459 - INFO - Final prompt created with unique_id_with_template: uid_c0d545e53d34486297a609d9b259858b_791d9b815c947c94_1751111198788
2025-06-28 11:46:39,731 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:57,401 - INFO - chat_id_enc 80c5f1d1-0634-4036-91fb-bf9bfe6925a2
2025-06-28 11:46:57,402 - INFO - Executing chat history query for chat_id 80c5f1d1-0634-4036-91fb-bf9bfe6925a2:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:46:57,403 - INFO - Saving message to DB for chat_id 80c5f1d1-0634-4036-91fb-bf9bfe6925a2, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:46:57,410 - INFO - Generated unique_id_with_template: uid_4eee193dca3c442991a0077895bfc27f_0777503de8d2ad4c_1751111217410
2025-06-28 11:46:57,410 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:46:57,411 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:46:57,412 - INFO - Processing query for user_id 1: Which user is assigned to the most overdue tasks?
2025-06-28 11:46:57,413 - INFO - Staff ID filter: 
2025-06-28 11:46:57,413 - INFO - Generated unique_id_with_template: uid_4eee193dca3c442991a0077895bfc27f_0777503de8d2ad4c_1751111217410
2025-06-28 11:46:57,413 - INFO - User metrics loaded: 4 metrics
2025-06-28 11:46:57,616 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:57,647 - INFO - Intent classification: sql
2025-06-28 11:46:57,661 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:46:57,852 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:46:58,438 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT pu.full_name AS user_full_name,
       COUNT(t.id) AS overdue_task_count
FROM tasks t
LEFT JOIN platform_users pu ON t.user_id = pu.id
AND pu.owner_id = 1
WHERE t.status != 'Done'
  AND t.due_date IS NOT NULL
  AND STR_TO_DATE(t.due_date, '%Y-%m-%d') < CURDATE()
  AND t.owner_id = 1
GROUP BY pu.id
ORDER BY overdue_task_count DESC
LIMIT 1;
2025-06-28 11:46:58,441 - INFO - Raw DB data retrieved: 1 rows
2025-06-28 11:46:58,441 - INFO - Sample data: {'user_full_name': 'prebad50@gmail.com', 'overdue_task_count': 3}
2025-06-28 11:46:58,442 - INFO - Final prompt created with unique_id_with_template: uid_4eee193dca3c442991a0077895bfc27f_0777503de8d2ad4c_1751111217410
2025-06-28 11:46:58,650 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:47:12,040 - INFO - chat_id_enc 80c5f1d1-0634-4036-91fb-bf9bfe6925a2
2025-06-28 11:47:12,041 - INFO - Executing chat history query for chat_id 80c5f1d1-0634-4036-91fb-bf9bfe6925a2:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:47:12,042 - INFO - Saving message to DB for chat_id 80c5f1d1-0634-4036-91fb-bf9bfe6925a2, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:47:12,046 - INFO - Generated unique_id_with_template: uid_e57d4ed0d4e3407ba2ee8903e573eaaa_25ec03f686008113_1751111232046
2025-06-28 11:47:12,046 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:47:12,047 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:47:12,048 - INFO - Processing query for user_id 1: Which project has the most deleted tasks?
2025-06-28 11:47:12,048 - INFO - Staff ID filter: 
2025-06-28 11:47:12,048 - INFO - Generated unique_id_with_template: uid_e57d4ed0d4e3407ba2ee8903e573eaaa_25ec03f686008113_1751111232046
2025-06-28 11:47:12,048 - INFO - User metrics loaded: 4 metrics
2025-06-28 11:47:12,220 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:47:12,235 - INFO - Intent classification: sql
2025-06-28 11:47:12,250 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:47:12,450 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:47:12,744 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.name AS project_name,
       COUNT(*) AS deleted_task_count
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
AND p.owner_id = 1
WHERE t.is_deleted = 1
GROUP BY p.name
ORDER BY deleted_task_count DESC
LIMIT 1
2025-06-28 11:47:12,747 - INFO - Raw DB data retrieved: 0 rows
2025-06-28 11:47:12,747 - WARNING - No data returned from SQL query
2025-06-28 11:47:12,747 - INFO - Final prompt created with unique_id_with_template: uid_e57d4ed0d4e3407ba2ee8903e573eaaa_25ec03f686008113_1751111232046
2025-06-28 11:47:12,970 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:47:23,710 - INFO - chat_id_enc 80c5f1d1-0634-4036-91fb-bf9bfe6925a2
2025-06-28 11:47:23,711 - INFO - Executing chat history query for chat_id 80c5f1d1-0634-4036-91fb-bf9bfe6925a2:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:47:23,713 - INFO - Saving message to DB for chat_id 80c5f1d1-0634-4036-91fb-bf9bfe6925a2, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:47:23,717 - INFO - Generated unique_id_with_template: uid_323d3027ac3e47c9b631442415ebce84_76b4c7381f7bc638_1751111243717
2025-06-28 11:47:23,718 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:47:23,719 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:47:23,720 - INFO - Processing query for user_id 1: Which project has the tightest deadline vs. workload estimate?
2025-06-28 11:47:23,720 - INFO - Staff ID filter: 
2025-06-28 11:47:23,720 - INFO - Generated unique_id_with_template: uid_323d3027ac3e47c9b631442415ebce84_76b4c7381f7bc638_1751111243717
2025-06-28 11:47:23,720 - INFO - User metrics loaded: 4 metrics
2025-06-28 11:47:23,890 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:47:23,910 - INFO - Intent classification: sql
2025-06-28 11:47:23,924 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:47:24,176 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:47:24,723 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT p.name AS project_name,
       p.end_date,
       COUNT(t.id) AS total_tasks,
       AVG(t.estimate) AS average_estimate,
       DATEDIFF(p.end_date, CURRENT_DATE) AS days_until_deadline
FROM projects p
LEFT JOIN tasks t ON p.id = t.project_id
AND t.is_deleted = 0
WHERE p.owner_id = 1
GROUP BY p.id,
         p.name,
         p.end_date
ORDER BY days_until_deadline / NULLIF(AVG(t.estimate), 0) ASC
LIMIT 1
2025-06-28 11:47:24,725 - INFO - Raw DB data retrieved: 1 rows
2025-06-28 11:47:24,725 - INFO - Sample data: {'project_name': 'Automated Testing Framework', 'end_date': None, 'total_tasks': 0, 'average_estimate': None, 'days_until_deadline': None}
2025-06-28 11:47:24,725 - INFO - Final prompt created with unique_id_with_template: uid_323d3027ac3e47c9b631442415ebce84_76b4c7381f7bc638_1751111243717
2025-06-28 11:47:24,944 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:47:32,681 - INFO - chat_id_enc 80c5f1d1-0634-4036-91fb-bf9bfe6925a2
2025-06-28 11:47:32,682 - INFO - Executing chat history query for chat_id 80c5f1d1-0634-4036-91fb-bf9bfe6925a2:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:47:32,684 - INFO - Saving message to DB for chat_id 80c5f1d1-0634-4036-91fb-bf9bfe6925a2, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:47:32,688 - INFO - Generated unique_id_with_template: uid_f9cafc85bd7d43cc837bf4b9ceab4df9_24cbb3b8ff4caa33_1751111252688
2025-06-28 11:47:32,688 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:47:32,690 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:47:32,691 - INFO - Processing query for user_id 1: Whats the average task estimate per platform?
2025-06-28 11:47:32,691 - INFO - Staff ID filter: 
2025-06-28 11:47:32,691 - INFO - Generated unique_id_with_template: uid_f9cafc85bd7d43cc837bf4b9ceab4df9_24cbb3b8ff4caa33_1751111252688
2025-06-28 11:47:32,691 - INFO - User metrics loaded: 4 metrics
2025-06-28 11:47:32,870 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:47:32,884 - INFO - Intent classification: sql
2025-06-28 11:47:32,896 - INFO - Database schema: "\nCREATE TABLE linked (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttype VARCHAR(100) NOT NULL, \n\tslack_channel VARCHAR(255), \n\ttoken TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL, \n\towner_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcloud_id VARCHAR(255), \n\tbot TEXT, \n\tjson TEXT, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from linked table:\nid\ttype\tslack_channel\ttoken\towner_id\tuserid\tcloud_id\tbot\tjson\tcreated_at\n1\tlinear\tNone\tlin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\tNone\t1\tNone\tNone\t{\"access_token\":\"lin_oauth_a84c21c91ff8ca0667ab48b4234eaa9a0f236202b45c535d1db7d3515f5d3c42\",\"token_\t2025-06-05 14:49:34\n3\tlinear\tNone\tlin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\tNone\t2\tNone\tNone\t{\"access_token\":\"lin_oauth_740eee0ff4bf659babba481407b31a1e890e7a2d85bd9ea87f605e0b3bb26fb9\",\"token_\t2025-06-15 11:23:22\n4\tlinear\tNone\tlin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\tNone\t4\tNone\tNone\t{\"access_token\":\"lin_oauth_02a5455953ec7f91656029d97c55ee4af928ecaf93625992d4cfba74f9b9b98e\",\"token_\t2025-06-16 15:41:09\n*/\n\n\nCREATE TABLE platform_users (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tname VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, \n\temail VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tfull_name VARCHAR(255), \n\tsource VARCHAR(50) DEFAULT 'tasks', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from platform_users table:\nid\tname\temail\tuser_id\tplatform_id\tfull_name\tsource\tcreated_at\tupdated_at\towner_id\n1\tprebad50@gmail.com\tprebad50@gmail.com\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t1\tprebad50@gmail.com\tlinear\t2025-06-01 09:02:23\t2025-06-01 09:02:23\t1\n2\tgodswillikwan01@gmail.com\tgodswillikwan01@gmail.com\tb99caeb0-2bb3-4c15-9297-e657a46a3377\t1\tgodswillikwan01@gmail.com\tlinear\t2025-05-11 17:43:54\t2025-05-11 17:43:54\t1\n3\tdev.ayomide@gmail.com\tdev.ayomide@gmail.com\t1d66d358-c981-4563-917f-8e8b35b497e6\t1\tdev.ayomide@gmail.com\tlinear\t2025-03-18 09:45:42\t2025-03-18 09:45:42\t1\n*/\n\n\nCREATE TABLE projects (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tplatform_id VARCHAR(255), \n\tuser_id INTEGER, \n\tname VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstart_date VARCHAR(255), \n\tend_date VARCHAR(255), \n\tproject_key TEXT, \n\tstate VARCHAR(50), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\ttype VARCHAR(255) NOT NULL DEFAULT 'project', \n\tlast_synced_at TIMESTAMP NULL, \n\tcreator VARCHAR(255), \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from projects table:\nid\tplatform_id\tuser_id\tname\tdescription\tstart_date\tend_date\tproject_key\tstate\tsource\ttype\tlast_synced_at\tcreator\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tAutomated Testing Framework\tDevelop a framework for automated testing to improve code quality and reduce manual testing efforts \t2025-06-18 18:07:50\tNone\ta7b01a44-f674-4aea-af6f-24cc9238c440\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:50\t2025-06-18 18:07:50\t1\n2\t1\t1\tSelf-Service Knowledge Base\tCreate a platform for users to access guides, FAQs, and troubleshooting tips to reduce support reque\t2025-06-18 18:07:06\tNone\t66ef2686-929d-428c-96a4-8a6e8c37d8c1\tplanned\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:07:06\t2025-06-18 18:07:06\t1\n3\t1\t1\tAI-Powered Help Desk\tDevelop a system to automate support ticket categorization and response suggestions using machine le\t2025-06-18 18:06:32\tNone\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\tstarted\tlinear\tproject\t2025-06-18 19:08:04\t0a996c49-4f8f-4af7-9414-01aa7759bb08\t2025-06-18 18:06:32\t2025-06-18 18:06:32\t1\n*/\n\n\nCREATE TABLE sub_issues (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tsub_task_id VARCHAR(300), \n\tstatus VARCHAR(255), \n\tuser_id VARCHAR(255), \n\tplatform_id INTEGER, \n\tis_deleted INTEGER, \n\ttask_id VARCHAR(255) NOT NULL, \n\towner_id INTEGER, \n\tcreated_at VARCHAR(255), \n\tupdated_at VARCHAR(255), \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from sub_issues table:\nid\ttitle\tsub_task_id\tstatus\tuser_id\tplatform_id\tis_deleted\ttask_id\towner_id\tcreated_at\tupdated_at\n1\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n2\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t1\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n3\tData Collection for Model Training\t56b62aba-58a8-464e-bc7f-81f08ba7416a\tCanceled\tc3dd513d-b340-49fe-883e-d780403d978a\t4\tNone\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t4\t2025-06-18 18:06:46\t2025-06-19 10:21:36\n*/\n\n\nCREATE TABLE tasks (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tproject_id VARCHAR(255), \n\tteam_id VARCHAR(255), \n\tplatform_id VARCHAR(255), \n\tparent_id VARCHAR(255), \n\tuser_id VARCHAR(255), \n\ttitle VARCHAR(255) NOT NULL, \n\tdescription TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tpriority VARCHAR(265), \n\tlabels JSON, \n\testimate FLOAT, \n\tdue_date VARCHAR(255), \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tis_deleted TINYINT(1) DEFAULT '0', \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tchecklists LONGTEXT, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from tasks table:\nid\tproject_id\tteam_id\tplatform_id\tparent_id\tuser_id\ttitle\tdescription\tstatus\tpriority\tlabels\testimate\tdue_date\tsource\tlast_synced_at\tis_deleted\tcreated_at\tchecklists\tupdated_at\towner_id\n1\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t4\n2\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t1\td181b6a9-2a96-480f-b82d-5a4c94f7a11b\t1d66d358-c981-4563-917f-8e8b35b497e6\tDevelop Ticket Categorization Model\tDesign and implement a machine learning model to categorize support tickets based on their content. \tDuplicate\t2\t[]\t13.0\tNone\tlinear\t2025-06-19 11:21:38\tNone\t2025-06-18 18:06:46\tNone\t2025-06-19 10:21:37\t1\n3\te09b716d-c3aa-43e1-bfc2-c0a0a5b7695a\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t4\t4d455271-c73f-4c66-9868-4e829c3c64f4\tae80d1ab-25b0-436a-8f07-cf84b3ddd46a\tIntegrate Response Suggestion System\tImplement a system that suggests responses to support tickets using a pre-trained model. Acceptance \tDuplicate\t3\t[]\t8.0\tNone\tlinear\t2025-06-19 11:21:34\tNone\t2025-06-18 18:06:50\tNone\t2025-06-19 10:21:34\t4\n*/\n\n\nCREATE TABLE teams (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\tuser_id INTEGER, \n\tplatform_id VARCHAR(255), \n\tname VARCHAR(255) NOT NULL, \n\tteam_key VARCHAR(50), \n\tdescription TEXT, \n\tsource ENUM('linear','trello','jira') NOT NULL, \n\tlast_synced_at TIMESTAMP NULL, \n\tcreated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, \n\tupdated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, \n\towner_id INTEGER NOT NULL, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from teams table:\nid\tuser_id\tplatform_id\tname\tteam_key\tdescription\tsource\tlast_synced_at\tcreated_at\tupdated_at\towner_id\n1\t1\t1\tHelp and support\t8e2e1b68-cf6b-4ef3-9f09-dce0931a72d5\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:40\t2025-06-17 20:06:40\t1\n2\t1\t1\tTesters\tf6a76b45-8a4f-40c9-a965-62cb1cdb5e9c\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:06:02\t2025-06-17 20:06:02\t1\n3\t1\t1\tMarketing\tc8215456-ff8b-4b45-93c7-f0350f13f7fb\t\tlinear\t2025-06-18 19:08:04\t2025-06-17 20:05:45\t2025-06-17 20:05:45\t1\n*/\n\n\nCREATE TABLE user_metrics (\n\tid INTEGER NOT NULL AUTO_INCREMENT, \n\ttitle TEXT, \n\tdescription TEXT, \n\tcustom_name TEXT, \n\tcustom_description TEXT, \n\tcategory TEXT, \n\tweight VARCHAR(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '0', \n\tpercentage VARCHAR(255) DEFAULT '0', \n\tmetric_id INTEGER, \n\tuserid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \n\tPRIMARY KEY (id)\n)COLLATE utf8mb4_0900_ai_ci ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\n/*\n3 rows from user_metrics table:\nid\ttitle\tdescription\tcustom_name\tcustom_description\tcategory\tweight\tpercentage\tmetric_id\tuserid\tcreated_at\n5\tMean Absolute Error (MAE)\tAverage absolute difference between predictions and actual values.\tNone\tNone\t2\t2\t17\t5\t1\t2025-06-27 11:37:53\n6\tMean Squared Error (MSE)\tAverage squared difference between predictions and actual values.\tNone\tNone\t2\t3\t25\t6\t1\t2025-06-27 11:37:53\n7\tRoot Mean Squared Error (RMSE)\tSquare root of the average of squared errors.\tNone\tNone\t2\t5\t42\t7\t1\t2025-06-27 11:37:53\n*/"
2025-06-28 11:47:33,336 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:47:33,550 - INFO - Generated SQL Query for user_id 1 with staff_id :
SELECT platform_id,
       AVG(estimate) AS average_estimate
FROM tasks
WHERE owner_id = 1
GROUP BY platform_id
2025-06-28 11:47:33,552 - INFO - Raw DB data retrieved: 4 rows
2025-06-28 11:47:33,552 - INFO - Sample data: {'platform_id': '1', 'average_estimate': 4.967105263157895}
2025-06-28 11:47:33,552 - INFO - Final prompt created with unique_id_with_template: uid_f9cafc85bd7d43cc837bf4b9ceab4df9_24cbb3b8ff4caa33_1751111252688
2025-06-28 11:47:33,810 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:47:42,601 - INFO - chat_id_enc 80c5f1d1-0634-4036-91fb-bf9bfe6925a2
2025-06-28 11:47:42,601 - INFO - Executing chat history query for chat_id 80c5f1d1-0634-4036-91fb-bf9bfe6925a2:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:47:42,603 - INFO - Saving message to DB for chat_id 80c5f1d1-0634-4036-91fb-bf9bfe6925a2, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:47:42,610 - INFO - Generated unique_id_with_template: uid_25043656369e4b0299a1f15300a91d8a_96a01eca8c1434f2_1751111262610
2025-06-28 11:47:42,610 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:47:42,611 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:47:42,613 - INFO - Processing query for user_id 1: ur good at this
2025-06-28 11:47:42,613 - INFO - Staff ID filter: 
2025-06-28 11:47:42,613 - INFO - Generated unique_id_with_template: uid_25043656369e4b0299a1f15300a91d8a_96a01eca8c1434f2_1751111262610
2025-06-28 11:47:42,613 - INFO - User metrics loaded: 4 metrics
2025-06-28 11:47:42,802 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:47:42,816 - INFO - Intent classification: chat
2025-06-28 11:47:42,816 - INFO - Final prompt created with unique_id_with_template: uid_25043656369e4b0299a1f15300a91d8a_96a01eca8c1434f2_1751111262610
2025-06-28 11:47:43,037 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:47:57,361 - INFO - chat_id_enc 80c5f1d1-0634-4036-91fb-bf9bfe6925a2
2025-06-28 11:47:57,361 - INFO - Executing chat history query for chat_id 80c5f1d1-0634-4036-91fb-bf9bfe6925a2:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:47:57,363 - INFO - Saving message to DB for chat_id 80c5f1d1-0634-4036-91fb-bf9bfe6925a2, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:47:57,366 - INFO - Generated unique_id_with_template: uid_e56d8ad815964fc082b21fe8e54481c9_6296710b1296a0a7_1751111277366
2025-06-28 11:47:57,367 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:47:57,367 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:47:57,368 - INFO - Processing query for user_id 1: did. u see my reaction?
2025-06-28 11:47:57,368 - INFO - Staff ID filter: 
2025-06-28 11:47:57,369 - INFO - Generated unique_id_with_template: uid_e56d8ad815964fc082b21fe8e54481c9_6296710b1296a0a7_1751111277366
2025-06-28 11:47:57,369 - INFO - User metrics loaded: 4 metrics
2025-06-28 11:47:57,590 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:47:57,596 - INFO - Intent classification: chat
2025-06-28 11:47:57,596 - INFO - Final prompt created with unique_id_with_template: uid_e56d8ad815964fc082b21fe8e54481c9_6296710b1296a0a7_1751111277366
2025-06-28 11:47:57,883 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:48:07,201 - INFO - chat_id_enc 80c5f1d1-0634-4036-91fb-bf9bfe6925a2
2025-06-28 11:48:07,202 - INFO - Executing chat history query for chat_id 80c5f1d1-0634-4036-91fb-bf9bfe6925a2:

        SELECT sender_type, message, reaction
        FROM chat_messages
        WHERE chat_id = %s
        ORDER BY created_at DESC
        LIMIT 10
    
2025-06-28 11:48:07,203 - INFO - Saving message to DB for chat_id 80c5f1d1-0634-4036-91fb-bf9bfe6925a2, user_id 1:

        INSERT INTO chat_messages (chat_id, user_id, owner_id, sender_type, message)
        VALUES (%s, %s, %s, %s, %s)
    
2025-06-28 11:48:07,207 - INFO - Generated unique_id_with_template: uid_b743f34a56b241c79b701167681bcc38_6e040f3ba3f100f4_1751111287207
2025-06-28 11:48:07,207 - INFO - Fetching workspace types for owner_id 1:

        SELECT type
        FROM linked
        WHERE userid = %s
    
2025-06-28 11:48:07,208 - INFO - Fetching user metrics for owner_id 1:

        SELECT title, description, category, weight, percentage, metric_id
        FROM user_metrics
        WHERE userid = %s
        ORDER BY created_at DESC
    
2025-06-28 11:48:07,209 - INFO - Processing query for user_id 1: m asking if u see a reaction i pressed
2025-06-28 11:48:07,209 - INFO - Staff ID filter: 
2025-06-28 11:48:07,209 - INFO - Generated unique_id_with_template: uid_b743f34a56b241c79b701167681bcc38_6e040f3ba3f100f4_1751111287207
2025-06-28 11:48:07,209 - INFO - User metrics loaded: 4 metrics
2025-06-28 11:48:07,415 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:48:07,430 - INFO - Intent classification: chat
2025-06-28 11:48:07,430 - INFO - Final prompt created with unique_id_with_template: uid_b743f34a56b241c79b701167681bcc38_6e040f3ba3f100f4_1751111287207
2025-06-28 11:48:07,636 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-28 11:48:55,041 - INFO - Client disconnected from WebSocket
